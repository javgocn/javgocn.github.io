<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.javgo.cn/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html"><meta property="og:site_name" content="JavGo"><meta property="og:title" content="05-cloud-æœåŠ¡æ²»ç†"><meta property="og:description" content="1.å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç° å¾®æœåŠ¡æ¶æ„é€æ¸æˆä¸ºç°ä»£è½¯ä»¶å¼€å‘çš„æ ‡å‡†æ¨¡å¼ï¼Œå…¶ä¸­æœåŠ¡æ²»ç†æ˜¯ç¡®ä¿å…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§çš„å…³é”®ã€‚æœ¬èŠ‚çš„é‡ç‚¹æ˜¯æ·±å…¥æ¢ç©¶æœåŠ¡æ²»ç†ï¼ŒåŒæ—¶å…·ä½“åˆ†æ Nacos ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æ¶æ„è®¾è®¡ã€‚ æœåŠ¡æ²»ç†ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›äº†è‡ªåŠ¨åŒ–ç®¡ç†ï¼Œæ˜¯å¾®æœåŠ¡ä¹‹é—´åè°ƒå·¥ä½œçš„é»˜é»˜ä¿éšœè€…ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœç¼ºä¹æœ‰æ•ˆçš„æœåŠ¡æ²»ç†ï¼Œå½“é¢ä¸´æœåŠ¡å®ä¾‹çš„åŠ¨æ€å˜åŒ–æ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-11-10T16:14:41.000Z"><meta property="article:author" content="Mr.JavGo"><meta property="article:modified_time" content="2023-11-10T16:14:41.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"05-cloud-æœåŠ¡æ²»ç†","image":[""],"dateModified":"2023-11-10T16:14:41.000Z","author":[{"@type":"Person","name":"Mr.JavGo","url":"https://www.javgo.cn","email":"javgocn@gmail.com"}]}</script><link rel="icon" href="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-03-091254.gif"><title>05-cloud-æœåŠ¡æ²»ç† | JavGo</title><meta name="description" content="1.å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç° å¾®æœåŠ¡æ¶æ„é€æ¸æˆä¸ºç°ä»£è½¯ä»¶å¼€å‘çš„æ ‡å‡†æ¨¡å¼ï¼Œå…¶ä¸­æœåŠ¡æ²»ç†æ˜¯ç¡®ä¿å…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§çš„å…³é”®ã€‚æœ¬èŠ‚çš„é‡ç‚¹æ˜¯æ·±å…¥æ¢ç©¶æœåŠ¡æ²»ç†ï¼ŒåŒæ—¶å…·ä½“åˆ†æ Nacos ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æ¶æ„è®¾è®¡ã€‚ æœåŠ¡æ²»ç†ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›äº†è‡ªåŠ¨åŒ–ç®¡ç†ï¼Œæ˜¯å¾®æœåŠ¡ä¹‹é—´åè°ƒå·¥ä½œçš„é»˜é»˜ä¿éšœè€…ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœç¼ºä¹æœ‰æ•ˆçš„æœåŠ¡æ²»ç†ï¼Œå½“é¢ä¸´æœåŠ¡å®ä¾‹çš„åŠ¨æ€å˜åŒ–æ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§...">
    <style>
      html {
        background: #fff;
      }

      html[data-theme="dark"] {
        background: #1d1e1f;
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-8a499f0b.css" as="style"><link rel="stylesheet" href="/assets/style-8a499f0b.css">
    <link rel="modulepreload" href="/assets/app-009ef08a.js"><link rel="modulepreload" href="/assets/05-cloud-æœåŠ¡æ²»ç†.html-185db1c2.js"><link rel="modulepreload" href="/assets/05-cloud-æœåŠ¡æ²»ç†.html-191cc808.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/assets/index.html-59545fda.js" as="script"><link rel="prefetch" href="/assets/index.html-b0db079f.js" as="script"><link rel="prefetch" href="/assets/disable.html-2014604b.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-d40e3c22.js" as="script"><link rel="prefetch" href="/assets/markdown.html-6da9f9fb.js" as="script"><link rel="prefetch" href="/assets/page.html-a73ec1b5.js" as="script"><link rel="prefetch" href="/assets/index.html-25c59f41.js" as="script"><link rel="prefetch" href="/assets/index.html-e02c2004.js" as="script"><link rel="prefetch" href="/assets/index.html-76825eba.js" as="script"><link rel="prefetch" href="/assets/baz.html-c679209f.js" as="script"><link rel="prefetch" href="/assets/index.html-f29edad1.js" as="script"><link rel="prefetch" href="/assets/ray.html-18a627bd.js" as="script"><link rel="prefetch" href="/assets/Docker.html-b875c70e.js" as="script"><link rel="prefetch" href="/assets/Git.html-d7745bd5.js" as="script"><link rel="prefetch" href="/assets/Homebrew.html-f7c0660d.js" as="script"><link rel="prefetch" href="/assets/JDK.html-b3833425.js" as="script"><link rel="prefetch" href="/assets/Linux.html-4506b435.js" as="script"><link rel="prefetch" href="/assets/MacOS.html-92677d4f.js" as="script"><link rel="prefetch" href="/assets/Maven.html-b5ff16f2.js" as="script"><link rel="prefetch" href="/assets/01-Javaä»‹ç».html-4693b97b.js" as="script"><link rel="prefetch" href="/assets/02-ç¯å¢ƒæ­å»º.html-33f85d2b.js" as="script"><link rel="prefetch" href="/assets/03-IDEå¼€å‘å·¥å…·.html-f7e91fb5.js" as="script"><link rel="prefetch" href="/assets/04-æ•°æ®ç±»å‹.html-f3a415d9.js" as="script"><link rel="prefetch" href="/assets/05-æµç¨‹æ§åˆ¶.html-0156f680.js" as="script"><link rel="prefetch" href="/assets/06-æ•°ç»„.html-ced4c392.js" as="script"><link rel="prefetch" href="/assets/07-é¢å‘å¯¹è±¡.html-03adc1d0.js" as="script"><link rel="prefetch" href="/assets/08-æŠ½è±¡ç±».html-cc98c54c.js" as="script"><link rel="prefetch" href="/assets/09-æ¥å£.html-792a440e.js" as="script"><link rel="prefetch" href="/assets/10-æšä¸¾.html-dc4d145c.js" as="script"><link rel="prefetch" href="/assets/11-String.html-ddaa6e66.js" as="script"><link rel="prefetch" href="/assets/12-æ—¥æœŸæ—¶é—´.html-f1e81768.js" as="script"><link rel="prefetch" href="/assets/13-é›†åˆç±».html-1f946d66.js" as="script"><link rel="prefetch" href="/assets/14-æ³›å‹.html-7db2330a.js" as="script"><link rel="prefetch" href="/assets/15-æ³¨è§£.html-cdb3b4ad.js" as="script"><link rel="prefetch" href="/assets/16-å¼‚å¸¸å¤„ç†.html-8f34614e.js" as="script"><link rel="prefetch" href="/assets/17-å¤šçº¿ç¨‹.html-18056ca6.js" as="script"><link rel="prefetch" href="/assets/18-IOæµ.html-4372afb9.js" as="script"><link rel="prefetch" href="/assets/19-åå°„.html-cbf15af8.js" as="script"><link rel="prefetch" href="/assets/01-é›†åˆæ¡†æ¶æ¦‚è§ˆ.html-11ce78b8.js" as="script"><link rel="prefetch" href="/assets/02-æºç -ArrayList.html-ded021ce.js" as="script"><link rel="prefetch" href="/assets/03-æºç -HashMap.html-f85b9dff.js" as="script"><link rel="prefetch" href="/assets/01-å¿«é€Ÿå…¥é—¨-HelloWorld.html-26b2dc78.js" as="script"><link rel="prefetch" href="/assets/02-æ ¸å¿ƒå¿…å­¦-SpringApplication.html-4f1b8268.js" as="script"><link rel="prefetch" href="/assets/03-æ ¸å¿ƒå¿…å­¦-å¤–éƒ¨é…ç½®.html-96065495.js" as="script"><link rel="prefetch" href="/assets/04-æ ¸å¿ƒå¿…å­¦-Profiles.html-136ad074.js" as="script"><link rel="prefetch" href="/assets/06-æ ¸å¿ƒå¿…å­¦-æ—¥å¿—è®°å½•.html-ae8edfe2.js" as="script"><link rel="prefetch" href="/assets/07-æ ¸å¿ƒå¿…å­¦-å›½é™…åŒ–.html-4f7a6cc1.js" as="script"><link rel="prefetch" href="/assets/08-æ ¸å¿ƒå¿…å­¦-JSON.html-716ba309.js" as="script"><link rel="prefetch" href="/assets/09-æ ¸å¿ƒå¿…å­¦-å®šæ—¶ä»»åŠ¡.html-c448fd00.js" as="script"><link rel="prefetch" href="/assets/10-æ ¸å¿ƒå¿…å­¦-æµ‹è¯•.html-0254dae6.js" as="script"><link rel="prefetch" href="/assets/11-æ ¸å¿ƒå¿…å­¦-åˆ›å»ºè‡ªå·±çš„è‡ªåŠ¨é…ç½®.html-9219d7d9.js" as="script"><link rel="prefetch" href="/assets/00-cloud-å¯¼è¯­.html-f1aca826.js" as="script"><link rel="prefetch" href="/assets/01-cloud-å¾®æœåŠ¡æ¶æ„çš„å†å²æ¼”è¿›.html-c829a86b.js" as="script"><link rel="prefetch" href="/assets/02-cloud-SpringCloudæ¦‚è¿°.html-7543586d.js" as="script"><link rel="prefetch" href="/assets/03-cloud-å®æˆ˜é¡¹ç›®è¯´æ˜.html-df4b55a0.js" as="script"><link rel="prefetch" href="/assets/04-cloud-å®æˆ˜é¡¹ç›®æ­å»º.html-aeccdb85.js" as="script"><link rel="prefetch" href="/assets/01-æ ¸å¿ƒ-IOC.html-fda7883c.js" as="script"><link rel="prefetch" href="/assets/01-Security-HelloSecurity.html-2cfdca64.js" as="script"><link rel="prefetch" href="/assets/02-Security-æ•´ä½“æ¶æ„.html-3f3a58aa.js" as="script"><link rel="prefetch" href="/assets/03-Security-è®¤è¯.html-50f8ed66.js" as="script"><link rel="prefetch" href="/assets/04-Security-æˆæƒ.html-5d7954c6.js" as="script"><link rel="prefetch" href="/assets/05-Security-OAuth2.html-99fdbb55.js" as="script"><link rel="prefetch" href="/assets/06-Security-Webæ”»å‡»é˜²æŠ¤.html-faeebdec.js" as="script"><link rel="prefetch" href="/assets/07-Security-é›†æˆ.html-9e66f06f.js" as="script"><link rel="prefetch" href="/assets/08-Security-é…ç½®.html-60155ef2.js" as="script"><link rel="prefetch" href="/assets/09-Security-æµ‹è¯•.html-042121af.js" as="script"><link rel="prefetch" href="/assets/01-KIEå…¥é—¨.html-c564d424.js" as="script"><link rel="prefetch" href="/assets/02-Droolsè§„åˆ™å¼•æ“.html-d932cd97.js" as="script"><link rel="prefetch" href="/assets/03-è§„åˆ™è¯­è¨€å‚è€ƒ.html-48b899a9.js" as="script"><link rel="prefetch" href="/assets/04-Droolsé›†æˆSpringBoot.html-69981010.js" as="script"><link rel="prefetch" href="/assets/05-WorkBench.html-6c06ab90.js" as="script"><link rel="prefetch" href="/assets/è§„åˆ™è¯­è¨€-DRL.html-6e9a2ff8.js" as="script"><link rel="prefetch" href="/assets/è§„åˆ™è¯­è¨€-DSL.html-8071d898.js" as="script"><link rel="prefetch" href="/assets/01-å¿«é€Ÿå…¥é—¨.html-82322369.js" as="script"><link rel="prefetch" href="/assets/02-è¯»Excel.html-d5ea6a0f.js" as="script"><link rel="prefetch" href="/assets/03-å†™Excel.html-d6b5b9e0.js" as="script"><link rel="prefetch" href="/assets/04-å¡«å……Excel.html-4bae95b2.js" as="script"><link rel="prefetch" href="/assets/01-å­¦ä¹ ç½‘ç«™æ¨è.html-2d48eece.js" as="script"><link rel="prefetch" href="/assets/02-Gitå‘½ä»¤æ¸…å•.html-fcb654f5.js" as="script"><link rel="prefetch" href="/assets/03-GitHubæ–‡æ¡£.html-36c2709c.js" as="script"><link rel="prefetch" href="/assets/04-GitLabæ–‡æ¡£.html-bc435a59.js" as="script"><link rel="prefetch" href="/assets/05-Gitå¿«é€Ÿå…¥é—¨.html-63f966ab.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼ç®—æ³•-Snowflake_ID.html-0bd516b9.js" as="script"><link rel="prefetch" href="/assets/æ’åº-å†’æ³¡æ’åºï¼ˆBubble_sortï¼‰.html-ae6dd5e7.js" as="script"><link rel="prefetch" href="/assets/æ’åº-å¿«é€Ÿæ’åºï¼ˆQuick_Sortï¼‰.html-0ecdb7be.js" as="script"><link rel="prefetch" href="/assets/æ’åº-æ’å…¥æ’åºï¼ˆInsertion_sortï¼‰.html-126e41fa.js" as="script"><link rel="prefetch" href="/assets/æ’åº-é€‰æ‹©æ’åºï¼ˆSelection_sortï¼‰.html-a56f461c.js" as="script"><link rel="prefetch" href="/assets/01-Linuxæ¦‚è¿°.html-5ecd476c.js" as="script"><link rel="prefetch" href="/assets/02-Linuxå®‰è£…ä¸Šæ‰‹.html-f4f93ce3.js" as="script"><link rel="prefetch" href="/assets/03-LinuxåŸºæœ¬å‘½ä»¤.html-479af89b.js" as="script"><link rel="prefetch" href="/assets/404.html-6297c376.js" as="script"><link rel="prefetch" href="/assets/index.html-212f325e.js" as="script"><link rel="prefetch" href="/assets/index.html-bfe20a2c.js" as="script"><link rel="prefetch" href="/assets/index.html-dd82a3d8.js" as="script"><link rel="prefetch" href="/assets/index.html-22fa99d8.js" as="script"><link rel="prefetch" href="/assets/index.html-f79655e7.js" as="script"><link rel="prefetch" href="/assets/index.html-be90ee37.js" as="script"><link rel="prefetch" href="/assets/index.html-a4406380.js" as="script"><link rel="prefetch" href="/assets/index.html-16d8ead3.js" as="script"><link rel="prefetch" href="/assets/index.html-1706bfa4.js" as="script"><link rel="prefetch" href="/assets/index.html-b7d180ce.js" as="script"><link rel="prefetch" href="/assets/index.html-63b9e4b7.js" as="script"><link rel="prefetch" href="/assets/index.html-5190e02b.js" as="script"><link rel="prefetch" href="/assets/index.html-8f988524.js" as="script"><link rel="prefetch" href="/assets/index.html-6553ad6b.js" as="script"><link rel="prefetch" href="/assets/index.html-1bc865ae.js" as="script"><link rel="prefetch" href="/assets/index.html-4e1bd50c.js" as="script"><link rel="prefetch" href="/assets/index.html-6aab0649.js" as="script"><link rel="prefetch" href="/assets/index.html-eac64704.js" as="script"><link rel="prefetch" href="/assets/index.html-240368ca.js" as="script"><link rel="prefetch" href="/assets/index.html-15ccd56b.js" as="script"><link rel="prefetch" href="/assets/disable.html-bd0e46b8.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-201a46f5.js" as="script"><link rel="prefetch" href="/assets/markdown.html-80696976.js" as="script"><link rel="prefetch" href="/assets/page.html-90b3c8e1.js" as="script"><link rel="prefetch" href="/assets/index.html-9bcb8a28.js" as="script"><link rel="prefetch" href="/assets/index.html-18002ea0.js" as="script"><link rel="prefetch" href="/assets/index.html-92f11359.js" as="script"><link rel="prefetch" href="/assets/baz.html-af8bb83b.js" as="script"><link rel="prefetch" href="/assets/index.html-588fdcc9.js" as="script"><link rel="prefetch" href="/assets/ray.html-dd4f381d.js" as="script"><link rel="prefetch" href="/assets/Docker.html-d95efed6.js" as="script"><link rel="prefetch" href="/assets/Git.html-d2b1bb17.js" as="script"><link rel="prefetch" href="/assets/Homebrew.html-f6ea081b.js" as="script"><link rel="prefetch" href="/assets/JDK.html-996a402c.js" as="script"><link rel="prefetch" href="/assets/Linux.html-0f749299.js" as="script"><link rel="prefetch" href="/assets/MacOS.html-2c6a4038.js" as="script"><link rel="prefetch" href="/assets/Maven.html-8c3aa0b3.js" as="script"><link rel="prefetch" href="/assets/01-Javaä»‹ç».html-7729143a.js" as="script"><link rel="prefetch" href="/assets/02-ç¯å¢ƒæ­å»º.html-b94763a7.js" as="script"><link rel="prefetch" href="/assets/03-IDEå¼€å‘å·¥å…·.html-a6817e38.js" as="script"><link rel="prefetch" href="/assets/04-æ•°æ®ç±»å‹.html-38b4e584.js" as="script"><link rel="prefetch" href="/assets/05-æµç¨‹æ§åˆ¶.html-efcc84a8.js" as="script"><link rel="prefetch" href="/assets/06-æ•°ç»„.html-43b97b9c.js" as="script"><link rel="prefetch" href="/assets/07-é¢å‘å¯¹è±¡.html-672f0b4e.js" as="script"><link rel="prefetch" href="/assets/08-æŠ½è±¡ç±».html-fa26016b.js" as="script"><link rel="prefetch" href="/assets/09-æ¥å£.html-2e570dc4.js" as="script"><link rel="prefetch" href="/assets/10-æšä¸¾.html-72d18700.js" as="script"><link rel="prefetch" href="/assets/11-String.html-b97a5354.js" as="script"><link rel="prefetch" href="/assets/12-æ—¥æœŸæ—¶é—´.html-6c3ad250.js" as="script"><link rel="prefetch" href="/assets/13-é›†åˆç±».html-17e09079.js" as="script"><link rel="prefetch" href="/assets/14-æ³›å‹.html-11740442.js" as="script"><link rel="prefetch" href="/assets/15-æ³¨è§£.html-56882890.js" as="script"><link rel="prefetch" href="/assets/16-å¼‚å¸¸å¤„ç†.html-d77dfe7e.js" as="script"><link rel="prefetch" href="/assets/17-å¤šçº¿ç¨‹.html-4968d9a9.js" as="script"><link rel="prefetch" href="/assets/18-IOæµ.html-48fd3a62.js" as="script"><link rel="prefetch" href="/assets/19-åå°„.html-5d3aa3d1.js" as="script"><link rel="prefetch" href="/assets/01-é›†åˆæ¡†æ¶æ¦‚è§ˆ.html-967b8ba2.js" as="script"><link rel="prefetch" href="/assets/02-æºç -ArrayList.html-c4bdcdfa.js" as="script"><link rel="prefetch" href="/assets/03-æºç -HashMap.html-7cb17ed6.js" as="script"><link rel="prefetch" href="/assets/01-å¿«é€Ÿå…¥é—¨-HelloWorld.html-188f2970.js" as="script"><link rel="prefetch" href="/assets/02-æ ¸å¿ƒå¿…å­¦-SpringApplication.html-3e537c7c.js" as="script"><link rel="prefetch" href="/assets/03-æ ¸å¿ƒå¿…å­¦-å¤–éƒ¨é…ç½®.html-0391e2f5.js" as="script"><link rel="prefetch" href="/assets/04-æ ¸å¿ƒå¿…å­¦-Profiles.html-ba993730.js" as="script"><link rel="prefetch" href="/assets/06-æ ¸å¿ƒå¿…å­¦-æ—¥å¿—è®°å½•.html-f59135d3.js" as="script"><link rel="prefetch" href="/assets/07-æ ¸å¿ƒå¿…å­¦-å›½é™…åŒ–.html-72b42be4.js" as="script"><link rel="prefetch" href="/assets/08-æ ¸å¿ƒå¿…å­¦-JSON.html-2cacee00.js" as="script"><link rel="prefetch" href="/assets/09-æ ¸å¿ƒå¿…å­¦-å®šæ—¶ä»»åŠ¡.html-ac41985c.js" as="script"><link rel="prefetch" href="/assets/10-æ ¸å¿ƒå¿…å­¦-æµ‹è¯•.html-c739b85e.js" as="script"><link rel="prefetch" href="/assets/11-æ ¸å¿ƒå¿…å­¦-åˆ›å»ºè‡ªå·±çš„è‡ªåŠ¨é…ç½®.html-42301c8f.js" as="script"><link rel="prefetch" href="/assets/00-cloud-å¯¼è¯­.html-0a66cb1d.js" as="script"><link rel="prefetch" href="/assets/01-cloud-å¾®æœåŠ¡æ¶æ„çš„å†å²æ¼”è¿›.html-e0c75ef9.js" as="script"><link rel="prefetch" href="/assets/02-cloud-SpringCloudæ¦‚è¿°.html-f5594879.js" as="script"><link rel="prefetch" href="/assets/03-cloud-å®æˆ˜é¡¹ç›®è¯´æ˜.html-8e178440.js" as="script"><link rel="prefetch" href="/assets/04-cloud-å®æˆ˜é¡¹ç›®æ­å»º.html-e1c55e4a.js" as="script"><link rel="prefetch" href="/assets/01-æ ¸å¿ƒ-IOC.html-dfd8645a.js" as="script"><link rel="prefetch" href="/assets/01-Security-HelloSecurity.html-c3980c6f.js" as="script"><link rel="prefetch" href="/assets/02-Security-æ•´ä½“æ¶æ„.html-6af76034.js" as="script"><link rel="prefetch" href="/assets/03-Security-è®¤è¯.html-b304e25d.js" as="script"><link rel="prefetch" href="/assets/04-Security-æˆæƒ.html-bc2fa325.js" as="script"><link rel="prefetch" href="/assets/05-Security-OAuth2.html-ed4bd1c8.js" as="script"><link rel="prefetch" href="/assets/06-Security-Webæ”»å‡»é˜²æŠ¤.html-7168098e.js" as="script"><link rel="prefetch" href="/assets/07-Security-é›†æˆ.html-a1a946cb.js" as="script"><link rel="prefetch" href="/assets/08-Security-é…ç½®.html-2f4d2574.js" as="script"><link rel="prefetch" href="/assets/09-Security-æµ‹è¯•.html-893d2d46.js" as="script"><link rel="prefetch" href="/assets/01-KIEå…¥é—¨.html-fda1b20a.js" as="script"><link rel="prefetch" href="/assets/02-Droolsè§„åˆ™å¼•æ“.html-6f77280a.js" as="script"><link rel="prefetch" href="/assets/03-è§„åˆ™è¯­è¨€å‚è€ƒ.html-3d7248e9.js" as="script"><link rel="prefetch" href="/assets/04-Droolsé›†æˆSpringBoot.html-796352f3.js" as="script"><link rel="prefetch" href="/assets/05-WorkBench.html-c123deb2.js" as="script"><link rel="prefetch" href="/assets/è§„åˆ™è¯­è¨€-DRL.html-2af03ffb.js" as="script"><link rel="prefetch" href="/assets/è§„åˆ™è¯­è¨€-DSL.html-010569c2.js" as="script"><link rel="prefetch" href="/assets/01-å¿«é€Ÿå…¥é—¨.html-b760a94d.js" as="script"><link rel="prefetch" href="/assets/02-è¯»Excel.html-a07061a1.js" as="script"><link rel="prefetch" href="/assets/03-å†™Excel.html-584252a2.js" as="script"><link rel="prefetch" href="/assets/04-å¡«å……Excel.html-c56cea8f.js" as="script"><link rel="prefetch" href="/assets/01-å­¦ä¹ ç½‘ç«™æ¨è.html-574058d0.js" as="script"><link rel="prefetch" href="/assets/02-Gitå‘½ä»¤æ¸…å•.html-3d3336cf.js" as="script"><link rel="prefetch" href="/assets/03-GitHubæ–‡æ¡£.html-44317a1d.js" as="script"><link rel="prefetch" href="/assets/04-GitLabæ–‡æ¡£.html-2f2b01c7.js" as="script"><link rel="prefetch" href="/assets/05-Gitå¿«é€Ÿå…¥é—¨.html-cee5eaa6.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼ç®—æ³•-Snowflake_ID.html-0bc9a74e.js" as="script"><link rel="prefetch" href="/assets/æ’åº-å†’æ³¡æ’åºï¼ˆBubble_sortï¼‰.html-fae410d1.js" as="script"><link rel="prefetch" href="/assets/æ’åº-å¿«é€Ÿæ’åºï¼ˆQuick_Sortï¼‰.html-d02363db.js" as="script"><link rel="prefetch" href="/assets/æ’åº-æ’å…¥æ’åºï¼ˆInsertion_sortï¼‰.html-7efce1d6.js" as="script"><link rel="prefetch" href="/assets/æ’åº-é€‰æ‹©æ’åºï¼ˆSelection_sortï¼‰.html-50302f8c.js" as="script"><link rel="prefetch" href="/assets/01-Linuxæ¦‚è¿°.html-1a3ba019.js" as="script"><link rel="prefetch" href="/assets/02-Linuxå®‰è£…ä¸Šæ‰‹.html-7b637931.js" as="script"><link rel="prefetch" href="/assets/03-LinuxåŸºæœ¬å‘½ä»¤.html-d4fbf2b2.js" as="script"><link rel="prefetch" href="/assets/404.html-b10f6432.js" as="script"><link rel="prefetch" href="/assets/index.html-e75a1ed6.js" as="script"><link rel="prefetch" href="/assets/index.html-8719687e.js" as="script"><link rel="prefetch" href="/assets/index.html-0c94c342.js" as="script"><link rel="prefetch" href="/assets/index.html-4cb35189.js" as="script"><link rel="prefetch" href="/assets/index.html-5ed53dd2.js" as="script"><link rel="prefetch" href="/assets/index.html-35b6fb91.js" as="script"><link rel="prefetch" href="/assets/index.html-cfa04701.js" as="script"><link rel="prefetch" href="/assets/index.html-6db625f4.js" as="script"><link rel="prefetch" href="/assets/index.html-5e5e758f.js" as="script"><link rel="prefetch" href="/assets/index.html-adffcd88.js" as="script"><link rel="prefetch" href="/assets/index.html-0787a469.js" as="script"><link rel="prefetch" href="/assets/index.html-a13adb06.js" as="script"><link rel="prefetch" href="/assets/index.html-dfb454d7.js" as="script"><link rel="prefetch" href="/assets/index.html-21bbf71a.js" as="script"><link rel="prefetch" href="/assets/index.html-fce1788f.js" as="script"><link rel="prefetch" href="/assets/index.html-83bf3b28.js" as="script"><link rel="prefetch" href="/assets/index.html-83a45dfc.js" as="script"><link rel="prefetch" href="/assets/index.html-b84486d7.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-1464cdb9.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo light" src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-03-091254.gif" alt="JavGo"><img class="vp-nav-logo dark" src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-03-091254.gif" alt="JavGo"><span class="vp-site-name hide-in-pad">JavGo</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="ä¸»é¡µ" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="APIï½œæ–‡æ¡£" class="nav-link"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>APIï½œæ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="åœ¨çº¿å·¥å…·"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span>åœ¨çº¿å·¥å…·</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Bar</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Baz" class="vp-link nav-link nav-link" href="/guide/bar/baz.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span>Baz<!----></a></li><li class="dropdown-subitem"><a aria-label="..." class="vp-link nav-link nav-link" href="/guide/bar/"><span class="font-icon icon fa-fw fa-sm fas fa-ellipsis" style=""></span>...<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Foo</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Ray" class="vp-link nav-link nav-link" href="/guide/foo/ray.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span>Ray<!----></a></li><li class="dropdown-subitem"><a aria-label="..." class="vp-link nav-link nav-link" href="/guide/foo/"><span class="font-icon icon fa-fw fa-sm fas fa-ellipsis" style=""></span>...<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/javgocn/javgocn" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="ä¸»é¡µ" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>ä¸»é¡µ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">Java</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">æ ¸å¿ƒåŸºç¡€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">é›†åˆæ¡†æ¶</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Spring</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Spring Boot</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">Spring Cloud</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="00-cloud-å¯¼è¯­" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/Spring/SpringCloud/00-cloud-%E5%AF%BC%E8%AF%AD.html"><!---->00-cloud-å¯¼è¯­<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="01-cloud-å¾®æœåŠ¡æ¶æ„çš„å†å²æ¼”è¿›" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/Spring/SpringCloud/01-cloud-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8E%86%E5%8F%B2%E6%BC%94%E8%BF%9B.html"><!---->01-cloud-å¾®æœåŠ¡æ¶æ„çš„å†å²æ¼”è¿›<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="02-cloud-SpringCloudæ¦‚è¿°" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/Spring/SpringCloud/02-cloud-SpringCloud%E6%A6%82%E8%BF%B0.html"><!---->02-cloud-SpringCloudæ¦‚è¿°<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="03-cloud-å®æˆ˜é¡¹ç›®è¯´æ˜" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/Spring/SpringCloud/03-cloud-%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE%E8%AF%B4%E6%98%8E.html"><!---->03-cloud-å®æˆ˜é¡¹ç›®è¯´æ˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="04-cloud-å®æˆ˜é¡¹ç›®æ­å»º" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/Spring/SpringCloud/04-cloud-%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA.html"><!---->04-cloud-å®æˆ˜é¡¹ç›®æ­å»º<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="05-cloud-æœåŠ¡æ²»ç†" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html"><!---->05-cloud-æœåŠ¡æ²»ç†<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç°" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_1-å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç°"><!---->1.å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç°<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.1 æ¢ç´¢æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠ¨æ€æœºåˆ¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_1-1-æ¢ç´¢æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠ¨æ€æœºåˆ¶"><!---->1.1 æ¢ç´¢æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠ¨æ€æœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.2 Nacos ä½“ç³»æ¶æ„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_1-2-nacos-ä½“ç³»æ¶æ„"><!---->1.2 Nacos ä½“ç³»æ¶æ„<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.æ„å»º Nacos é›†ç¾¤ç¯å¢ƒ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_2-æ„å»º-nacos-é›†ç¾¤ç¯å¢ƒ"><!---->2.æ„å»º Nacos é›†ç¾¤ç¯å¢ƒ<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="2.1 è·å– Nacos Server" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_2-1-è·å–-nacos-server"><!---->2.1 è·å– Nacos Server<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.2 é…ç½® Nacos Server" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_2-2-é…ç½®-nacos-server"><!---->2.2 é…ç½® Nacos Server<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.3 åˆå§‹åŒ–æ•°æ®åº“" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_2-3-åˆå§‹åŒ–æ•°æ®åº“"><!---->2.3 åˆå§‹åŒ–æ•°æ®åº“<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.4 é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_2-4-é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯"><!---->2.4 é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.5 å¯åŠ¨ Nacos Server é›†ç¾¤" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_2-5-å¯åŠ¨-nacos-server-é›†ç¾¤"><!---->2.5 å¯åŠ¨ Nacos Server é›†ç¾¤<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.6 ç™»å½•å’ŒéªŒè¯ Nacos æ§åˆ¶å°" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_2-6-ç™»å½•å’ŒéªŒè¯-nacos-æ§åˆ¶å°"><!---->2.6 ç™»å½•å’ŒéªŒè¯ Nacos æ§åˆ¶å°<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.7 é˜¶æ®µå°ç»“" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_2-7-é˜¶æ®µå°ç»“"><!---->2.7 é˜¶æ®µå°ç»“<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.åœ¨ Nacos ä¸­å®ç°æœåŠ¡æ³¨å†Œ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_3-åœ¨-nacos-ä¸­å®ç°æœåŠ¡æ³¨å†Œ"><!---->3.åœ¨ Nacos ä¸­å®ç°æœåŠ¡æ³¨å†Œ<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="3.1 é›†æˆ Nacos ä¾èµ–ä»¥ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_3-1-é›†æˆ-nacos-ä¾èµ–ä»¥ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§"><!---->3.1 é›†æˆ Nacos ä¾èµ–ä»¥ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.2 Nacos è‡ªåŠ¨è£…é…åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_3-2-nacos-è‡ªåŠ¨è£…é…åŸç†"><!---->3.2 Nacos è‡ªåŠ¨è£…é…åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.3 æ·»åŠ  Nacos é…ç½®é¡¹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_3-3-æ·»åŠ -nacos-é…ç½®é¡¹"><!---->3.3 æ·»åŠ  Nacos é…ç½®é¡¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.4 éªŒè¯ Nacos æœåŠ¡æ³¨å†ŒåŠŸèƒ½" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_3-4-éªŒè¯-nacos-æœåŠ¡æ³¨å†ŒåŠŸèƒ½"><!---->3.4 éªŒè¯ Nacos æœåŠ¡æ³¨å†ŒåŠŸèƒ½<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.5 é˜¶æ®µå°ç»“" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_3-5-é˜¶æ®µå°ç»“"><!---->3.5 é˜¶æ®µå°ç»“<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.å®æ–½æœåŠ¡å‘ç°ä¸è¿œç¨‹è°ƒç”¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_4-å®æ–½æœåŠ¡å‘ç°ä¸è¿œç¨‹è°ƒç”¨"><!---->4.å®æ–½æœåŠ¡å‘ç°ä¸è¿œç¨‹è°ƒç”¨<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="4.1 é…ç½® Nacos ä¾èµ–é¡¹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_4-1-é…ç½®-nacos-ä¾èµ–é¡¹"><!---->4.1 é…ç½® Nacos ä¾èµ–é¡¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.2 é…ç½® WebClient å®ç°è¿œç¨‹è°ƒç”¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_4-2-é…ç½®-webclient-å®ç°è¿œç¨‹è°ƒç”¨"><!---->4.2 é…ç½® WebClient å®ç°è¿œç¨‹è°ƒç”¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.3 å®ç° WebClient çš„è¿œç¨‹æœåŠ¡è°ƒç”¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_4-3-å®ç°-webclient-çš„è¿œç¨‹æœåŠ¡è°ƒç”¨"><!---->4.3 å®ç° WebClient çš„è¿œç¨‹æœåŠ¡è°ƒç”¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.4 æ¢ç´¢ Nacos å®¢æˆ·ç«¯æœåŠ¡å‘ç°å®ç°åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_4-4-æ¢ç´¢-nacos-å®¢æˆ·ç«¯æœåŠ¡å‘ç°å®ç°åŸç†"><!---->4.4 æ¢ç´¢ Nacos å®¢æˆ·ç«¯æœåŠ¡å‘ç°å®ç°åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.æ€»ç»“" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/md/Spring/SpringCloud/05-cloud-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html#_5-æ€»ç»“"><!---->5.æ€»ç»“<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Spring Framework</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Spring Security</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">å‘½ä»¤æ‰‹å†Œ</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="Docker" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C/Docker.html"><!---->Docker<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Git" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C/Git.html"><!---->Git<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Homebrew" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C/Homebrew.html"><!---->Homebrew<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="JDK" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C/JDK.html"><!---->JDK<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Linux" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C/Linux.html"><!---->Linux<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="MacOS" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C/MacOS.html"><!---->MacOS<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Maven" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/md/%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C/Maven.html"><!---->Maven<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">å¸¸ç”¨æ¡†æ¶</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Drools</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Easy Excel</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">å¸¸ç”¨ç±»åº“</span><!----></p><ul class="vp-sidebar-links"></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">å¼€å‘å·¥å…·</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Git</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ•°æ®åº“</span><!----></p><ul class="vp-sidebar-links"></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ–¹æ³•è®º</span><!----></p><ul class="vp-sidebar-links"></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ ¸å¿ƒåŸºç¡€</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">å¸¸è§ç®—æ³•</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ¶ˆæ¯å¼•æ“</span><!----></p><ul class="vp-sidebar-links"></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">éƒ¨ç½²ç›¸å…³</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Linux</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">å…«è‚¡æ–‡</span><!----></p><ul class="vp-sidebar-links"></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->05-cloud-æœåŠ¡æ²»ç†</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://www.javgo.cn" target="_blank" rel="noopener noreferrer">Mr.JavGo</a></span><span property="author" content="Mr.JavGo"></span></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-11-10T16:14:41.000Z"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 53 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT53M"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_1-å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç°">1.å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç°</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-1-æ¢ç´¢æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠ¨æ€æœºåˆ¶">1.1 æ¢ç´¢æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠ¨æ€æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1-2-nacos-ä½“ç³»æ¶æ„">1.2 Nacos ä½“ç³»æ¶æ„</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_2-æ„å»º-nacos-é›†ç¾¤ç¯å¢ƒ">2.æ„å»º Nacos é›†ç¾¤ç¯å¢ƒ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-1-è·å–-nacos-server">2.1 è·å– Nacos Server</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-2-é…ç½®-nacos-server">2.2 é…ç½® Nacos Server</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-3-åˆå§‹åŒ–æ•°æ®åº“">2.3 åˆå§‹åŒ–æ•°æ®åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-4-é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯">2.4 é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-5-å¯åŠ¨-nacos-server-é›†ç¾¤">2.5 å¯åŠ¨ Nacos Server é›†ç¾¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-6-ç™»å½•å’ŒéªŒè¯-nacos-æ§åˆ¶å°">2.6 ç™»å½•å’ŒéªŒè¯ Nacos æ§åˆ¶å°</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2-7-é˜¶æ®µå°ç»“">2.7 é˜¶æ®µå°ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_3-åœ¨-nacos-ä¸­å®ç°æœåŠ¡æ³¨å†Œ">3.åœ¨ Nacos ä¸­å®ç°æœåŠ¡æ³¨å†Œ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-1-é›†æˆ-nacos-ä¾èµ–ä»¥ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§">3.1 é›†æˆ Nacos ä¾èµ–ä»¥ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-2-nacos-è‡ªåŠ¨è£…é…åŸç†">3.2 Nacos è‡ªåŠ¨è£…é…åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-3-æ·»åŠ -nacos-é…ç½®é¡¹">3.3 æ·»åŠ  Nacos é…ç½®é¡¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-4-éªŒè¯-nacos-æœåŠ¡æ³¨å†ŒåŠŸèƒ½">3.4 éªŒè¯ Nacos æœåŠ¡æ³¨å†ŒåŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-5-é˜¶æ®µå°ç»“">3.5 é˜¶æ®µå°ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_4-å®æ–½æœåŠ¡å‘ç°ä¸è¿œç¨‹è°ƒç”¨">4.å®æ–½æœåŠ¡å‘ç°ä¸è¿œç¨‹è°ƒç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-1-é…ç½®-nacos-ä¾èµ–é¡¹">4.1 é…ç½® Nacos ä¾èµ–é¡¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-2-é…ç½®-webclient-å®ç°è¿œç¨‹è°ƒç”¨">4.2 é…ç½® WebClient å®ç°è¿œç¨‹è°ƒç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-3-å®ç°-webclient-çš„è¿œç¨‹æœåŠ¡è°ƒç”¨">4.3 å®ç° WebClient çš„è¿œç¨‹æœåŠ¡è°ƒç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-4-æ¢ç´¢-nacos-å®¢æˆ·ç«¯æœåŠ¡å‘ç°å®ç°åŸç†">4.4 æ¢ç´¢ Nacos å®¢æˆ·ç«¯æœåŠ¡å‘ç°å®ç°åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#_5-æ€»ç»“">5.æ€»ç»“</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="_1-å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç°" tabindex="-1"><a class="header-anchor" href="#_1-å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç°" aria-hidden="true">#</a> 1.å¾®æœåŠ¡æ²»ç†ä¸åŠ¨æ€æœåŠ¡å‘ç°</h2><p>å¾®æœåŠ¡æ¶æ„é€æ¸æˆä¸ºç°ä»£è½¯ä»¶å¼€å‘çš„æ ‡å‡†æ¨¡å¼ï¼Œå…¶ä¸­æœåŠ¡æ²»ç†æ˜¯ç¡®ä¿å…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§çš„å…³é”®ã€‚æœ¬èŠ‚çš„é‡ç‚¹æ˜¯æ·±å…¥æ¢ç©¶æœåŠ¡æ²»ç†ï¼ŒåŒæ—¶å…·ä½“åˆ†æ Nacos ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æ¶æ„è®¾è®¡ã€‚</p><p>æœåŠ¡æ²»ç†ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›äº†è‡ªåŠ¨åŒ–ç®¡ç†ï¼Œæ˜¯å¾®æœåŠ¡ä¹‹é—´åè°ƒå·¥ä½œçš„é»˜é»˜ä¿éšœè€…ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœç¼ºä¹æœ‰æ•ˆçš„æœåŠ¡æ²»ç†ï¼Œå½“é¢ä¸´æœåŠ¡å®ä¾‹çš„åŠ¨æ€å˜åŒ–æ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§å°†ä¸¥é‡å—é™ã€‚ä»¥ä¸‹åœºæ™¯å°†å¸®åŠ©æˆ‘ä»¬æ›´æ¸…æ™°åœ°ç†è§£æœåŠ¡æ²»ç†çš„ä»·å€¼ï¼š</p><p>è®¾æƒ³ä½ è´Ÿè´£çš„ç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªå…³é”®çš„å¾®æœåŠ¡ï¼šæœåŠ¡ A å’ŒæœåŠ¡ Bï¼Œæ¯ä¸ªå¾®æœåŠ¡åˆ†å¸ƒåœ¨ 10 ä¸ªè™šæ‹ŸèŠ‚ç‚¹ä¸Šã€‚æœåŠ¡ A éœ€è¦é¢‘ç¹è°ƒç”¨æœåŠ¡ B æ¥å®Œæˆä¸šåŠ¡é€»è¾‘ã€‚åœ¨æ²¡æœ‰æœåŠ¡æ²»ç†çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æœåŠ¡é—´è°ƒç”¨ä¼šå˜å¾—å¤æ‚å’Œé™æ€ï¼Œå› ä¸ºæœåŠ¡ A éœ€è¦çŸ¥é“å¦‚ä½•æ‰¾åˆ°æœåŠ¡ Bï¼Œå¹¶ä¸”éšç€æœåŠ¡ B å®ä¾‹çš„å¢å‡ï¼ŒæœåŠ¡ A çš„é…ç½®éœ€è¦ä¸æ–­æ›´æ–°ã€‚</p><p>Nacos åº”è¿è€Œç”Ÿï¼Œå®ƒé€šè¿‡ä¸­å¤®æœåŠ¡æ³¨å†Œä¸­å¿ƒæ¥ç®€åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚æœåŠ¡ A å’ŒæœåŠ¡ B éƒ½ä¼šåœ¨ Nacos æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ï¼Œå…¬å¸ƒå„è‡ªçš„å¯ç”¨å®ä¾‹ã€‚æœåŠ¡ A ç°åœ¨å¯ä»¥ç›´æ¥æŸ¥è¯¢ Nacosï¼ŒåŠ¨æ€åœ°å‘ç°æœåŠ¡ B çš„å®ä¾‹ï¼Œå¹¶è¿›è¡Œé€šä¿¡ï¼Œè€Œæ— éœ€ç¡¬ç¼–ç å®ä¾‹åœ°å€ã€‚</p><p>ä¸‹é¢æ˜¯ Nacos æ³¨å†Œä¸­å¿ƒçš„æ¶æ„ç¤ºæ„å›¾ï¼Œå®ƒå±•ç¤ºäº†æœåŠ¡å®ä¾‹æ³¨å†Œå’ŒæœåŠ¡å‘ç°çš„æµç¨‹ï¼š</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-055724.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨è¿™ä¸ªä½“ç³»ç»“æ„ä¸­ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°ä»¥ä¸‹å…³é”®ä¼˜åŠ¿ï¼š</p><ol><li><strong>å»ä¸­å¿ƒåŒ–çš„æœåŠ¡å‘ç°</strong>ï¼šé€šè¿‡ Nacosï¼ŒæœåŠ¡ä¹‹é—´çš„å‘ç°å˜å¾—åŠ¨æ€å’Œå»ä¸­å¿ƒåŒ–ï¼Œé¿å…äº†å¯¹å•ç‚¹æ•…éšœçš„ä¾èµ–ã€‚</li><li><strong>åŠ¨æ€è´Ÿè½½å‡è¡¡</strong>ï¼šæœåŠ¡æ¶ˆè´¹è€…ï¼ˆä¾‹å¦‚æœåŠ¡ Aï¼‰å¯ä»¥å®ç°å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œé€šè¿‡ä» Nacos è·å–çš„æœåŠ¡ B çš„å®ä¾‹åˆ—è¡¨ï¼Œé€‰æ‹©æœ€é€‚åˆçš„å®ä¾‹è¿›è¡Œè°ƒç”¨ã€‚</li><li><strong>å®æ—¶çŠ¶æ€ç®¡ç†</strong>ï¼šNacos å¯¹æœåŠ¡å®ä¾‹çš„å¥åº·æ£€æŸ¥å¯ä»¥å®ç°å®æ—¶çŠ¶æ€åŒæ­¥ï¼Œç¡®ä¿æœåŠ¡è°ƒç”¨çš„ç¨³å®šæ€§ã€‚</li></ol><p>æ€»è€Œè¨€ä¹‹ï¼ŒNacos æä¾›çš„æœåŠ¡æ²»ç†æœºåˆ¶æœ‰æ•ˆåœ°æ”¯æ’‘äº†å¾®æœåŠ¡æ¶æ„çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œä¸ºå¾®æœåŠ¡é—´çš„äº¤äº’æä¾›äº†æµç•…å’Œè‡ªåŠ¨åŒ–çš„æ”¯æŒã€‚åé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬å°†å…·ä½“æ¢è®¨ Nacos åœ¨æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°ä¸­çš„å…·ä½“å®ç°æœºåˆ¶ã€‚</p><h3 id="_1-1-æ¢ç´¢æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠ¨æ€æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_1-1-æ¢ç´¢æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠ¨æ€æœºåˆ¶" aria-hidden="true">#</a> 1.1 æ¢ç´¢æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠ¨æ€æœºåˆ¶</h3><p>åœ¨å¾®æœåŠ¡çš„ä¸–ç•Œé‡Œï¼ŒæœåŠ¡æ²»ç†æ¡†æ¶æä¾›äº†ä¸¤ä¸ªè‡³å…³é‡è¦çš„åŠŸèƒ½â€”â€”<strong>æœåŠ¡æ³¨å†Œ</strong>å’Œ<strong>æœåŠ¡å‘ç°</strong>ã€‚è¿™ä¸¤é¡¹åŠŸèƒ½å…±åŒæ„æˆäº†å¾®æœåŠ¡é—´é«˜æ•ˆé€šä¿¡çš„åŸºç¡€è®¾æ–½ã€‚è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°æ¢è®¨è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œå¹¶ç†è§£å®ƒä»¬æ˜¯å¦‚ä½•åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å‘æŒ¥ä½œç”¨çš„ã€‚</p><ol><li><p><strong>æœåŠ¡æ³¨å†Œï¼š</strong></p><p>æœåŠ¡æ³¨å†Œæ˜¯æœåŠ¡æ²»ç†çš„é¦–è¦æ­¥éª¤ï¼Œå¯ä»¥è¢«è§†ä¸ºå¾®æœåŠ¡ä¸–ç•Œä¸­çš„ â€œåœ°å›¾ç»˜åˆ¶â€ã€‚æ¯ä¸ªå¾®æœåŠ¡å®ä¾‹éƒ½å°†è‡ªå·±çš„åœ°å€ä¿¡æ¯å’ŒæœåŠ¡æ ‡è¯†æ³¨å†Œåˆ°ä¸­å¿ƒåŒ–çš„æœåŠ¡ç›®å½•ä¸­ï¼Œå°±åƒåœ¨åœ°å›¾ä¸Šæ ‡è®°è‡ªå·±çš„ä½ç½®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸ä»…æ¶‰åŠåˆ°æœåŠ¡çš„ç½‘ç»œä½ç½®ï¼ˆIPå’Œç«¯å£ï¼‰ï¼Œè¿˜åŒ…æ‹¬æœåŠ¡çš„é€»è¾‘æ ‡è¯†å’Œå¥åº·çŠ¶æ€ï¼Œè¿™ä¸ºæœåŠ¡å‘ç°å¥ å®šäº†åŸºç¡€ã€‚</p></li><li><p><strong>æœåŠ¡å‘ç°ï¼š</strong></p><p>æœåŠ¡å‘ç°åˆ™æ˜¯ â€œå¯¼èˆªä»ªâ€ï¼Œå®ƒå…è®¸ä¸€ä¸ªæœåŠ¡å®ä¾‹æ‰¾åˆ°å¹¶ä¸å…¶ä»–æœåŠ¡å®ä¾‹è¿›è¡Œé€šä¿¡ã€‚å½“æœåŠ¡ A éœ€è¦ä¸æœåŠ¡ B é€šä¿¡æ—¶ï¼Œå®ƒä¼šæŸ¥è¯¢æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œè·å¾—æœåŠ¡ B çš„å®ä¾‹åˆ—è¡¨ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒæœåŠ¡ A å¯ä»¥äº†è§£æœåŠ¡ B çš„æ‰€æœ‰æ´»è·ƒèŠ‚ç‚¹ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„èŠ‚ç‚¹å‘èµ·é€šä¿¡ã€‚</p></li></ol><p>ä¸ºäº†æ¸…æ™°å±•ç°æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°çš„è¿‡ç¨‹ï¼Œè¯·å‚è€ƒä»¥ä¸‹å›¾è§£ï¼š</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-060620.png" style="zoom:50%;"><p>è¯¥å›¾å±•ç¤ºäº†ä»¥ä¸‹å…³é”®æ­¥éª¤ï¼š</p><ol><li><strong>æœåŠ¡æ³¨å†Œ</strong>ï¼šæœåŠ¡ B çš„æ¯ä¸ªå®ä¾‹åœ¨å¯åŠ¨æ—¶å°†å…¶è¯¦ç»†ä¿¡æ¯æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚</li><li><strong>æœåŠ¡åŒæ­¥</strong>ï¼šæœåŠ¡ A å®šæœŸä»æ³¨å†Œä¸­å¿ƒæ‹‰å–æœåŠ¡ B çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œæˆ–è€…æ³¨å†Œä¸­å¿ƒåœ¨æœåŠ¡ B èŠ‚ç‚¹æ›´æ–°æ—¶æ¨é€æœ€æ–°ä¿¡æ¯ç»™æœåŠ¡ Aã€‚</li><li><strong>æœåŠ¡é€‰æ‹©</strong>ï¼šæœåŠ¡ A æ ¹æ®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œä»è·å–åˆ°çš„æœåŠ¡ B å®ä¾‹åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªè¿›è¡Œè°ƒç”¨ã€‚</li></ol><p>æ³¨å†Œä¸­å¿ƒçš„æ ¸å¿ƒè§’è‰²æ˜¯ä¿¡æ¯çš„ä¸­ç»§ç«™ã€‚æ¯ä¸ªæœåŠ¡å®ä¾‹éƒ½ä»¥å…¶è‡ªèº«çš„é€»è¾‘åç§°å’Œç½‘ç»œåœ°å€æ³¨å†Œï¼Œè¿™äº›ä¿¡æ¯å¯¹äºå®ç°æœåŠ¡é—´çš„ç²¾ç¡®æŸ¥æ‰¾å’Œè´Ÿè½½å‡è¡¡è‡³å…³é‡è¦ã€‚åœ¨æœåŠ¡æ³¨å†Œè¿‡ç¨‹ä¸­ï¼Œé™¤äº†åŸºç¡€çš„æœåŠ¡åç§°å’Œåœ°å€ä¿¡æ¯å¤–ï¼Œé€šå¸¸è¿˜ä¼šåŒ…æ‹¬ä»¥ä¸‹ç»´åº¦çš„æ•°æ®ï¼š</p><ul><li><strong>æœåŠ¡æ ‡è¯†</strong>ï¼šä¸€èˆ¬ç”±åº”ç”¨é…ç½®ä¸­çš„ <code>spring.application.name</code> å±æ€§æä¾›ï¼Œç”¨äºåœ¨æœåŠ¡æŸ¥æ‰¾æ—¶æä¾›åŒ¹é…ã€‚</li><li><strong>ç½‘ç»œä½ç½®</strong>ï¼šæ˜ç¡®æœåŠ¡å®ä¾‹çš„ç½‘ç»œè®¿é—®ç‚¹ï¼ŒåŒ…æ‹¬å…¶IPåœ°å€å’Œç«¯å£å·ã€‚</li><li><strong>æœåŠ¡çŠ¶æ€</strong>ï¼šåŒ…æ‹¬æœåŠ¡å®ä¾‹çš„å¥åº·æ£€æŸ¥ç»“æœï¼Œä»¥ç¡®ä¿è°ƒç”¨çš„å®ä¾‹æ˜¯å¥åº·ä¸”èƒ½å¤Ÿå¤„ç†è¯·æ±‚çš„ã€‚</li><li><strong>å…ƒæ•°æ®ä¿¡æ¯</strong>ï¼šé¢å¤–çš„æœåŠ¡æè¿°ä¿¡æ¯ï¼Œå¯ä»¥ç”¨äºæ›´å¤æ‚çš„è·¯ç”±é€»è¾‘æˆ–æœåŠ¡é€‰æ‹©ã€‚</li></ul><blockquote><p>æ¥ä¸‹æ¥çš„å†…å®¹ï¼Œæˆ‘ä»¬å°†å…·ä½“æ¼”ç¤ºå¦‚ä½•åœ¨ Nacos ä¸­å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œå¹¶åˆ†æå…¶ä¸­çš„å·¥ä½œåŸç†ä¸æœ€ä½³å®è·µï¼Œè¿™é‡Œå…ˆæš‚æ—¶ä¸æ·±å…¥ã€‚</p></blockquote><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œ<strong>å¼‚å¸¸å®¹é”™</strong>æœºåˆ¶æ‰®æ¼”ç€å®ˆæŠ¤è€…çš„è§’è‰²ï¼Œç¡®ä¿å½“ä¸ªåˆ«æœåŠ¡å®ä¾‹å‡ºç°é—®é¢˜æ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿä»èƒ½ä¿æŒç¨³å®šå’Œå¯ç”¨ã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢è®¨è¿™ä¸€æ¦‚å¿µåŠå…¶åœ¨ä¿éšœæœåŠ¡ç¨³å®šæ€§ä¸­çš„é‡è¦æ€§ã€‚</p><p>è€ƒè™‘æœåŠ¡ A è°ƒç”¨æœåŠ¡ B çš„åœºæ™¯ã€‚å¦‚æœæœåŠ¡ B ç”±äºæŸäº›é—®é¢˜æ— æ³•å“åº”ï¼ŒæœåŠ¡ A è‹¥æ— å¦¥å–„é˜²å¾¡æœºåˆ¶ï¼Œåˆ™å¯èƒ½é™·å…¥é•¿æ—¶é—´çš„ç­‰å¾…çŠ¶æ€ï¼Œå½±å“å…¶æ€§èƒ½ï¼Œç”šè‡³å¯¼è‡´çº§è”æ•…éšœã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ç§æœºåˆ¶ï¼Œå³ä½¿åœ¨éƒ¨åˆ†æœåŠ¡å®ä¾‹ä¸å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½ä¿è¯ç³»ç»Ÿæ•´ä½“çš„æµç•…è¿è¡Œã€‚</p><ol><li><p><strong>å¿ƒè·³æ£€æµ‹ï¼š</strong></p><p>å¿ƒè·³æ£€æµ‹æ˜¯å¼‚å¸¸å®¹é”™ä¸­çš„å…³é”®ç­–ç•¥ã€‚é€šè¿‡æ­¤æœºåˆ¶ï¼ŒæœåŠ¡å®ä¾‹å®šæœŸå‘æ³¨å†Œä¸­å¿ƒæŠ¥å‘ŠçŠ¶æ€ï¼Œç¡®è®¤å…¶æ´»è·ƒæ€§ã€‚æ³¨å†Œä¸­å¿ƒé€šè¿‡è·Ÿè¸ªå¿ƒè·³ï¼Œç»´æŠ¤ä¸€ä¸ªå¥åº·ä¸”å¯ç”¨çš„æœåŠ¡å®ä¾‹åˆ—è¡¨ã€‚</p></li><li><p><strong>æœåŠ¡å‰”é™¤ï¼š</strong></p><ul><li><strong>è¢«åŠ¨å‰”é™¤</strong>ï¼šå¦‚æœåœ¨é¢„è®¾çš„æ—¶é—´çª—å£å†…æœªæ”¶åˆ°æŸæœåŠ¡å®ä¾‹çš„å¿ƒè·³ï¼Œæ³¨å†Œä¸­å¿ƒå°†å…¶è§†ä¸ºä¸å¯ç”¨ï¼Œå¹¶ä»å¯ç”¨æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤ã€‚</li><li><strong>ä¸»åŠ¨å‰”é™¤</strong>ï¼šæœåŠ¡å®ä¾‹åœ¨ç»´æŠ¤ã€å‡çº§æˆ–å³å°†ä¸‹çº¿ç­‰æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸»åŠ¨å‘æ³¨å†Œä¸­å¿ƒå‘é€ä¸‹çº¿é€šçŸ¥ï¼Œè¯·æ±‚ä»æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤è‡ªå·€ã€‚</li></ul></li></ol><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-061900.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é™¤äº†å¿ƒè·³æ£€æµ‹å’ŒæœåŠ¡å‰”é™¤ï¼Œç°ä»£å¾®æœåŠ¡æ¶æ„ä¸­è¿˜é‡‡ç”¨äº†å…¶ä»–å¤šç§å®¹é”™æ‰‹æ®µï¼Œå¦‚è¶…æ—¶è®¾ç½®ã€é‡è¯•ç­–ç•¥ã€æ–­è·¯å™¨æ¨¡å¼ç­‰ï¼Œè¿›ä¸€æ­¥æå‡ç³»ç»Ÿçš„é²æ£’æ€§ã€‚</p><p>ä½œä¸º Spring Cloud ç”Ÿæ€ä¸­çš„ä¸€ä¸ªé‡è¦ç»„ä»¶ï¼ŒNacos æä¾›äº†<strong>æœåŠ¡å‘ç°</strong>ã€<strong>é…ç½®ç®¡ç†</strong>ã€<strong>æœåŠ¡ç›‘æ§</strong>ç­‰åŠŸèƒ½ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå®ƒä¸ä»…æ‰¿æ‹…äº†æœåŠ¡æ³¨å†Œä¸å‘ç°çš„ä»»åŠ¡ï¼Œè¿˜èƒ½é€šè¿‡å¥åº·æ£€æŸ¥ç­‰æœºåˆ¶å®ç°å¼‚å¸¸å®¹é”™ï¼Œä¸ºå¾®æœåŠ¡æ¶æ„æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚</p><h3 id="_1-2-nacos-ä½“ç³»æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_1-2-nacos-ä½“ç³»æ¶æ„" aria-hidden="true">#</a> 1.2 Nacos ä½“ç³»æ¶æ„</h3><p>åœ¨å¾®æœåŠ¡ä½“ç³»ä¸­ï¼ŒNacos æ‰®æ¼”ç€æœåŠ¡æ³¨å†Œä¸å‘ç°çš„å…³é”®è§’è‰²ã€‚ä¸ºäº†æ·±å…¥ç†è§£ Nacosï¼Œæˆ‘ä»¬å¿…é¡»ä»å…¶ä¸‰ä¸ªåŸºç¡€æ„ä»¶å…¥æ‰‹ï¼š<strong>é¢†åŸŸæ¨¡å‹</strong>ã€<strong>æ•°æ®æ¨¡å‹</strong>ä»¥åŠå…¶<strong>åŸºæœ¬æ¶æ„</strong>ã€‚è¿™äº›æ„ä»¶æ˜¯æŠŠæ¡ Nacos è¿è¡Œæœºåˆ¶çš„æ ¹åŸºã€‚</p><h4 id="_1-2-1-é¢†åŸŸæ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_1-2-1-é¢†åŸŸæ¨¡å‹" aria-hidden="true">#</a> 1.2.1 é¢†åŸŸæ¨¡å‹</h4><p>Nacos çš„é¢†åŸŸæ¨¡å‹æ¸…æ™°åœ°å®šä¹‰äº†æœåŠ¡åŠå…¶å®ä¾‹é—´çš„å…³ç³»å’Œç•Œé™ã€‚åœ¨ Nacos çš„è¯­å¢ƒä¸‹ï¼Œâ€œæœåŠ¡â€ ä»£è¡¨çš„æ˜¯é€»è¾‘ä¸Šçš„å¾®æœåŠ¡æ ‡è¯†ï¼Œå¹¶éç‰©ç†ä¸Šçš„æœåŠ¡å™¨æˆ–ç¡¬ä»¶è®¾å¤‡ã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-062432.png" style="zoom:50%;"><p>æˆ‘ä»¬å¯ä»¥å°† Nacos çš„æœåŠ¡é¢†åŸŸæ¨¡å‹åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªå±‚æ¬¡ï¼š</p><ol><li><p><strong>æœåŠ¡å±‚</strong></p><p>åœ¨è¿™ä¸ªå±‚çº§ï¼Œæˆ‘ä»¬é…ç½®æœåŠ¡ç›¸å…³çš„<strong>å…ƒæ•°æ®</strong>ï¼ˆæ¯”å¦‚æœåŠ¡ç‰ˆæœ¬ã€ç¯å¢ƒæ ‡ç­¾ç­‰ï¼‰ä»¥åŠ<strong>æœåŠ¡ä¿æŠ¤é˜ˆå€¼</strong>ã€‚æœåŠ¡ä¿æŠ¤é˜ˆå€¼æ˜¯ä¸€ä¸ªå…³é”®æŒ‡æ ‡ï¼Œå®ƒæ˜¯ä»‹äº 0 åˆ° 1 ä¹‹é—´çš„å€¼ï¼Œç”¨ä»¥åˆ¤æ–­æœåŠ¡å®ä¾‹å¥åº·æ¯”ä¾‹ã€‚å½“å¥åº·å®ä¾‹çš„æ¯”ä¾‹ä¸‹é™è‡³é˜ˆå€¼ä»¥ä¸‹æ—¶ï¼ŒNacos å¯åŠ¨æœåŠ¡ä¿æŠ¤æ¨¡å¼ï¼Œé¿å…è¿›ä¸€æ­¥å‰”é™¤å®ä¾‹ï¼Œå¹¶ä¸”å¯èƒ½å°†ä¸å¥åº·çš„å®ä¾‹ä¹ŸåŒ…å«åœ¨æœåŠ¡æ¶ˆè´¹è€…çš„è¿”å›ç»“æœä¸­ï¼Œä»è€Œä¿æŒåŸºæœ¬çš„æœåŠ¡å¯ç”¨æ€§ã€‚</p></li><li><p><strong>é›†ç¾¤å±‚</strong></p><p>é›†ç¾¤æ˜¯ç”±å¤šä¸ªæœåŠ¡å®ä¾‹æ„æˆçš„ã€‚åœ¨æ¯ä¸ªæœåŠ¡å®ä¾‹å¯åŠ¨æ—¶ï¼Œå¯ä»¥æŒ‡å®šå…¶æ‰€å±çš„é›†ç¾¤ï¼Œå¹¶åœ¨è¿™ä¸ªå±‚çº§è®¾ç½®<strong>å…ƒæ•°æ®</strong>å’Œ<strong>å¥åº·æ£€æŸ¥æ¨¡å¼</strong>ã€‚<strong>æŒä¹…åŒ–èŠ‚ç‚¹</strong>æ˜¯é‚£äº›å³ä½¿å®¢æˆ·ç«¯è¿›ç¨‹åœæ­¢ï¼Œä¹Ÿä¼šåœ¨ Nacos æœåŠ¡å™¨ä¸Šä¿ç•™çš„å®ä¾‹ã€‚Nacos å¯¹æŒä¹…åŒ–èŠ‚ç‚¹æ‰§è¡Œ â€œä¸»åŠ¨æ¢æ´»â€ ä»¥ç›‘æµ‹å…¶å¥åº·çŠ¶å†µã€‚ç›¸å¯¹äºæŒä¹…åŒ–èŠ‚ç‚¹ï¼Œ<strong>ä¸´æ—¶èŠ‚ç‚¹</strong>åˆ™æ˜¯é»˜è®¤çš„æœåŠ¡æ³¨å†Œç±»å‹ï¼Œå®ƒä»¬ä¸ä¼šé•¿æœŸå­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œè€Œæ˜¯é€šè¿‡å‘¨æœŸæ€§çš„å¿ƒè·³è¯·æ±‚æ¥ç»´æŒå…¶åœ¨æœåŠ¡åˆ—è¡¨ä¸­çš„å­˜åœ¨ã€‚</p></li><li><p><strong>å®ä¾‹å±‚</strong></p><p>å®ä¾‹æŒ‡çš„å°±æ˜¯å•ä¸ªçš„æœåŠ¡èŠ‚ç‚¹ï¼Œå®ƒä»¬æ˜¯æœåŠ¡å¯ç”¨æ€§çš„æœ€å°å•ä½ã€‚åœ¨ Nacos æ§åˆ¶å°ï¼Œä½ å¯ä»¥æŸ¥çœ‹æ¯ä¸ªå®ä¾‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ IPã€ç«¯å£ã€çŠ¶æ€ï¼Œå¹¶å¯ä»¥è¿›è¡Œå¦‚å…ƒæ•°æ®ç¼–è¾‘ã€ä¸Šä¸‹çº¿çŠ¶æ€æ›´æ”¹ã€è·¯ç”±æƒé‡é…ç½®ç­‰æ“ä½œã€‚</p></li></ol><p>åœ¨è¿™ä¸‰ä¸ªå±‚æ¬¡ä¸­ï¼Œâ€œ<strong>å…ƒæ•°æ®</strong>â€ æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼Œå®ƒæ˜¯åŒ…å«æœåŠ¡æè¿°ä¿¡æ¯çš„æ•°æ®é›†åˆï¼Œå¯ä»¥åŒ…æ‹¬æœåŠ¡ç‰ˆæœ¬ä¿¡æ¯ã€è‡ªå®šä¹‰æ ‡ç­¾ç­‰ã€‚é€šè¿‡æœåŠ¡å‘ç°æœºåˆ¶ï¼Œå®¢æˆ·ç«¯èƒ½å¤Ÿè·å–åˆ°æ¯ä¸ªæœåŠ¡å®ä¾‹çš„å…ƒæ•°æ®ï¼Œå®ç°ç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>äº†è§£é¢†åŸŸæ¨¡å‹ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†æ¢è®¨æœåŠ¡è°ƒç”¨è€…æ˜¯å¦‚ä½•åœ¨è¿™ä¸ªæ¨¡å‹ä¸­å®šä½å¹¶è°ƒç”¨å…·ä½“çš„æœåŠ¡å®ä¾‹çš„ã€‚è¿™ä¸€è¿‡ç¨‹æ˜¯é€šè¿‡ Nacos çš„æ•°æ®æ¨¡å‹å®ç°çš„ï¼Œæ•°æ®æ¨¡å‹é€šè¿‡ç²¾ç¡®åœ°æè¿°æœåŠ¡å’Œå®ä¾‹ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œä½¿å¾—æœåŠ¡æ¶ˆè´¹è€…èƒ½å¤Ÿå‡†ç¡®åœ°æ‰¾åˆ°å¹¶è¯·æ±‚åˆ°æ‰€éœ€çš„æœåŠ¡å®ä¾‹ã€‚</p><h4 id="_1-2-2-æ•°æ®æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_1-2-2-æ•°æ®æ¨¡å‹" aria-hidden="true">#</a> 1.2.2 æ•°æ®æ¨¡å‹</h4><p>Nacos é€šè¿‡ä¸€ä¸ªä¸‰çº§å±‚æ¬¡çš„æ•°æ®æ¨¡å‹è¿›è¡ŒæœåŠ¡ç®¡ç†ï¼Œè¿™äº›å±‚æ¬¡åˆ†åˆ«æ˜¯ Namespaceã€Group å’Œ Service/DataIdã€‚è¿™ä¸€æ¨¡å‹è®¾è®¡èƒ½å¤Ÿçµæ´»åœ°æ”¯æŒä¸åŒçš„ä½¿ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚</p><p>ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤ºè¿™ä¸€ç»“æ„ï¼Œå‚è€ƒä»¥ä¸‹å±‚æ¬¡å…³ç³»å›¾ï¼š</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-063009.png" style="zoom:50%;"><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸‰ä¸ªå±‚æ¬¡æ˜¯åµŒå¥—å…³ç³»ï¼Œå½¢æˆäº†ä»å®è§‚åˆ°å¾®è§‚çš„æ•°æ®åˆ†çº§ã€‚ç°åœ¨æˆ‘ä»¬å°†é€å±‚æ·±å…¥ç†è§£æ¯ä¸ªå±‚æ¬¡çš„ä½œç”¨å’Œç‰¹ç‚¹ï¼š</p><ol><li><p><strong>Namespaceï¼ˆå‘½åç©ºé—´ï¼‰</strong></p><p>ä½äºå±‚æ¬¡ç»“æ„çš„æœ€é¡¶å±‚ï¼Œå‘½åç©ºé—´ä¸»è¦ç”¨äºåŒºåˆ†ä¸åŒçš„ç¯å¢ƒæˆ–é¡¹ç›®ç»„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒéš”ç¦»å¼€æ¥ï¼Œä»¥é¿å…ç›¸äº’å¹²æ‰°ã€‚é»˜è®¤çš„å‘½åç©ºé—´æ˜¯ â€œpublicâ€ï¼Œæ„å‘³ç€å¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šï¼Œæ‰€æœ‰æœåŠ¡éƒ½ä¼šè¢«è‡ªåŠ¨å½’å…¥è¿™ä¸ªå…¬å…±å‘½åç©ºé—´ä¸­ã€‚</p></li><li><p><strong>Groupï¼ˆåˆ†ç»„ï¼‰</strong></p><p>åœ¨å‘½åç©ºé—´çš„åŸºç¡€ä¸Šï¼ŒGroup ä¸ºæˆ‘ä»¬æä¾›äº†è¿›ä¸€æ­¥çš„å¾®è§‚ç®¡ç†èƒ½åŠ›ï¼Œå…è®¸æˆ‘ä»¬æŒ‰æœåŠ¡ç±»å‹æˆ–ä¸šåŠ¡é€»è¾‘è¿›ä¸€æ­¥ç»†åˆ†æœåŠ¡é›†åˆã€‚é»˜è®¤çš„åˆ†ç»„åä¸º â€œDEFAULT_GROUPâ€ï¼Œå®ƒä¸ºæ²¡æœ‰ç‰¹å®šåˆ†ç»„æŒ‡å®šçš„æœåŠ¡æä¾›äº†å½’å®¿ã€‚ä¸åŒçš„åˆ†ç»„ä¹‹é—´çš„æœåŠ¡å®ä¾‹æ˜¯éš”ç¦»çš„ï¼Œç¡®ä¿æœåŠ¡ä¹‹é—´çš„é€»è¾‘æ¸…æ™°ã€‚</p></li><li><p><strong>Service/DataIDï¼ˆæœåŠ¡/æ•°æ®æ ‡è¯†ï¼‰</strong></p><p>è¿™æ˜¯æœ€å…·ä½“çš„å±‚çº§ï¼Œç›´æ¥å¯¹åº”åˆ°å„ä¸ªå¾®æœåŠ¡å®ä½“ï¼Œä¾‹å¦‚è®¢å•æœåŠ¡ã€å•†å“æœåŠ¡ç­‰ã€‚Service/DataID æ˜¯å¾®æœåŠ¡å¯»å€å’Œå‘ç°çš„å…³é”®ï¼Œå®ƒç¡®ä¿äº†æˆ‘ä»¬èƒ½ç²¾ç¡®æ‰¾åˆ°å¹¶è°ƒç”¨æ‰€éœ€çš„æœåŠ¡å®ä½“ã€‚</p></li></ol><p>é€šè¿‡ç»“åˆ <strong>Namespace + Group + Service/DataID</strong> çš„å”¯ä¸€æ ‡è¯†ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¯¹ç‰¹å®šæœåŠ¡çš„ç²¾ç¡®å®šä½ã€‚ä¾‹å¦‚ï¼Œè¦è°ƒç”¨ç”Ÿäº§ç¯å¢ƒä¸‹ A åˆ†ç»„çš„è®¢å•æœåŠ¡ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨å¦‚ <code>Production.A.orderService</code> çš„æœåŠ¡è·¯å¾„ã€‚</p><p>æŒæ¡äº† Nacos çš„æ•°æ®æ¨¡å‹åï¼Œä½ ç°åœ¨å¯¹äºå¦‚ä½•ç²¾ç¡®åœ°è¯†åˆ«å’Œè°ƒç”¨å¾®æœåŠ¡åº”è¯¥æœ‰äº†æ¸…æ™°çš„è®¤è¯†ã€‚è¿™ç§ç»“æ„åŒ–çš„æ–¹å¼å¤§å¤§ç®€åŒ–äº†æœåŠ¡ç®¡ç†ï¼Œæé«˜äº†å¾®æœåŠ¡æ¶æ„çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»‹ç» Nacos çš„åŸºæœ¬æ¶æ„ï¼Œä»¥ä¾¿ä½ å¯¹å…¶åŠŸèƒ½æ¨¡å—æœ‰ä¸€ä¸ªå…¨é¢çš„äº†è§£ã€‚</p><h4 id="_1-2-3-nacos-åŸºæœ¬æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_1-2-3-nacos-åŸºæœ¬æ¶æ„" aria-hidden="true">#</a> 1.2.3 Nacos åŸºæœ¬æ¶æ„</h4><p>Nacos åœ¨æœåŠ¡æ²»ç†æ–¹é¢ä¸»æ‰“ä¸¤å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šæœåŠ¡å‘ç°å’Œé…ç½®ç®¡ç†ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒç”± <strong>Naming Service</strong> å’Œ <strong>Config Service</strong> ä¸¤å¤§åŸºçŸ³æ¨¡å—ç»„æˆï¼Œå‰è€…è´Ÿè´£æœåŠ¡çš„å‘ç°å’Œæ³¨å†Œï¼Œåè€…åˆ™ç®¡ç†é…ç½®ä¿¡æ¯å¹¶æ”¯æŒçƒ­æ›´æ–°ã€‚å…³äºé…ç½®ç®¡ç†çš„æ·±å…¥æ¢è®¨ï¼Œæˆ‘å°†åœ¨åå†…å®¹èŠ‚ä¸­ä¸“é—¨è¿›è¡Œè®²è§£ã€‚</p><p>ç…§ä¸‹é¢çš„å®˜æ–¹æ¶æ„å›¾ï¼Œä»¥è·å¾—åŠŸèƒ½æ¨¡å—çš„ç›´è§‚ç†è§£ï¼š</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-063945.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å›¾ç¤ºè¡¨æ˜ï¼ŒæœåŠ¡æä¾›è€…ï¼ˆProvider APPï¼‰å’Œæ¶ˆè´¹è€…ï¼ˆConsumer APPï¼‰éƒ½æ˜¯é€šè¿‡ Open API ä¸ Nacos Server çš„æ ¸å¿ƒæ¨¡å—è¿›è¡Œäº¤äº’çš„ã€‚è¿™äº› Open API æ˜¯ä¸€ç³»åˆ—å…¬å¼€çš„ã€éµå¾ª RESTful é£æ ¼çš„ HTTP æ¥å£ã€‚</p><blockquote><p>å¯¹ Open API çš„æ›´å¤šç»†èŠ‚ï¼Œå¯ä»¥è®¿é—® <a href="https://nacos.io/zh-cn/docs/open-api.html" target="_blank" rel="noopener noreferrer">Nacos å®˜æ–¹ç½‘ç«™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä»¥è·å–ä¸°å¯Œçš„ API æ–‡æ¡£ã€‚</p></blockquote><p>åœ¨ Nacos çš„æ¢çº½ä¸­ï¼Œ<strong>Naming Service</strong> æ‰®æ¼”äº†å°†æœåŠ¡åç§°æ˜ å°„åˆ°æœåŠ¡å®ä½“ï¼ˆå¦‚ IP åˆ—è¡¨ï¼‰çš„è§’è‰²ï¼Œè¿™æ˜¯å®ç°æœåŠ¡å‘ç°çš„åŸºç¡€ã€‚æ¯”å¦‚ï¼Œä½ è‹¥æŒæœ‰ç‰¹å®šæœåŠ¡çš„ Namespace å’Œ Group ä¿¡æ¯ï¼ŒNaming Service å°†åŠ©ä½ å¿«é€Ÿå®šä½åˆ°è¯¥æœåŠ¡çš„å®ä¾‹é›†ç¾¤ã€‚</p><p>å¦å¤–ï¼Œ<strong>Nacos Core</strong> æ˜¯ä¸€ç»„æ„æˆ Nacos å¼ºå¤§åç›¾çš„åŸºç¡€åŠŸèƒ½é›†åˆã€‚ä»¥ä¸‹è¡¨æ ¼åˆ—å‡ºäº†ä¸€äº›å…³é”®çš„ Nacos Core ç»„ä»¶åŠå…¶èŒè´£ï¼š</p><table><thead><tr><th>ç»„ä»¶</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td>å¯åŠ¨ç»„ä»¶</td><td>æ”¯æŒå¤šç§æ¨¡å¼ï¼ŒåŒ…æ‹¬å•æœºï¼ˆStandaloneï¼‰ã€é›†ç¾¤ï¼ˆClusterï¼‰ã€DNS ç­‰ï¼Œä¸ºæœåŠ¡çš„å¯åŠ¨æä¾›çµæ´»æ€§ã€‚</td></tr><tr><td>å¯»å€ç»„ä»¶</td><td>é€šè¿‡åŸŸåã€æœåŠ¡åç§°ã€IP ç«¯å£ã€å¹¿æ’­ç­‰å¤šç§æ–¹å¼è¿›è¡ŒæœåŠ¡å¯»å€ã€‚</td></tr><tr><td>å­˜å‚¨ç»„ä»¶</td><td>è´Ÿè´£ Nacos æœåŠ¡ä¿¡æ¯çš„æŒä¹…åŒ–ï¼Œä»¥åŠåˆ†ç‰‡å’Œå¤åˆ¶æ•°æ®ä»¥ä¿è¯é«˜å¯ç”¨ã€‚</td></tr><tr><td>æ’ä»¶ç»„ä»¶</td><td>æ”¯æŒæ‰©å±•å’Œå®šåˆ¶ï¼ŒåŒ…å«ç”¨æˆ·ç®¡ç†ã€æƒé™æ§åˆ¶ã€å®¡è®¡åŠŸèƒ½ã€SMS é€šçŸ¥æ¥å…¥ã€ç›‘æ§ç»Ÿè®¡ç­‰å¤šæ ·åŒ–åŠŸèƒ½ã€‚</td></tr><tr><td>ç¼“å­˜ç»„ä»¶</td><td>å®ç°æœ¬åœ°ã€æœåŠ¡ç«¯ç¼“å­˜ï¼Œä»¥åŠå®¹ç¾æ”¯æŒçš„åŠŸèƒ½ï¼Œæé«˜æ•°æ®è®¿é—®é€Ÿåº¦å’Œç³»ç»Ÿå®¹é”™èƒ½åŠ›ã€‚</td></tr><tr><td>äº‹ä»¶é€šçŸ¥ç»„ä»¶</td><td>å®ç°å¼‚æ­¥äº‹ä»¶çš„é€šçŸ¥å’Œå¤„ç†ã€‚</td></tr><tr><td>æ—¥å¿—ç»„ä»¶</td><td>ä¿æŒæ—¥å¿—è®°å½•çš„è§„èŒƒæ€§å’Œä¸€è‡´æ€§ï¼Œå¦‚ç®¡ç†æ—¥å¿—çš„æ ¼å¼ã€æ—¥å¿—çº§åˆ«å’Œåˆ†ç±»ï¼Œä¿è¯æ—¥å¿—çš„å¯ç§»æ¤æ€§ã€‚</td></tr><tr><td>å®¹é‡ç®¡ç†ç»„ä»¶</td><td>é˜²æ­¢æ•°æ®è¿‡è½½ï¼Œä¿è¯ç³»ç»Ÿç¨³å®šè¿è¡Œã€‚å¦‚ç®¡ç†æ¯ä¸ª Namespaceå’Œ Group ç»´åº¦ä¸‹çš„å®¹é‡ï¼Œé˜²æ­¢å­˜å‚¨ç©ºé—´è¢«å†™æ»¡è€Œå¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨ã€‚</td></tr></tbody></table><p>ä¸ºäº†ç»´æŠ¤é›†ç¾¤çŠ¶æ€çš„ä¸€è‡´æ€§ï¼ŒNacos å®ç°äº†ä¸¤ç§ä¸€è‡´æ€§åè®®ï¼š<strong>Raft</strong> å’Œ <strong>Distro</strong>ã€‚Raft å¼ºè°ƒå¼ºä¸€è‡´æ€§ï¼Œé€šè¿‡é€‰ä¸¾æœºåˆ¶ç¡®å®š Leader èŠ‚ç‚¹æ¥åŒæ­¥æ•°æ®ï¼›è€Œ Distro æ›´æ³¨é‡å¯ç”¨æ€§å’Œæœ€ç»ˆä¸€è‡´æ€§ï¼Œé€‚ç”¨äºä¸´æ—¶èŠ‚ç‚¹çš„æ•°æ®åŒæ­¥ã€‚</p><blockquote><p>è¿™é‡Œçš„ä»‹ç»åªæ˜¯ä¸€ç¥ï¼Œä½†è€ƒè™‘åˆ° <strong>ä¸€è‡´æ€§åè®®æ˜¯æŠ€æœ¯é¢è¯•ä¸­çš„å¸¸è§é—®é¢˜</strong>ï¼Œå»ºè®®æ·±å…¥äº†è§£è¿™äº›ç»å…¸çš„åè®®ç†è®ºã€‚</p></blockquote><p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†åŠ¨æ‰‹å®è·µï¼Œå»ºç«‹ä¸€ä¸ª Nacos æœåŠ¡å™¨é›†ç¾¤ï¼Œå¹¶å¯¹ä¸€ä¸ª Spring Boot åº”ç”¨è¿›è¡Œæ”¹é€ ï¼Œå°†å…¶æœåŠ¡åŒ–ã€‚é€šè¿‡è¿™ä¸€å®æˆ˜æ¼”ç»ƒï¼Œä½ å°†å­¦ä¼šå¦‚ä½•åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å®ç°ä»æœ¬åœ°æ–¹æ³•è°ƒç”¨åˆ°è¿œç¨‹æœåŠ¡è°ƒç”¨çš„è½¬å˜ã€‚</p><h2 id="_2-æ„å»º-nacos-é›†ç¾¤ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_2-æ„å»º-nacos-é›†ç¾¤ç¯å¢ƒ" aria-hidden="true">#</a> 2.æ„å»º Nacos é›†ç¾¤ç¯å¢ƒ</h2><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å®è·µå¦‚ä½•æ„å»ºä¸€ä¸ª Nacos é«˜å¯ç”¨æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚å°†å­¦ä¹ å»ºç«‹é«˜å¯ç”¨çš„ Nacos é›†ç¾¤ï¼Œå¹¶å°† MySQL ä½œä¸ºæ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆçš„è¯¦ç»†æ­¥éª¤ã€‚è¿™ä¸€è¿‡ç¨‹ä¸ä»…æ˜¯æŠ€æœ¯å®æ“ï¼ŒåŒæ—¶ä¹Ÿæ·±åŒ–äº†å¯¹é«˜å¯ç”¨æ¶æ„æ¦‚å¿µçš„ç†è§£ã€‚</p><p>ç³»ç»Ÿæ¶æ„çš„é¦–è¦è€ƒé‡æ˜¯ç¡®ä¿<strong>é«˜å¯ç”¨æ€§</strong>ã€‚æ— è®ºæŠ€æœ¯å¤šä¹ˆå°–ç«¯ï¼Œå¦‚æœç³»ç»Ÿç¨³å®šæ€§æ— æ³•ä¿éšœï¼Œæ‰€æœ‰çš„åŠªåŠ›éƒ½å¯èƒ½ä»˜ä¹‹ä¸œæµã€‚</p><p>æŠŠè¿™ä¸ªç†å¿µæ¯”ä½œç”Ÿæ´»ï¼Œå°±åƒå¥åº·æ˜¯å¹¸ç¦ç”Ÿæ´»çš„åŸºçŸ³ï¼Œé«˜å¯ç”¨æ€§åœ¨ç³»ç»Ÿæ¶æ„ä¸­æ‰®æ¼”ç€ç±»ä¼¼çš„è§’è‰²ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç¡®ä¿æ¶æ„è®¾è®¡ä¸­çš„æ¯ä¸€æ­¥éƒ½è´¡çŒ®äºè¿™ä¸ªåŸºç¡€ä¸Šã€‚</p><p>è¦æ„å»ºé«˜å¯ç”¨ç³»ç»Ÿï¼Œæœ‰ä¸¤ä¸ªåŸºæœ¬åŸåˆ™ï¼š</p><ul><li><strong>æ¶ˆé™¤å•ç‚¹æ•…éšœ</strong>ï¼šæ¶æ„è®¾è®¡åº”è€ƒè™‘åˆ°ä»»ä½•ç»„ä»¶éƒ½å¯èƒ½å¤±è´¥çš„å¯èƒ½æ€§ã€‚ä¾èµ–å•ä¸€èµ„æºçš„ä»»åŠ¡å¯èƒ½å½¢æˆç³»ç»Ÿçš„è–„å¼±ç¯èŠ‚ï¼Œä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œä¼šå¯¼è‡´æœåŠ¡ä¸­æ–­ã€‚ç›®æ ‡æ˜¯è¯†åˆ«å¹¶è§£å†³è¿™äº›æ½œåœ¨çš„å•ç‚¹é£é™©ã€‚</li><li><strong>å¿«é€Ÿæ•…éšœæ¢å¤</strong>ï¼šä¸€æ—¦æ•…éšœå‘ç”Ÿï¼Œåº”è¿…é€Ÿæ¢å¤åˆ°æ­£å¸¸çŠ¶æ€ã€‚å¯¹äºä¸­å¿ƒåŒ–çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚ Nacosï¼Œåº”ä¿è¯ä¸‹çº¿åçš„èŠ‚ç‚¹èƒ½å¤Ÿä»é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹è·å–æœ€æ–°çš„æœåŠ¡åˆ—è¡¨å¹¶è¿…é€Ÿæ¢å¤åˆ°æœåŠ¡ä¸­æ–­å‰çš„çŠ¶æ€ã€‚</li></ul><p>Nacos é€šè¿‡é›†ç¾¤éƒ¨ç½²æœ‰æ•ˆåœ°è§£å†³äº†ä¸Šè¿°ä¸¤å¤§é«˜å¯ç”¨æ€§é—®é¢˜ã€‚ä¸ä»…å¯ä»¥é¿å…å•ä¸€æ•…éšœç‚¹çš„å½±å“ï¼Œè€Œä¸”ç¡®ä¿äº†èŠ‚ç‚¹é—´æ•°æ®çš„åŒæ­¥å’Œå¿«é€Ÿæ•…éšœæ¢å¤ã€‚ä¸‹é¢ï¼Œæˆ‘å°†é€æ­¥å¼•å¯¼ä½ å®Œæˆ Nacos é›†ç¾¤çš„æ­å»ºï¼Œè®©æˆ‘ä»¬å¼€å§‹è¿™ä¸ªæ—…ç¨‹å§ã€‚</p><h3 id="_2-1-è·å–-nacos-server" tabindex="-1"><a class="header-anchor" href="#_2-1-è·å–-nacos-server" aria-hidden="true">#</a> 2.1 è·å– Nacos Server</h3><p>å¼€å§‹æ­å»ºé›†ç¾¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½ Nacos Serverã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol><li><p>è®¿é—® Alibaba Nacos åœ¨ GitHub ä¸Šçš„ <a href="https://github.com/alibaba/nacos/releases" target="_blank" rel="noopener noreferrer">å‘å¸ƒé¡µé¢<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p></li><li><p>é€‰æ‹©å¹¶ä¸‹è½½å½“å‰æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ï¼ˆä¾‹å¦‚ 2.2.3ï¼‰ï¼Œå®ƒå°†ä½œä¸ºæˆ‘ä»¬å®æˆ˜é¡¹ç›®çš„æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒã€‚</p><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šåŠ¡å¿…é€‰æ‹©ç¨³å®šç‰ˆæœ¬è¿›è¡Œå®‰è£…ï¼Œé¿å…ä½¿ç”¨æ ‡æœ‰ BETA çš„é¢„å‘å¸ƒç‰ˆæœ¬ï¼Œä»¥å…é‡åˆ°æ½œåœ¨çš„ Bug æˆ–å…¼å®¹æ€§é—®é¢˜ã€‚</p></blockquote></li><li><p>åœ¨å‘å¸ƒé¡µçš„ Assets åŒºåŸŸæ‰¾åˆ° <code>nacos-server-2.2.3.tar.gz</code> æˆ– <code>nacos-server-2.2.3.zip</code> æ–‡ä»¶ï¼Œé€‰æ‹©ä¸€ä¸ªè¿›è¡Œä¸‹è½½ã€‚å¦‚æœå¯¹ Nacos æºç æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸‹è½½æºç åŒ…ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-094434.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ol><p>ä¸‹è½½åï¼Œè§£å‹ Nacos Server æ–‡ä»¶ï¼Œå¹¶æŒ‰ä»¥ä¸‹æ­¥éª¤å‡†å¤‡é›†ç¾¤ç¯å¢ƒï¼š</p><ol><li>å°†è§£å‹çš„æ–‡ä»¶å¤¹é‡å‘½åä¸º <code>nacos-cluster1</code>ã€‚</li><li>å¤åˆ¶ <code>nacos-cluster1</code> æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>nacos-cluster2</code> çš„å‰¯æœ¬ã€‚</li></ol><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æ¨¡æ‹Ÿå‡ºäº†ä¸€ä¸ªç”±ä¸¤ä¸ª Nacos Server èŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤ç¯å¢ƒã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-09-20-021505.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å®Œæˆè¿™äº›æ­¥éª¤åï¼ŒNacos æœåŠ¡å™¨çš„åˆå§‹å®‰è£…å’Œé›†ç¾¤æ¨¡æ‹Ÿå·²å°±ç»ªã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›å…¥é…ç½®ç¯èŠ‚ï¼Œè®¾ç½® Nacos Server ä»¥æ”¯æŒé›†ç¾¤æ¨¡å¼è¿è¡Œã€‚</p><h3 id="_2-2-é…ç½®-nacos-server" tabindex="-1"><a class="header-anchor" href="#_2-2-é…ç½®-nacos-server" aria-hidden="true">#</a> 2.2 é…ç½® Nacos Server</h3><p>è¦ä½¿ Nacos Server æ”¯æŒé›†ç¾¤æ¨¡å¼å’Œå¤–éƒ¨æ•°æ®åº“ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶é…ç½®æ–‡ä»¶è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚</p><ol><li><p><strong>ä¿®æ”¹æœåŠ¡ç«¯å£</strong></p><p>ç”±äºæˆ‘ä»¬åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œä¸¤ä¸ª Nacos å®ä¾‹æ¥æ¨¡æ‹Ÿé›†ç¾¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå®ƒä»¬æŒ‡å®šä¸åŒçš„ç«¯å£å·ã€‚é…ç½®æ–‡ä»¶ <code>application.properties</code> ä½äºæ¯ä¸ª Nacos Server ç›®å½•ä¸‹çš„ <code>conf</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p><ul><li>å¯¹äº <code>nacos-cluster1</code>ï¼Œæˆ‘ä»¬ä¿ç•™é»˜è®¤ç«¯å£ <code>8848</code>ã€‚</li><li>å¯¹äº <code>nacos-cluster2</code>ï¼Œæ›´æ”¹ç«¯å£ä¸º <code>8948</code> ä»¥é¿å…å†²çªã€‚</li></ul><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-094801.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¿®æ”¹ <code>server.port</code> å±æ€§å€¼ä»¥è®¾ç½®ç«¯å£ï¼š</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-094844.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p><strong>é…ç½®æ•°æ®åº“è¿æ¥</strong></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNacos ä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“ Derbyï¼Œä½†æˆ‘ä»¬å°†è½¬æ¢ä¸º MySQL ä»¥æé«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½® MySQL æ•°æ®æºï¼š</p><ul><li><strong>å¯ç”¨ MySQL æ•°æ®æº</strong>ï¼šåœ¨ <code>application.properties</code> æ–‡ä»¶ä¸­ï¼Œå–æ¶ˆæ³¨é‡Šæˆ–æ·»åŠ  <code>spring.datasource.platform=mysql</code>ã€‚</li><li><strong>é…ç½®æ•°æ®åº“å®ä¾‹</strong>ï¼šç¡®è®¤ <code>db.num=1</code> è¡Œæ˜¯å¯ç”¨çš„ï¼Œä»¥æ”¯æŒå•æ•°æ®åº“å®ä¾‹ã€‚</li><li><strong>è®¾å®š JDBC è¿æ¥ä¸²</strong>ï¼šæ›´æ”¹ <code>db.url.0</code> ä¸ºä½ çš„ MySQL æ•°æ®åº“åœ°å€ï¼ˆä¾‹å¦‚ï¼Œ<code>jdbc:mysql://localhost:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</code>ï¼‰ã€‚åŒæ ·ï¼Œæ›´æ–° <code>db.user.0</code> å’Œ <code>db.password.0</code> ä¸ºç›¸åº”çš„æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç ã€‚</li></ul><p>è¯·ç¡®è®¤ä½ çš„æ•°æ®åº“é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.datasource.platform</span><span class="token punctuation">=</span><span class="token value attr-value">mysql</span>

<span class="token key attr-name">db.num</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token key attr-name">db.url.0</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span>
<span class="token key attr-name">db.user.0</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">db.password.0</span><span class="token punctuation">=</span><span class="token value attr-value">ä½ çš„å¯†ç </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”é…ç½®æ–‡ä»¶ä½ç½®å¦‚ä¸‹ï¼š</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-095109.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ol><p>å®Œæˆä»¥ä¸Šé…ç½®åï¼Œä½ çš„ Nacos Server å°†å‡†å¤‡å¥½è¿æ¥åˆ° MySQL æ•°æ®åº“ã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†åœ¨ MySQL ä¸­åˆ›å»ºæ‰€éœ€çš„æ•°æ®åº“å’Œè¡¨ã€‚è¯·ç¡®ä¿ä½ å·²ç»å®‰è£…äº† MySQL å¹¶åˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>nacos</code> çš„æ•°æ®åº“ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å¯¼å…¥ Nacos æ‰€éœ€çš„æ•°æ®åº“ç»“æ„å’Œåˆå§‹æ•°æ®ã€‚</p><h3 id="_2-3-åˆå§‹åŒ–æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#_2-3-åˆå§‹åŒ–æ•°æ®åº“" aria-hidden="true">#</a> 2.3 åˆå§‹åŒ–æ•°æ®åº“</h3><p>åœ¨ Nacos Server é›†ç¾¤éƒ¨ç½²ä¸­ï¼Œæ‰€æœ‰çš„é…ç½®ä¿¡æ¯å’ŒæœåŠ¡ç»†èŠ‚éƒ½å°†å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ schemaã€‚</p><ol><li><strong>ç™»å½•åˆ° MySQL</strong>ï¼šä½¿ç”¨å‘½ä»¤è¡Œæˆ– GUI å·¥å…·ç™»å½•åˆ°ä½ çš„ MySQL å®ä¾‹ã€‚</li><li><strong>åˆ›å»º Schema</strong>ï¼šæ‰§è¡Œä»¥ä¸‹ SQL å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªåä¸º <code>nacos</code> çš„æ–°æ•°æ®åº“ schemaã€‚</li></ol><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>-- æ–°å»ºä¸€ä¸ª Nacos Schema
create schema nacos;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Nacos æä¾›äº†ä¸€ç»„ SQL è„šæœ¬ç”¨äºåˆ›å»ºåˆå§‹æ•°æ®åº“ç»“æ„å’Œè¡¨ã€‚</p><ol><li><p><strong>å®šä½ SQL è„šæœ¬</strong>ï¼šåœ¨ Nacos çš„è§£å‹ç›®å½•çš„ <code>conf</code> æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ° <code>nacos-mysql.sql</code> æ–‡ä»¶ï¼ˆåœ¨ä¸€äº›ç‰ˆæœ¬ä¸­å¯èƒ½å‘½åä¸º <code>mysql-schema.sql</code>ï¼‰ã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-095640.png" style="zoom:50%;"></li><li><p><strong>æ‰§è¡Œ SQL è„šæœ¬</strong>ï¼šå°†è¯¥ SQL æ–‡ä»¶çš„å†…å®¹åœ¨æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„ <code>nacos</code> æ•°æ®åº“ä¸Šæ‰§è¡Œã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-095729.png" style="zoom:67%;"><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯¼å…¥ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>use nacos<span class="token punctuation">;</span>
<span class="token builtin class-name">source</span> <span class="token operator">&lt;</span>file-path<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>éªŒè¯è¡¨åˆ›å»º</strong>ï¼šæ‰§è¡ŒæˆåŠŸåï¼Œä½ åº”è¯¥å¯ä»¥åœ¨ <code>nacos</code> æ•°æ®åº“ä¸­çœ‹åˆ°æ–°åˆ›å»ºçš„è¡¨ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-09-24-141447.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ol><p>å®Œæˆè¿™äº›æ­¥éª¤åï¼Œæ•°æ®åº“å°±å·²ç»å‡†å¤‡å¥½ä¾› Nacos Server ä½¿ç”¨äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® Nacos Server é›†ç¾¤èŠ‚ç‚¹ï¼Œç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½å¤Ÿåœ¨å¯åŠ¨æ—¶æ‰¾åˆ°å¯¹æ–¹ï¼Œå¹¶ä¸”è¿›è¡Œæ­£ç¡®çš„æ•°æ®åŒæ­¥ã€‚</p><h3 id="_2-4-é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_2-4-é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯" aria-hidden="true">#</a> 2.4 é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</h3><p>ä¸ºäº†è®© Nacos Server é›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹èƒ½ç›¸äº’å‘ç°å¹¶åŒæ­¥æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯ã€‚</p><ol><li><p><strong>åˆ›å»º <code>cluster.conf</code> æ–‡ä»¶</strong>ï¼šåœ¨ Nacos Server çš„ <code>conf</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>cluster.conf</code> çš„æ–‡ä»¶ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-100233.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p><strong>ç¼–è¾‘ <code>cluster.conf</code> æ–‡ä»¶</strong>ï¼šå°†æ‰€æœ‰ Nacos Server èŠ‚ç‚¹çš„IPåœ°å€å’Œç«¯å£å·æ·»åŠ åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚æ›¿æ¢ä¸‹é¢çš„ IP åœ°å€å’Œç«¯å£å·ä¸ºä½ è‡ªå·±é›†ç¾¤çš„å®é™…ä¿¡æ¯ã€‚</p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code># cluster.conf ç¤ºä¾‹ï¼ˆ# æ³¨æ„ï¼šè¿™é‡Œçš„ IP ä¸èƒ½æ˜¯ localhost æˆ–è€… 127.0.0.1ï¼‰
10.138.177.62:8848
10.138.177.62:8948
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>âš ï¸ æ³¨æ„ï¼š</p><ul><li><strong>å†…ç½‘ IP åœ°å€</strong>ï¼šåœ¨ <code>cluster.conf</code> æ–‡ä»¶ä¸­æŒ‡å®šçš„ IP åœ°å€åº”è¯¥æ˜¯å¯ä»¥äº’ç›¸è®¿é—®çš„å†…ç½‘ IPï¼Œä¸èƒ½ä½¿ç”¨ <code>localhost</code> æˆ– <code>127.0.0.1</code>ã€‚</li><li><strong>è·å– IP åœ°å€</strong>ï¼šå¦‚æœä½ åœ¨ Linux æˆ– Mac ç³»ç»Ÿï¼Œä½¿ç”¨ <code>ifconfig</code> æˆ– <code>ip addr</code> å‘½ä»¤è·å–æœ¬æœº IP åœ°å€ã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ifconfig</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;inet &quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–è€…ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ip</span> addr <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;inet &quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-100607.png" style="zoom:67%;"><p>å¯¹äº Windows ç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨ <code>ipconfig</code> å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ipconfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¡®è®¤ä½ çš„ IP åœ°å€åï¼Œç”¨å®ƒæ›¿æ¢ <code>cluster.conf</code> æ–‡ä»¶ä¸­çš„ IP éƒ¨åˆ†ã€‚</p><p>å®Œæˆé›†ç¾¤é…ç½®æ–‡ä»¶çš„åˆ›å»ºåï¼Œæ¯ä¸ª Nacos Server èŠ‚ç‚¹åœ¨å¯åŠ¨æ—¶éƒ½ä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œä»è€Œäº†è§£å…¶ä»–èŠ‚ç‚¹çš„å­˜åœ¨ï¼Œå¹¶è¿›è¡Œé›†ç¾¤é€šä¿¡ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œç¡®ä¿ä½ çš„æ•°æ®åº“å·²æ­£ç¡®åˆå§‹åŒ–ï¼Œç„¶åä½ å¯ä»¥å¯åŠ¨ Nacos Server çš„æ¯ä¸ªå®ä¾‹ä»¥éªŒè¯é›†ç¾¤æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€æ­¥ä¸­å¯åŠ¨ Nacos Server å®ä¾‹ã€‚</p><h3 id="_2-5-å¯åŠ¨-nacos-server-é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_2-5-å¯åŠ¨-nacos-server-é›†ç¾¤" aria-hidden="true">#</a> 2.5 å¯åŠ¨ Nacos Server é›†ç¾¤</h3><p>å¯åŠ¨ Nacos Server é›†ç¾¤éå¸¸ç®€å•ï¼Œä¸€æ—¦ä½ å®Œæˆäº†ä¹‹å‰çš„é…ç½®ï¼Œåªéœ€è¦è¿è¡Œç›¸åº”çš„å¯åŠ¨è„šæœ¬å³å¯ã€‚</p><ol><li><p><strong>æ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤è¡Œç•Œé¢</strong>ï¼šè½¬åˆ° Nacos å®‰è£…ç›®å½•ã€‚</p></li><li><p><strong>å¯¼èˆªåˆ° <code>bin</code> ç›®å½•</strong>ï¼šåœ¨ Nacos æœåŠ¡å™¨çš„å®‰è£…ç›®å½•ä¸­ï¼Œæ‰¾åˆ° <code>bin</code> æ–‡ä»¶å¤¹ï¼Œè¿™é‡ŒåŒ…å«äº†å¯åŠ¨å’Œå…³é—­æœåŠ¡å™¨æ‰€éœ€çš„è„šæœ¬ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-09-24-142313.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p><strong>é€‰æ‹©å¯¹åº”çš„è„šæœ¬æ‰§è¡Œ</strong>ï¼š</p><ul><li><strong>å¯¹äº Windows ç”¨æˆ·</strong>ï¼šä½¿ç”¨ <code>startup.cmd</code> æ¥å¯åŠ¨ï¼Œ<code>shutdown.cmd</code> æ¥å…³é—­æœåŠ¡ã€‚</li><li><strong>å¯¹äº Mac/Linux ç”¨æˆ·</strong>ï¼šä½¿ç”¨ <code>startup.sh</code> å’Œ <code>shutdown.sh</code> è„šæœ¬æ¥å¯åŠ¨å’Œå…³é—­æœåŠ¡ã€‚</li></ul></li><li><p><strong>ä»¥é›†ç¾¤æ¨¡å¼å¯åŠ¨ Nacos</strong>ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Nacos Serverã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sh</span> startup.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ¡å‘½ä»¤å°†ä¼šå¯åŠ¨ Nacos Server å¹¶é»˜è®¤å…¶ä¸ºé›†ç¾¤æ¨¡å¼ï¼ˆå› ä¸ºä½ å·²ç»é…ç½®äº† <code>cluster.conf</code> æ–‡ä»¶ï¼‰ã€‚</p></li><li><p><strong>æŸ¥çœ‹å¯åŠ¨æ—¥å¿—</strong>ï¼šæ§åˆ¶å°è¾“å‡ºä¼šå‘Šè¯‰ä½ å¯åŠ¨æ—¥å¿—çš„ä½ç½®ï¼Œä¾‹å¦‚ï¼š</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-101116.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨ <code>logs/start.out</code> æ–‡ä»¶ä¸­ï¼ŒæŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼Œç¡®è®¤æ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">tail</span> <span class="token parameter variable">-f</span> logs/start.out
<span class="token comment"># æˆ–è€…</span>
<span class="token function">cat</span> logs/start.out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥æ‰¾ç±»ä¼¼ â€œNacos started successfully in cluster modeâ€ çš„æ¶ˆæ¯ä»¥ç¡®è®¤æˆåŠŸå¯åŠ¨ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-101143.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p><strong>éªŒè¯é›†ç¾¤çŠ¶æ€</strong>ï¼šåœ¨æ‰€æœ‰é¢„å®šä½œä¸ºé›†ç¾¤èŠ‚ç‚¹çš„æœºå™¨ä¸Šé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹éƒ½æ­£ç¡®å¯åŠ¨ã€‚</p></li></ol><h3 id="_2-6-ç™»å½•å’ŒéªŒè¯-nacos-æ§åˆ¶å°" tabindex="-1"><a class="header-anchor" href="#_2-6-ç™»å½•å’ŒéªŒè¯-nacos-æ§åˆ¶å°" aria-hidden="true">#</a> 2.6 ç™»å½•å’ŒéªŒè¯ Nacos æ§åˆ¶å°</h3><p>å®Œæˆé›†ç¾¤çš„é…ç½®å’Œå¯åŠ¨åï¼Œæ¥ä¸‹æ¥è¦ç™»å½•åˆ° Nacos æ§åˆ¶å°ï¼Œç¡®ä¿é›†ç¾¤çŠ¶æ€è‰¯å¥½ã€‚</p><ol><li><p><strong>è®¿é—®æ§åˆ¶å°</strong>ï¼šåœ¨æµè§ˆå™¨ä¸­è¾“å…¥é›†ç¾¤ä¸­ä»»ä¸€èŠ‚ç‚¹çš„åœ°å€ï¼Œä¾‹å¦‚ï¼š</p><ul><li>nacos-cluster1ï¼šhttp://127.0.0.1:8848/nacos</li><li>nacos-cluster2ï¼šhttp://127.0.0.1:8948/nacos</li></ul><blockquote><p>âš ï¸ æ³¨æ„ï¼šç¡®ä¿ä½¿ç”¨å®é™…çš„æœåŠ¡å™¨ IP è€Œé <code>127.0.0.1</code> æˆ– <code>localhost</code>ï¼Œé™¤éä½ æ­£åœ¨æœ¬æœºä¸Šè¿›è¡Œæ“ä½œã€‚</p></blockquote></li><li><p><strong>ç™»å½•é¡µé¢</strong>ï¼šè¿›å…¥ç™»å½•é¡µé¢ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„ç•Œé¢ã€‚ä½¿ç”¨é»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç ï¼ˆé€šå¸¸æ˜¯ <code>nacos</code>/<code>nacos</code>ï¼‰ç™»å½•ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ç™»å½•åçš„ <code>æƒé™æ§åˆ¶</code> -&gt; <code>ç”¨æˆ·åˆ—è¡¨</code> é¡µé¢æ–°å¢ç³»ç»Ÿç”¨æˆ·ã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-101655.png" style="zoom:67%;"></li><li><p><strong>æ£€æŸ¥é›†ç¾¤çŠ¶æ€</strong>ï¼šç™»å½•åï¼Œå¯¼èˆªè‡³ â€œé›†ç¾¤ç®¡ç†â€ -&gt; â€œèŠ‚ç‚¹åˆ—è¡¨â€ æŸ¥çœ‹æ‰€æœ‰ Nacos Server èŠ‚ç‚¹åŠå…¶çŠ¶æ€ã€‚æ‰€æœ‰èŠ‚ç‚¹çš„çŠ¶æ€åº”è¯¥æ˜¾ç¤ºä¸º â€œUPâ€ï¼Œç»¿è‰²çš„çŠ¶æ€è¡¨ç¤ºèŠ‚ç‚¹å¥åº·ã€‚å¦‚æœèŠ‚ç‚¹çŠ¶æ€ä¸æ˜¯ â€œUPâ€ï¼Œè¯·æ£€æŸ¥å¯¹åº”èŠ‚ç‚¹çš„æ—¥å¿—æ–‡ä»¶ä»¥è¯Šæ–­é—®é¢˜ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-05-101829.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ol><p>å¦‚æœæ— æ³•ç™»å½•æ§åˆ¶å°æˆ–é›†ç¾¤çŠ¶æ€æœ‰å¼‚å¸¸ï¼Œä»¥ä¸‹æ˜¯æ’æŸ¥æ­¥éª¤ï¼š</p><ol><li><strong>æ—¥å¿—æ£€æŸ¥</strong>ï¼šæŸ¥çœ‹ <code>/logs/start.out</code> æˆ–å…¶ä»–ç›¸å…³æ—¥å¿—æ–‡ä»¶ï¼Œç¡®å®šæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ã€‚</li><li><strong>ç«¯å£å ç”¨</strong>ï¼šå¦‚æœ <code>server.port</code> æŒ‡å®šçš„ç«¯å£å·²è¢«å…¶ä»–åº”ç”¨å ç”¨ï¼Œæ›´æ¢ç«¯å£åé‡æ–°å¯åŠ¨ã€‚</li><li><strong>æ•°æ®åº“è¿æ¥</strong>ï¼šæ£€æŸ¥ <code>application.properties</code> ä¸­çš„æ•°æ®åº“è¿æ¥é…ç½®ï¼Œç¡®ä¿ MySQL æœåŠ¡å¯è¾¾ä¸”è¿è¡Œä¸­ã€‚</li><li><strong>ç½‘ç»œé…ç½®</strong>ï¼šç¡®ä¿æœåŠ¡å™¨é—´çš„ç½‘ç»œè®¾ç½®å…è®¸ç›¸äº’é€šä¿¡ï¼Œæ²¡æœ‰è¢«é˜²ç«å¢™æˆ–å®‰å…¨ç»„è§„åˆ™é˜»æ­¢ã€‚</li><li><strong>æœåŠ¡å¥åº·æ£€æŸ¥</strong>ï¼šç™»å½•åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„æ§åˆ¶å°ï¼Œç¡®è®¤æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°åŠŸèƒ½æ­£å¸¸ã€‚</li></ol><p>é›†ç¾¤ç¯å¢ƒé…ç½®æ­£ç¡®å¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹éƒ½å·²ç»æ­£ç¡®å¯åŠ¨å’ŒåŒæ­¥ï¼Œè¿™æ—¶ä½ çš„ Nacos é›†ç¾¤åº”è¯¥å·²ç»å‡†å¤‡å¥½å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚å¯ä»¥è¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œå‘ç°çš„ç›¸å…³æ“ä½œï¼Œç¡®ä¿é›†ç¾¤åŠŸèƒ½å®Œå…¨ç¬¦åˆé¢„æœŸã€‚</p><p>ç™»å½•æ§åˆ¶å°åï¼Œå»ºè®®è¿›è¡Œä¸€äº›åŸºæœ¬çš„æœåŠ¡æ³¨å†Œå’Œé…ç½®æ“ä½œï¼Œä»¥éªŒè¯é›†ç¾¤çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥æ³¨å†Œä¸€ä¸ªæµ‹è¯•æœåŠ¡ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ£€æŸ¥è¯¥æœåŠ¡æ˜¯å¦å¯è§ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿é›†ç¾¤çš„æœåŠ¡åŒæ­¥åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚</p><h3 id="_2-7-é˜¶æ®µå°ç»“" tabindex="-1"><a class="header-anchor" href="#_2-7-é˜¶æ®µå°ç»“" aria-hidden="true">#</a> 2.7 é˜¶æ®µå°ç»“</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥å®Œæˆäº† Nacos é›†ç¾¤çš„æ­å»ºï¼Œå¹¶ç¡®ä¿äº†å…¶é«˜å¯ç”¨æ€§ã€‚é€šè¿‡å¼•å…¥ MySQL ä½œä¸ºé…ç½®å­˜å‚¨ï¼Œæˆ‘ä»¬å®ç°äº†é…ç½®çš„æŒä¹…åŒ–å’Œé›†ç¾¤çŠ¶æ€çš„å…±äº«ã€‚</p><p>å…³é”®æ­¥éª¤æ€»ç»“ï¼š</p><ol><li><strong>å­˜å‚¨åˆ‡æ¢</strong>ï¼šåˆ‡æ¢åˆ° MySQL æ•°æ®æºï¼Œå®ç°äº†é…ç½®çš„æŒä¹…åŒ–å­˜å‚¨ã€‚</li><li><strong>é›†ç¾¤é…ç½®</strong>ï¼šé…ç½®äº†é›†ç¾¤èŠ‚ç‚¹ï¼Œä¿è¯äº†æœåŠ¡æ³¨å†Œä¿¡æ¯åœ¨é›†ç¾¤é—´çš„åŒæ­¥ã€‚</li><li><strong>æœåŠ¡å¯åŠ¨</strong>ï¼šå¯åŠ¨äº† Nacos æœåŠ¡ï¼Œå¹¶éªŒè¯äº†é›†ç¾¤æ¨¡å¼ä¸‹çš„æ­£å¸¸è¿è¡Œã€‚</li><li><strong>æ§åˆ¶å°ç™»å½•</strong>ï¼šç™»å½•åˆ° Nacos æ§åˆ¶å°ï¼ŒéªŒè¯äº†é›†ç¾¤çŠ¶æ€ã€‚</li></ol><p>æœåŠ¡æ³¨å†Œæœ€ä½³å®è·µï¼š</p><ul><li><strong>VIPï¼ˆVirtual IPï¼‰</strong>ï¼šåœ¨å®¢æˆ·ç«¯é…ç½®ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿ IP åœ°å€ä»£æ›¿ç¡¬ç¼–ç çš„æœåŠ¡å™¨åˆ—è¡¨ã€‚è¿™æœ‰åŠ©äºåœ¨æœåŠ¡å™¨åœ°å€å˜åŒ–æ—¶ï¼Œæ— éœ€æ›´æ”¹å®¢æˆ·ç«¯é…ç½®ã€‚</li><li><strong>åŠ¨æ€æœåŠ¡å‘ç°</strong>ï¼šVIP é€šè¿‡åŠ¨æ€æœåŠ¡å‘ç°æœºåˆ¶ï¼Œä½¿å®¢æˆ·ç«¯èƒ½è‡ªåŠ¨å‘ç°åç«¯çš„ Nacos èŠ‚ç‚¹ã€‚</li></ul><p>æŠ€æœ¯æ‰©å±•ï¼š</p><ul><li><strong>Nginx+LVS/keepalived</strong>ï¼šäº†è§£å¹¶å®è·µå¦‚ä½•ä½¿ç”¨è¿™äº›å·¥å…·åˆ›å»ºé«˜å¯ç”¨çš„æœåŠ¡ä»£ç†å’Œè´Ÿè½½å‡è¡¡ã€‚</li><li><strong>è‡ªæˆ‘å­¦ä¹ </strong>ï¼šç ”ç©¶ <a href="https://nacos.io/zh-cn/docs/what-is-nacos.html" target="_blank" rel="noopener noreferrer">Nacos å®˜æ–¹æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå¢å¼ºå¯¹ Nacos æ¶æ„å’ŒåŠŸèƒ½ç‰¹æ€§çš„ç†è§£ã€‚</li></ul><p>è‡ªå­¦ç¬”è®°å»ºè®®ï¼š</p><ul><li><strong>Nacos åŠŸèƒ½ç‰¹æ€§</strong>ï¼šæ·±å…¥äº†è§£æœåŠ¡å‘ç°ã€æœåŠ¡é…ç½®ã€æœåŠ¡å…ƒæ•°æ®ç­‰å…³é”®åŠŸèƒ½ã€‚</li><li><strong>Nacos é›†æˆæ–¹æ¡ˆ</strong>ï¼šæŒæ¡ Nacos å¦‚ä½•ä¸å¾®æœåŠ¡æ¶æ„ï¼ˆå¦‚ Spring Cloudã€Dubboï¼‰é›†æˆã€‚</li><li><strong>é«˜çº§è¯é¢˜</strong>ï¼šç ”ç©¶æœåŠ¡åˆ†åŒºã€ç°åº¦å‘å¸ƒå’ŒæœåŠ¡æ²»ç†ç­‰é«˜çº§åŠŸèƒ½ã€‚</li><li><strong>æ•…éšœæ¨¡æ‹Ÿä¸æ’æŸ¥</strong>ï¼šæ¨¡æ‹Ÿå¯èƒ½çš„æ•…éšœåœºæ™¯ï¼Œå¦‚æ•°æ®åº“å®•æœºã€èŠ‚ç‚¹å¤±è”ç­‰ï¼Œå¹¶å­¦ä¹ å¦‚ä½•å¿«é€Ÿå®šä½å’Œè§£å†³ã€‚</li></ul><p>é€šè¿‡å°†ç†è®ºä¸å®è·µç»“åˆï¼Œä¸ä»…èƒ½æé«˜ä½ å¯¹ Nacos çš„ç†è§£ï¼Œè¿˜èƒ½é”»ç‚¼ä½ çš„é—®é¢˜è§£å†³èƒ½åŠ›ã€‚å½“ä½ å¯¹åŸºæœ¬çš„é›†ç¾¤æ­å»ºæœ‰äº†å……åˆ†ç†è§£åï¼Œå°è¯•æŒ‘æˆ˜æ›´é«˜çº§çš„é›†ç¾¤ç®¡ç†å’Œç»´æŠ¤ä»»åŠ¡ï¼Œå¦‚æ€§èƒ½ä¼˜åŒ–ã€æ•…éšœæ¢å¤ã€æ•°æ®è¿ç§»ç­‰ã€‚è¿™æ ·çš„å®è·µæœ‰åŠ©äºä½ åœ¨çœŸå®å·¥ä½œç¯å¢ƒä¸­æ›´å¥½åœ°è®¾è®¡å’Œç®¡ç†åˆ†å¸ƒå¼æœåŠ¡ã€‚</p><h2 id="_3-åœ¨-nacos-ä¸­å®ç°æœåŠ¡æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#_3-åœ¨-nacos-ä¸­å®ç°æœåŠ¡æ³¨å†Œ" aria-hidden="true">#</a> 3.åœ¨ Nacos ä¸­å®ç°æœåŠ¡æ³¨å†Œ</h2><p>åœ¨æ„å»ºå¾®æœåŠ¡æ¶æ„çš„ä¼˜æƒ åˆ¸å¹³å°é¡¹ç›®ä¸­ï¼ŒæœåŠ¡æ³¨å†Œæ˜¯å®ç°æœåŠ¡å‘ç°çš„å…ˆå†³æ¡ä»¶ã€‚æœ¬èŠ‚è¯¦ç»†ä»‹ç»å¦‚ä½•å°†æœåŠ¡æä¾›è€…æ³¨å†Œåˆ° Nacos æœåŠ¡å™¨ï¼Œæ˜¯æ„å»ºç«¯åˆ°ç«¯å¾®æœåŠ¡è°ƒç”¨é“¾è·¯çš„å…³é”®ä¸€ç¯ã€‚æˆ‘ä»¬å°†è®¨è®º Nacos çš„è‡ªåŠ¨è£…é…æœºåˆ¶ã€æ ¸å¿ƒå‚æ•°é…ç½®ï¼Œç¡®ä¿ä½ èƒ½å¤Ÿæœ‰æ•ˆåœ°ä½¿ç”¨ Nacos è¿›è¡ŒæœåŠ¡æ²»ç†ã€‚</p><p>æœåŠ¡æ³¨å†Œæ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„åŸºç¡€ç¯èŠ‚ã€‚åœ¨ Nacos ç”Ÿæ€ä¸­ï¼Œæ¯ä¸ªä¸‹æ¸¸æœåŠ¡ï¼ˆæœåŠ¡æä¾›è€…ï¼‰éœ€è¦åœ¨ Nacos æ³¨å†Œä¸­å¿ƒè¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·ä¸Šæ¸¸æœåŠ¡ï¼ˆæœåŠ¡æ¶ˆè´¹è€…ï¼‰æ‰èƒ½é€šè¿‡æœåŠ¡å‘ç°æœºåˆ¶æ‰¾åˆ°å¹¶è°ƒç”¨è¿™äº›ä¸‹æ¸¸æœåŠ¡ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥ <code>coupon-template-serv</code> å’Œ <code>coupon-calculation-serv</code> ä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åˆ©ç”¨ Nacos å®ç°æœåŠ¡çš„æ³¨å†Œã€‚åœ¨åé¢ï¼Œæˆ‘ä»¬å†è®¨è®ºä½œä¸ºæœåŠ¡æ¶ˆè´¹è€…çš„ <code>coupon-customer-serv</code> æ˜¯å¦‚ä½•é€šè¿‡æœåŠ¡å‘ç°æœºåˆ¶å‘æœåŠ¡æä¾›è€…å‘èµ·è°ƒç”¨çš„ã€‚</p><h3 id="_3-1-é›†æˆ-nacos-ä¾èµ–ä»¥ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§" tabindex="-1"><a class="header-anchor" href="#_3-1-é›†æˆ-nacos-ä¾èµ–ä»¥ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§" aria-hidden="true">#</a> 3.1 é›†æˆ Nacos ä¾èµ–ä»¥ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§</h3><p>åœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­å¼•å…¥ Nacos ä½œä¸ºæœåŠ¡å‘ç°å’Œé…ç½®ç®¡ç†çš„ç»„ä»¶ä¹‹å‰ï¼Œç¡®ä¿ç‰ˆæœ¬åŒ¹é…æ˜¯éå¸¸å…³é”®çš„ä¸€æ­¥ã€‚ç”±äº Spring Bootã€Spring Cloud å’Œ Spring Cloud Alibaba éƒ½ç»´æŠ¤ç€ä¸¥æ ¼çš„ç‰ˆæœ¬ä¾èµ–å…³ç³»ï¼Œè¿™ä¸‰è€…ä¹‹é—´çš„ç‰ˆæœ¬å…¼å®¹æ€§å¿…é¡»å¾—åˆ°ä¿è¯ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°éš¾ä»¥é¢„æ–™çš„é—®é¢˜ã€‚</p><p>ç‰ˆæœ¬å…¼å®¹æ€§æŸ¥è¯¢ï¼š</p><ul><li><p><strong>Spring Boot ä¸ Spring Cloud ç‰ˆæœ¬åŒ¹é…</strong>ï¼šå¯ä»¥åœ¨ <a href="https://spring.io/projects/spring-cloud#overview" target="_blank" rel="noopener noreferrer">Spring Cloud å®˜æ–¹æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸­æ‰¾åˆ° Spring Cloud æ”¯æŒçš„ Spring Boot ç‰ˆæœ¬åŒºé—´ã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-06-141955.png" style="zoom:33%;"></li><li><p><strong>Spring Cloud Alibaba ä¸ Spring Cloudã€Spring Boot çš„ç‰ˆæœ¬åŒ¹é…</strong>ï¼šå¯é€šè¿‡ Spring Cloud Alibaba çš„ <a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">GitHub wikié¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>è¿›è¡ŒæŸ¥è¯¢ã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-06-142042.png" style="zoom:50%;"></li></ul><p>å¸¸ç”¨å®æˆ˜ç‰ˆæœ¬é€‰æ‹©ï¼š</p><table><thead><tr><th>Spring Cloud Version</th><th>Spring Cloud Alibaba Version</th><th>Spring Boot Version</th></tr></thead><tbody><tr><td>Spring Cloud 2021.0.1</td><td>2021.0.1.0</td><td>2.6.3</td></tr><tr><td>Spring Cloud 2020.0.1</td><td>2021.1</td><td>2.4.2</td></tr><tr><td>Spring Cloud Hoxton.SR9</td><td>2.2.6.RELEASE</td><td>2.3.2.RELEASE</td></tr><tr><td>Spring Cloud Hoxton.SR3</td><td>2.2.1.RELEASE</td><td>2.2.5.RELEASE</td></tr><tr><td>Spring Cloud Hoxton.RELEASE</td><td>2.2.0.RELEASE</td><td>2.2.X.RELEASE</td></tr></tbody></table><p>æ ¹æ®ç‰ˆæœ¬åŒ¹é…è¡¨æ ¼ï¼Œæ¨èé€‰æ‹©ç»è¿‡å…¼å®¹æ€§æµ‹è¯•çš„ç¨³å®šç‰ˆæœ¬ç»„åˆã€‚ä¾‹å¦‚ï¼Œåœ¨æ­¤é¡¹ç›®ä¸­ï¼Œé€‰ç”¨çš„ç‰ˆæœ¬ç»„åˆä¸ºï¼šSpring Cloud 2020.0.1ã€Spring Cloud Alibaba 2021.1 å’Œ Spring Boot 2.4.2 ä½œä¸ºå®æˆ˜é¡¹ç›®çš„ä¾èµ–ç‰ˆæœ¬ã€‚</p><p>é¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„é¡¶å±‚ <code>pom.xml</code> ä¸­å£°æ˜ Spring Cloud å’Œ Spring Cloud Alibaba çš„ç‰ˆæœ¬å·ï¼Œç¡®ä¿ä¸‹å±‚æ¨¡å—èƒ½å¤Ÿç»§æ‰¿æ­£ç¡®çš„ç‰ˆæœ¬ã€‚</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2020.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2021.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- çœç•¥éƒ¨åˆ†ä»£ç  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œåœ¨éœ€è¦é›†æˆ Nacos çš„æ¨¡å—ï¼Œæ¯”å¦‚ <code>coupon-template-impl</code> å’Œ <code>coupon-calculation-impl</code>ï¼Œå¼•å…¥å¦‚ä¸‹ä¾èµ–é¡¹ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äºå·²åœ¨çˆ¶çº§ <code>pom.xml</code> ä¸­å®šä¹‰äº†ç‰ˆæœ¬ç®¡ç†ï¼Œå­æ¨¡å—æ— éœ€å†æŒ‡å®šç‰ˆæœ¬å·ï¼ŒMaven ä¼šè‡ªåŠ¨è§£æé€‚åˆçš„ç‰ˆæœ¬ã€‚</p><p>åœ¨ä¾èµ–é¡¹æ·»åŠ å®Œæ¯•åï¼Œé€šè¿‡ç®€å•çš„é…ç½®ï¼Œå³å¯å¯ç”¨ Nacos çš„æœåŠ¡æ³¨å†ŒåŠŸèƒ½ã€‚Nacos åˆ©ç”¨ Spring Boot çš„è‡ªåŠ¨è£…é…ï¼ˆauto configurationï¼‰æœºåˆ¶ï¼Œè‡ªåŠ¨åŠ è½½é…ç½®é¡¹å¹¶å®ŒæˆæœåŠ¡æ³¨å†Œã€‚</p><p>Spring Cloud çš„ç»„ä»¶éƒ½å¹¿æ³›ä½¿ç”¨äº†è‡ªåŠ¨è£…é…æœºåˆ¶ï¼Œè¿™ä¸ºç»„ä»¶çš„é›†æˆæä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚äº†è§£è¿™ä¸€æœºåˆ¶çš„åº•å±‚åŸç†ï¼Œä¸ä»…æœ‰åŠ©äºæ·±å…¥ç†è§£ç»„ä»¶çš„å¯åŠ¨è¿‡ç¨‹ï¼Œè€Œä¸”ä¸ºå°†æ¥å¯èƒ½çš„è‡ªå®šä¹‰ç»„ä»¶å¼€å‘æä¾›äº†æ¨¡å¼å€Ÿé‰´ã€‚</p><p>åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥æ¢è®¨ Nacos è‡ªåŠ¨è£…é…å™¨çš„å·¥ä½œåŸç†å’Œç»†èŠ‚ï¼Œä¸ºä½ æ­å¼€ Spring Cloud ç»„ä»¶å¯åŠ¨çš„ç¥ç§˜é¢çº±ã€‚</p><h3 id="_3-2-nacos-è‡ªåŠ¨è£…é…åŸç†" tabindex="-1"><a class="header-anchor" href="#_3-2-nacos-è‡ªåŠ¨è£…é…åŸç†" aria-hidden="true">#</a> 3.2 Nacos è‡ªåŠ¨è£…é…åŸç†</h3><p>éšç€ Spring Cloud çš„æ¼”è¿›ï¼Œæˆ‘ä»¬å·²ä¸å†éœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šæ˜¾å¼æ·»åŠ  <code>@EnableDiscoveryClient</code> æ³¨è§£æ¥æ¿€æ´»æœåŠ¡æ²»ç†åŠŸèƒ½ã€‚åœ¨è¾ƒæ–°çš„ç‰ˆæœ¬ä¸­ï¼Œä»…é€šè¿‡é…ç½®é¡¹ï¼Œæˆ‘ä»¬ä¾¿å¯è½»æ¾å¼€å¯ Nacos çš„æœåŠ¡æ²»ç†ã€‚è¿™ç§ç®€åŒ–æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼ŸèƒŒåçš„ç§˜å¯†åœ¨äº Spring Framework çš„è‡ªåŠ¨è£…é…æœºåˆ¶ã€‚</p><p>å½“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åŒ…å« Nacos çš„ä¾èµ–æ—¶ï¼Œç›¸å…³çš„è‡ªåŠ¨è£…é…å™¨ä¹Ÿéšä¹‹åŠ å…¥ï¼Œè´Ÿè´£åœ¨å¯åŠ¨é˜¶æ®µåŠ è½½é…ç½®å¹¶æ¿€æ´» Nacos çš„æ ¸å¿ƒåŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå…³é”®çš„è‡ªåŠ¨è£…é…å™¨åŠå…¶èŒè´£ï¼š</p><ul><li><code>NacosDiscoveryAutoConfiguration</code>ï¼šè´Ÿè´£æœåŠ¡å‘ç°åŠŸèƒ½ï¼Œå®ƒè¯»å–é…ç½®é¡¹å¹¶åˆå§‹åŒ– <code>NacosServiceDiscovery</code> ç±»ä»¥å®ç°æœåŠ¡å‘ç°ã€‚</li><li><code>NacosServiceAutoConfiguration</code>ï¼šè´Ÿè´£å®ä¾‹åŒ– <code>NacosServiceManager</code>ï¼Œé€šè¿‡æ­¤ç±»å¯è·å–æœåŠ¡åˆ—è¡¨ç­‰ä¿¡æ¯ã€‚</li><li><code>NacosServiceRegistryAutoConfiguration</code>ï¼šå¤„ç†æœåŠ¡æ³¨å†Œç›¸å…³é…ç½®ã€‚</li></ul><p>ä»¥ <code>NacosDiscoveryAutoConfiguration</code> ä¸ºä¾‹ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£å…¶å·¥ä½œåŸç†ã€‚è¯·çœ‹ä»¥ä¸‹ç®€åŒ–åçš„æºç æ³¨é‡Šï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnDiscoveryEnabled</span> <span class="token comment">// å½“ spring.cloud.discovery.enabled=true æ—¶ç”Ÿæ•ˆ</span>
<span class="token annotation punctuation">@ConditionalOnNacosDiscoveryEnabled</span> <span class="token comment">// å½“ spring.cloud.nacos.discovery.enabled=true æ—¶ç”Ÿæ•ˆ</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NacosDiscoveryAutoConfiguration</span> <span class="token punctuation">{</span>

     <span class="token comment">// è¯»å– Nacos æ‰€æœ‰é…ç½®é¡¹å¹¶å°è£…åˆ° NacosDiscoveryProperties</span>
	<span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
	<span class="token keyword">public</span> <span class="token class-name">NacosDiscoveryProperties</span> <span class="token function">nacosProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NacosDiscoveryProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

     <span class="token comment">// å£°æ˜æœåŠ¡å‘ç°çš„åŠŸèƒ½ç±» NacosServiceDiscovery</span>
	<span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
	<span class="token keyword">public</span> <span class="token class-name">NacosServiceDiscovery</span> <span class="token function">nacosServiceDiscovery</span><span class="token punctuation">(</span>
			<span class="token class-name">NacosDiscoveryProperties</span> discoveryProperties<span class="token punctuation">,</span>
			<span class="token class-name">NacosServiceManager</span> nacosServiceManager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NacosServiceDiscovery</span><span class="token punctuation">(</span>discoveryProperties<span class="token punctuation">,</span> nacosServiceManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯è§ï¼Œ<code>NacosDiscoveryAutoConfiguration</code> çš„æ¿€æ´»ä¾èµ–äºä¸¤ä¸ªæ¡ä»¶çš„æ»¡è¶³ï¼š</p><ol><li><code>spring.cloud.discovery.enabled=true</code></li><li><code>spring.cloud.nacos.discovery.enabled=true</code></li></ol><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼•å…¥ Nacos ä¾èµ–åï¼Œè¿™ä¸¤ä¸ªå‚æ•°å·²é¢„è®¾ä¸º <code>true</code>ã€‚é™¤éå¼€å‘è€…ä¸»åŠ¨ç¦ç”¨ï¼Œå¦åˆ™è¿™äº›è‡ªåŠ¨è£…é…å™¨å°†é»˜è®¤è¢«æ¿€æ´»ã€‚</p><p><code>NacosDiscoveryAutoConfiguration</code> ç±»ä¸­çš„ <code>nacosProperties</code> æ–¹æ³•æ‰¿æ‹…ç€è¯»å–å’Œå°è£… Nacos é…ç½®é¡¹çš„é‡ä»»ã€‚é€šè¿‡ <code>@ConfigurationProperties</code> æ³¨è§£ï¼Œå®ƒå°† <code>spring.cloud.nacos.discovery</code> ä¸‹çš„é…ç½®é¡¹ç»‘å®šåˆ° <code>NacosDiscoveryProperties</code> å¯¹è±¡çš„å±æ€§ã€‚</p><p>æºç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;spring.cloud.nacos.discovery&quot;</span><span class="token punctuation">)</span> <span class="token comment">// å®šä¹‰é…ç½®é¡¹çš„è¯»å–è·¯å¾„</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NacosDiscoveryProperties</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç±»å±æ€§ä¸é…ç½®é¡¹æ˜ å°„ï¼ˆçœç•¥å…·ä½“å±æ€§ï¼‰</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§è®¾è®¡ä½¿å¾—åœ¨åº”ç”¨çš„å…¶ä»–éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä»…éœ€æ³¨å…¥ <code>NacosDiscoveryProperties</code> å¯¹è±¡ï¼Œä¾¿å¯ä¾¿æ·åœ°è®¿é—® Nacos çš„å„é¡¹é…ç½®å‚æ•°ï¼Œä»è€Œå®ç°äº†é…ç½®çš„é›†ä¸­ç®¡ç†å’Œé«˜æ•ˆåˆ©ç”¨ã€‚</p><p><code>nacosServiceDiscovery</code> æ–¹æ³•çš„æ ¸å¿ƒåœ¨äºå®ƒå£°æ˜çš„ <code>NacosServiceDiscovery</code> ç±»ã€‚è¿™ä¸ªç±»å°è£…äº†æœåŠ¡å‘ç°çš„æ ¸å¿ƒé€»è¾‘ï¼Œå¦‚æ ¹æ®æœåŠ¡æ ‡è¯†è·å–å·²æ³¨å†Œçš„æœåŠ¡å®ä¾‹åˆ—è¡¨ï¼Œæˆ–æ˜¯è·å–æ‰€æœ‰æœåŠ¡çš„åç§°ã€‚</p><p>æºç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NacosServiceDiscovery</span> <span class="token punctuation">{</span>
       <span class="token comment">// Nacos é…ç½®é¡¹</span>
  	<span class="token keyword">private</span> <span class="token class-name">NacosDiscoveryProperties</span> discoveryProperties<span class="token punctuation">;</span>
       <span class="token comment">// æœåŠ¡æ²»ç†æ ¸å¿ƒç±»</span>
	  <span class="token keyword">private</span> <span class="token class-name">NacosServiceManager</span> nacosServiceManager<span class="token punctuation">;</span>
  
       <span class="token comment">// æ ¹æ®æœåŠ¡æ ‡è¯†ï¼ˆåç§°ï¼‰è·å–æœåŠ¡å®ä¾‹</span>
       <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> <span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token class-name">String</span> serviceId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NacosException</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> group <span class="token operator">=</span> discoveryProperties<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Instance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> <span class="token function">namingService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectInstances</span><span class="token punctuation">(</span>serviceId<span class="token punctuation">,</span> group<span class="token punctuation">,</span>
                <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">hostToServiceInstanceList</span><span class="token punctuation">(</span>instances<span class="token punctuation">,</span> serviceId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
  
         <span class="token comment">// è·å–æ‰€æœ‰æœåŠ¡çš„åç§°</span>
    	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NacosException</span> <span class="token punctuation">{</span>
              <span class="token class-name">String</span> group <span class="token operator">=</span> discoveryProperties<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token class-name">ListView</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> services <span class="token operator">=</span> <span class="token function">namingService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServicesOfServer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>
                  <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">,</span> group<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> services<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
     
      <span class="token comment">// çœç•¥å…¶ä»–ä»£ç ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>NacosServiceDiscovery</code> ç±»æä¾›çš„æ–¹æ³•å…è®¸æˆ‘ä»¬æ ¹æ®æœåŠ¡æ ‡è¯†ï¼ˆserviceIdï¼‰æŸ¥è¯¢å¯ç”¨æœåŠ¡å®ä¾‹ï¼Œè¿™å¯¹äºå‘èµ·è¿œç¨‹æœåŠ¡è°ƒç”¨è‡³å…³é‡è¦ã€‚</p><p>é€šè¿‡æŒæ¡ <code>NacosDiscoveryAutoConfiguration</code> çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç†è§£ Nacos åœ¨æœåŠ¡æ²»ç†æ–¹é¢çš„è‡ªåŠ¨è£…é…è¿‡ç¨‹ã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬åº”å½“è€ƒè™‘åœ¨é¡¹ç›®é…ç½®ä¸­æ·»åŠ é€‚å½“çš„ Nacos é…ç½®é¡¹ï¼Œä»¥ç¡®ä¿æœåŠ¡å‘ç°å’Œæ³¨å†Œçš„é¡ºç•…è¿›è¡Œã€‚</p><h3 id="_3-3-æ·»åŠ -nacos-é…ç½®é¡¹" tabindex="-1"><a class="header-anchor" href="#_3-3-æ·»åŠ -nacos-é…ç½®é¡¹" aria-hidden="true">#</a> 3.3 æ·»åŠ  Nacos é…ç½®é¡¹</h3><p>å¯¹äºæˆ‘ä»¬å³å°†æ”¹é€ çš„ <code>coupon-template-impl</code> æœåŠ¡ï¼Œå…³é”®çš„ä¸€æ­¥æ˜¯åœ¨ <code>application.properties</code> ä¸­é…ç½® Nacos æœåŠ¡æ²»ç†çš„ç›¸å…³å‚æ•°ã€‚è¿™äº›å‚æ•°ä½äº <code>spring.cloud.nacos</code> è·¯å¾„ä¸‹ï¼Œå®ƒä»¬å¯¹äºæœåŠ¡çš„æ³¨å†Œã€å‘ç°ã€å¥åº·æ£€æŸ¥ç­‰æ–¹é¢è‡³å…³é‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ Nacos é…ç½®å‚æ•°åŠå…¶è¯´æ˜ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">##########################################################################################################</span>
<span class="token comment"># æ³¨å†Œä¸­å¿ƒé…ç½®ï¼ˆNacosï¼‰</span>
<span class="token comment">##########################################################################################################</span>
<span class="token comment"># æ³¨å†Œä¸­å¿ƒåœ°å€ï¼Œå¯ä»¥é…ç½®å¤šä¸ªåœ°å€ï¼Œç”¨é€—å·åˆ†éš”</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">localhost:8848</span>
<span class="token comment"># æœåŠ¡åç§°ï¼ˆé»˜è®¤ä¸ºåº”ç”¨åç§°ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.service</span><span class="token punctuation">=</span><span class="token value attr-value">${spring.application.name}</span>
<span class="token comment"># å¿ƒè·³é—´éš”ï¼ˆå®¢æˆ·ç«¯ä¸»åŠ¨å‘é€å¿ƒè·³ç»™æœåŠ¡ç«¯çš„é—´éš”æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.heart-beat-interval</span><span class="token punctuation">=</span><span class="token value attr-value">5000</span>
<span class="token comment"># å¿ƒè·³è¶…æ—¶æ—¶é—´ï¼ˆå®¢æˆ·ç«¯ç­‰å¾…æœåŠ¡ç«¯å“åº”å¿ƒè·³çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼‰</span>
<span class="token comment"># æ³¨æ„ï¼šå¦‚æœå®¢æˆ·ç«¯åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°æœåŠ¡ç«¯çš„å“åº”ï¼Œåˆ™æœåŠ¡ç«¯å°†æœåŠ¡å®ä¾‹ä»æ³¨å†Œä¸­å¿ƒç§»é™¤ã€‚é»˜è®¤å€¼ä¸º 15 ç§’ã€‚</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.heart-beat-timeout</span><span class="token punctuation">=</span><span class="token value attr-value">15000</span>
<span class="token comment"># å…ƒæ•°æ®ï¼ˆå¯ä»¥ç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯æ³¨å†Œå…ƒæ•°æ®ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.metadata.mydata</span><span class="token punctuation">=</span><span class="token value attr-value">mydata</span>
<span class="token comment"># æ˜¯å¦åœ¨å¯åŠ¨æ—¶åŠ è½½æ³¨å†Œä¸­å¿ƒä¸­çš„æœåŠ¡åˆ—è¡¨</span>
<span class="token comment"># æ³¨æ„ï¼šæ¨èè®¾ç½®ä¸º falseï¼Œå› ä¸ºæœåŠ¡åˆ—è¡¨åœ¨å¯åŠ¨æ—¶å¯èƒ½è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œè¿™æ ·å®¢æˆ·ç«¯ä¼šä»æœ¬åœ°ç¼“å­˜ä¸­è·å–æœåŠ¡åˆ—è¡¨ï¼Œè€Œæ²¡æœ‰ä»æ³¨å†Œä¸­å¿ƒè·å–æœ€æ–°çš„æœåŠ¡åˆ—è¡¨ã€‚</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.naming-load-cache-at-start</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token comment"># å‘½åç©ºé—´ï¼ˆNacos é€šè¿‡å‘½åç©ºé—´æ¥å®ç°ç§Ÿæˆ·éš”ç¦»æˆ–ç¯å¢ƒéš”ç¦»ï¼ˆå¦‚ï¼šå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼‰ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.namespace</span><span class="token punctuation">=</span><span class="token value attr-value">dev</span>
<span class="token comment"># é›†ç¾¤åç§°ï¼ˆåˆ›å»ºä¸åŒçš„é›†ç¾¤æ—¶ï¼Œå¯ä»¥ç»™é›†ç¾¤èµ·ä¸ªåå­—ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.cluster-name</span><span class="token punctuation">=</span><span class="token value attr-value">Cluster-A</span>
<span class="token comment"># æœåŠ¡åˆ†ç»„ï¼ˆç”¨äºæœåŠ¡éš”ç¦»ï¼Œå¯ä¸ºæ¯ä¸ªæœåŠ¡è®¾ç½®ä¸åŒçš„åˆ†ç»„ï¼‰</span>
<span class="token comment"># æ³¨æ„ï¼šå¦‚æœä¸¤ä¸ªæœåŠ¡å­˜åœ¨ä¸Šä¸‹æ¸¸è°ƒç”¨å…³ç³»ï¼Œåˆ™å¿…é¡»é…ç½®ç›¸åŒçš„åˆ†ç»„ï¼Œå¦åˆ™è°ƒç”¨ä¼šå¤±è´¥ã€‚ï¼ˆä¸Šæ¸¸ï¼šè°ƒç”¨æ–¹ï¼Œä¸‹æ¸¸ï¼šè¢«è°ƒç”¨æ–¹ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.group</span><span class="token punctuation">=</span><span class="token value attr-value">myGroup</span>
<span class="token comment"># æ˜¯å¦æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼ˆå¦‚æœåªæ˜¯ä½œä¸ºä¸Šæ¸¸æœåŠ¡ï¼Œåˆ™è®¾ç½®ä¸º falseï¼Œä»è€Œå‡å°‘æ³¨å†Œä¸­å¿ƒçš„è´Ÿæ‹…å’Œç½‘ç»œå¼€é”€ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.register-enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token comment"># æ˜¯å¦å¯ç”¨æœåŠ¡ç›‘å¬ï¼ˆç±»ä¼¼é•¿è¿æ¥ç›‘å¬ Nacos æœåŠ¡ç«¯çš„é…ç½®å˜åŒ–ï¼Œå½“é…ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ„ŸçŸ¥åˆ°ï¼Œä»è€Œå®ç°åŠ¨æ€åˆ·æ–°é…ç½®ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.watch.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token comment"># ç›‘å¬å»¶è¿Ÿï¼ˆç›‘å¬æœåŠ¡ç«¯é…ç½®å˜åŒ–çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼‰</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.watch-delay</span><span class="token punctuation">=</span><span class="token value attr-value">3000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç†è§£å¹¶æ­£ç¡®é…ç½® Nacos çš„å‚æ•°å¯¹äºç¡®ä¿æœåŠ¡æ²»ç†çš„å¹³ç¨³è¿è¡Œè‡³å…³é‡è¦ã€‚ä»¥ä¸‹è¡¨æ ¼è¯¦ç»†ä»‹ç»äº†æ¯ä¸ªé…ç½®é¡¹çš„ç”¨é€”å’Œåº”ç”¨åœºæ™¯ï¼š</p><table><thead><tr><th>é…ç½®é¡¹</th><th>æè¿°</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>server-addr</td><td>æŒ‡å®š Nacos æœåŠ¡å™¨åœ°å€ã€‚</td><td>æœåŠ¡æ³¨å†Œã€çŠ¶æ€åŒæ­¥ã€æœåŠ¡å‘ç°ç­‰ï¼Œé€šå¸¸é…ç½®ä¸º Nacos é›†ç¾¤çš„ VIPã€‚æ‰€è°“ VIP å°±æ˜¯è™šæ‹Ÿ IP åœ°å€ï¼Œè™šæ‹Ÿ IP èƒŒåæŒ‡å‘äº† Nacos æœåŠ¡å™¨é›†ç¾¤ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ Keepalived ç»“åˆ Nacos é›†ç¾¤æ¨¡å¼å®ç°è™šæ‹Ÿ IP çš„é…ç½®ã€‚</td></tr><tr><td>service</td><td>å½“å‰æœåŠ¡æ³¨å†Œåˆ° Nacos çš„æœåŠ¡åç§°ã€‚</td><td>æœåŠ¡è¯†åˆ«ï¼Œé»˜è®¤ä½¿ç”¨ <code>spring.application.name</code>ã€‚</td></tr><tr><td>heart-beat-interval</td><td>å®šä¹‰æœåŠ¡å‘ Nacos å‘é€å¿ƒè·³çš„é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚</td><td>ç»´æŒæœåŠ¡å®ä¾‹çš„å­˜æ´»çŠ¶æ€ï¼Œé¿å…è¢«é”™è¯¯å‰”é™¤ã€‚å¿ƒè·³åŒ…æ˜¯ Client å‘Šè¯‰ Nacos æœåŠ¡å™¨è‡ªå·±è¿˜æ´»ç€çš„å”¯ä¸€è¯æ®ã€‚</td></tr><tr><td>heart-beat-timeout</td><td>å¦‚æœ Nacos åœ¨æ­¤æ—¶é—´å†…æœªæ”¶åˆ°å¿ƒè·³ï¼Œåˆ™è®¤ä¸ºæœåŠ¡ä¸å¯ç”¨ï¼ˆæ¯«ç§’ï¼‰ã€‚</td><td>ç¡®å®šæœåŠ¡å®ä¾‹å¥åº·æ£€æµ‹çš„è¶…æ—¶ç•Œé™ã€‚heart-beat-timeoutï¼ˆé»˜è®¤ 15sï¼‰ä¸€å®šè¦æ¯” heart-beat-interval å¤§ï¼Œå¦åˆ™åœ¨æ³¨å†ŒæœåŠ¡çš„æ—¶å€™ä¼šæŠ›å‡ºä¸€ä¸ª NacosException å¼‚å¸¸ã€‚</td></tr><tr><td>metadata</td><td>æœåŠ¡æ³¨å†Œæ—¶é™„å¸¦çš„è‡ªå®šä¹‰å…ƒæ•°æ®ã€‚</td><td>è‡ªå®šä¹‰æœåŠ¡æ²»ç†ç­–ç•¥ï¼Œå¦‚å®ç°é‡‘ä¸é›€éƒ¨ç½²ç­‰é«˜çº§åŠŸèƒ½ã€‚</td></tr><tr><td>namespace</td><td>ç”¨äºé€»è¾‘éš”ç¦»çš„å‘½åç©ºé—´ï¼Œå¦‚ä¸åŒç¯å¢ƒé—´éš”ç¦»ã€‚</td><td>å®ç°å¤šç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰æˆ–å¤šç§Ÿæˆ·çš„æœåŠ¡æ²»ç†ã€‚</td></tr><tr><td>group</td><td>æœåŠ¡åˆ†ç»„ï¼Œç”¨äºè¿›ä¸€æ­¥éš”ç¦»æœåŠ¡ã€‚</td><td>åŒä¸€ namespace åŒä¸€ group çš„æœåŠ¡å¯ä»¥äº’ç›¸è°ƒç”¨ï¼Œä¸åŒåˆ†ç»„åˆ™éš”ç¦»ã€‚å¦‚æœå½“å‰æœåŠ¡æ²¡æœ‰æŒ‡å®š groupï¼ŒNacos ä¼šé»˜è®¤å°†å…¶åˆ†é…åˆ° â€œdefault_groupâ€ ä¸­ã€‚</td></tr></tbody></table><blockquote><p>âš ï¸ æ³¨æ„ï¼šå¿ƒè·³é—´éš”ï¼ˆ<code>heart-beat-interval</code>ï¼‰å¿…é¡»å°äºå¿ƒè·³è¶…æ—¶æ—¶é—´ï¼ˆ<code>heart-beat-timeout</code>ï¼‰ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æœåŠ¡å®ä¾‹è¢«é”™è¯¯åœ°ä»æ³¨å†Œä¸­å¿ƒç§»é™¤ã€‚å…ƒæ•°æ®ï¼ˆ<code>metadata</code>ï¼‰æä¾›äº†çµæ´»çš„è‡ªå®šä¹‰é…ç½®ï¼Œå¯ç”¨äºæ»¡è¶³ç‰¹å®šåœºæ™¯çš„éœ€æ±‚ï¼Œä¾‹å¦‚åœ¨æœåŠ¡æ³¨å†Œæ—¶æ ‡æ³¨æœåŠ¡ç‰ˆæœ¬ä»¥å®ç°è“ç»¿éƒ¨ç½²ã€‚ï¼ˆä¸ºäº†æ›´å…¨é¢åœ°äº†è§£ Nacos çš„é…ç½®é€‰é¡¹ï¼Œå»ºè®®æŸ¥é˜… <a href="https://github.com/alibaba/spring-cloud-alibaba" target="_blank" rel="noopener noreferrer">Nacos çš„å®˜æ–¹ GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æˆ–è®¿é—® <a href="https://nacos.io/" target="_blank" rel="noopener noreferrer">Nacos é¡¹ç›®ä¸»é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è·å–æœ€æ–°ä¿¡æ¯ã€‚ï¼‰</p></blockquote><p>åœ¨ä¸Šé¢ Nacos çš„é…ç½®ä¸­ï¼Œ<code>Namespace</code> å’Œ <code>Group</code> æ˜¯ä¸¤ä¸ªç»å¸¸è¢«æåŠä¸”è‡³å…³é‡è¦çš„å‚æ•°ã€‚è™½ç„¶å®ƒä»¬åœ¨åŠŸèƒ½ä¸Šæœ‰æ‰€é‡å ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­å„è‡ªæ‰®æ¼”ç€ç‹¬ç‰¹çš„è§’è‰²ã€‚</p><p><strong>Namespaceï¼š</strong> ä¸»è¦ç”¨äºé€»è¾‘éš”ç¦»ï¼Œå…·ä½“åº”ç”¨å¦‚ä¸‹ï¼š</p><ul><li><strong>ç¯å¢ƒéš”ç¦»</strong>ï¼šé€šè¿‡è®¾ç½®ä¸åŒçš„å‘½åç©ºé—´ï¼ˆå¦‚ <code>production</code>, <code>pre-production</code>, <code>dev</code>ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æœåŠ¡ä»…åœ¨ç›¸åŒç¯å¢ƒçš„å‘½åç©ºé—´ä¸­å‘ç°å¹¶è°ƒç”¨å½¼æ­¤ï¼Œä»è€Œæœ‰æ•ˆåˆ†éš”å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒã€‚</li><li><strong>å¤šç§Ÿæˆ·éš”ç¦»</strong>ï¼šåœ¨å¤šç§Ÿæˆ·æ¶æ„ä¸­ï¼Œæ¯ä¸ªç§Ÿæˆ·è¢«åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„ <code>Namespace</code>ï¼Œä¿éšœäº†ä¸åŒç§Ÿæˆ·ä¹‹é—´çš„æœåŠ¡éš”ç¦»å’Œæ•°æ®éš”ç¦»ã€‚</li></ul><p><strong>Groupï¼š</strong> åˆ™åœ¨æœåŠ¡æ²»ç†ä¸­ç”¨å¾—æ›´ä¸ºçµæ´»ï¼Œåº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li><strong>åŒç§Ÿæˆ·ç¯å¢ƒéš”ç¦»</strong>ï¼šåœ¨å·²é€šè¿‡ <code>Namespace</code> å®ç°ç§Ÿæˆ·éš”ç¦»çš„åŸºç¡€ä¸Šï¼Œ<code>Group</code> å¯ç”¨äºè¿›ä¸€æ­¥éš”ç¦»åŒä¸€ç§Ÿæˆ·å†…çš„ä¸åŒç¯å¢ƒã€‚</li><li><strong>çº¿ä¸Šæµ‹è¯•éš”ç¦»</strong>ï¼šé€šè¿‡å°†ä¸Šä¸‹æ¸¸æœåŠ¡åˆ†é…è‡³ç‰¹å®šçš„ <code>Group</code>ï¼ˆå¦‚ <code>group-A</code>ï¼‰ï¼Œå¯ä»¥å®ç°çº¿ä¸Šæµ‹è¯•è€Œä¸å¹²æ‰°æ­£å¸¸çš„ç”¨æˆ·æµé‡ã€‚</li><li><strong>ç‰©ç†å•å…ƒå°é—­</strong>ï¼šåœ¨å¤šæœºæˆ¿éƒ¨ç½²çš„æƒ…å†µä¸‹ï¼Œå°†åŒä¸€ç‰©ç†å•å…ƒçš„æœåŠ¡åˆ†é…åˆ°åŒä¸€ä¸ª <code>Group</code>ï¼Œå¯ä»¥ä¼˜åŒ–è°ƒç”¨é€Ÿåº¦ï¼Œå®ç°å•å…ƒå†…æœåŠ¡è°ƒç”¨çš„å°é—­æ€§ã€‚</li></ul><p>ç†è§£äº† <code>Namespace</code> å’Œ <code>Group</code> çš„å…·ä½“ç”¨é€”åï¼Œä¸‹ä¸€æ­¥æ˜¯å¯åŠ¨ Nacos æ³¨å†Œä¸­å¿ƒå¹¶å°†æœåŠ¡ï¼ˆå¦‚ <code>coupon-template-serv</code> å’Œ <code>coupon-calculation-serv</code>ï¼‰æ³¨å†Œè‡³ Nacosï¼Œä»¥éªŒè¯æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°çš„åŠŸèƒ½ã€‚</p><h3 id="_3-4-éªŒè¯-nacos-æœåŠ¡æ³¨å†ŒåŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_3-4-éªŒè¯-nacos-æœåŠ¡æ³¨å†ŒåŠŸèƒ½" aria-hidden="true">#</a> 3.4 éªŒè¯ Nacos æœåŠ¡æ³¨å†ŒåŠŸèƒ½</h3><p>ä¸ºäº†ç¡®ä¿ Nacos çš„æœåŠ¡æ³¨å†ŒåŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œå’ŒéªŒè¯ï¼š</p><ol><li><p><strong>å¯åŠ¨ Nacos æœåŠ¡å™¨</strong>ï¼šå¯ä»¥é€‰æ‹©å•æœºæ¨¡å¼æˆ–é›†ç¾¤æ¨¡å¼å¯åŠ¨ Nacos æœåŠ¡å™¨ï¼Œå…·ä½“é€‰æ‹©å–å†³äºä½ çš„éœ€æ±‚å’Œèµ„æºã€‚</p></li><li><p><strong>åˆ›å»ºå‘½åç©ºé—´</strong>ï¼šåœ¨ Nacos çš„ UI ä¸­ï¼Œåˆ›å»º <code>production</code>ã€<code>pre-production</code> å’Œ <code>dev</code> å‘½åç©ºé—´ï¼Œåˆ†åˆ«ä»£è¡¨ç”Ÿäº§ã€é¢„å‘å’Œå¼€å‘ç¯å¢ƒã€‚ç¡®ä¿è¿™äº›å‘½åç©ºé—´çš„ ID ä¸é¡¹ç›®é…ç½®ä¸­çš„ <code>namespace</code> å±æ€§ä¿æŒä¸€è‡´ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-08-110059.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p><strong>æœåŠ¡å¯åŠ¨ä¸æ³¨å†Œ</strong>ï¼šåœ¨æœ¬åœ°å¯åŠ¨ <code>coupon-template-impl</code> å’Œ <code>coupon-calculation-impl</code> æœåŠ¡ï¼Œå¹¶æ£€æŸ¥å¯åŠ¨æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ã€‚å¦‚æœæœåŠ¡å¯åŠ¨æ­£å¸¸ï¼Œä½ åº”è¯¥èƒ½å¤Ÿåœ¨ Nacos æœåŠ¡åˆ—è¡¨çš„ç›¸åº”å‘½åç©ºé—´æ ‡ç­¾ä¸‹çœ‹åˆ°è¿™ä¸¤ä¸ªæœåŠ¡ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-08-111118.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ol><hr><!----><ul><li>å¦‚æœæœåŠ¡æœªèƒ½æ³¨å†Œï¼Œé¦–å…ˆæ£€æŸ¥å¯åŠ¨æ—¥å¿—ä¸­æ˜¯å¦æœ‰æ³¨å†Œè¯·æ±‚è¾“å‡ºã€‚</li><li>æ£€æŸ¥å¼‚å¸¸æ—¥å¿—ï¼Œç¡®å®šé—®é¢˜æ˜¯å¦å‡ºè‡ªç½‘ç»œé…ç½®æˆ–å‚æ•°è®¾ç½®ã€‚</li><li>ç¡®è®¤æ˜¯å¦æ‰€æœ‰ Nacos æœåŠ¡å™¨å®ä¾‹éƒ½é€šè¿‡é›†ç¾¤æ¨¡å¼åŒæ­¥æ³¨å†Œè¡¨ã€‚</li><li>æ£€æŸ¥ä½ çš„æœåŠ¡æ˜¯å¦æ³¨å†Œåœ¨æ­£ç¡®çš„å‘½åç©ºé—´ä¸‹ã€‚</li></ul><p>åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæ³¨æ„ä»¥ä¸‹å¸¸è§é—®é¢˜åŠå…¶è§£å†³æ–¹æ³•ï¼š</p><ul><li><strong>æœåŠ¡æœªæ³¨å†Œ</strong>ï¼šéªŒè¯æ˜¯å¦å¼•å…¥äº† Nacos ä¾èµ–å¹¶ä¸”æœªæ‰‹åŠ¨å…³é—­æ³¨å†ŒåŠŸèƒ½ã€‚</li><li><strong>å¼‚å¸¸ä¿¡æ¯</strong>ï¼šé€ä¸ªåˆ†æå¼‚å¸¸æ—¥å¿—ï¼Œæ‰¾å‡ºé—®é¢˜åŸå› ï¼Œå¦‚æœåŠ¡å™¨åœ°å€é…ç½®é”™è¯¯ã€‚</li><li><strong>æœåŠ¡ä¸å¯è§</strong>ï¼šå¦‚æœä½¿ç”¨äº†å¤šä¸ª Nacos å®ä¾‹ï¼Œç¡®è®¤å®ƒä»¬æ˜¯å¦åœ¨é›†ç¾¤æ¨¡å¼ä¸‹åŒæ­¥ã€‚</li><li><strong>å‘½åç©ºé—´é—®é¢˜</strong>ï¼šæœåŠ¡å°†ä»…å‡ºç°åœ¨å…¶æ³¨å†Œçš„å‘½åç©ºé—´ä¸‹ï¼Œç¡®è®¤ä½ æŸ¥çœ‹äº†æ­£ç¡®çš„å‘½åç©ºé—´ã€‚</li></ul><p>é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œä½ å°†èƒ½å¤Ÿå®ŒæˆæœåŠ¡æ³¨å†Œï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œæœ‰æ•ˆçš„é—®é¢˜æ’æŸ¥ã€‚</p><h3 id="_3-5-é˜¶æ®µå°ç»“" tabindex="-1"><a class="header-anchor" href="#_3-5-é˜¶æ®µå°ç»“" aria-hidden="true">#</a> 3.5 é˜¶æ®µå°ç»“</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†æœåŠ¡æ³¨å†ŒåŠŸèƒ½ï¼Œå°† <code>coupon-template-serv</code> å’Œ <code>coupon-calculation-serv</code> æœåŠ¡é›†æˆåˆ° Nacos Server ä¸­ã€‚æˆ‘ä»¬ä»¥ <code>NacosDiscoveryAutoConfiguration</code> ä¸ºå‡ºå‘ç‚¹ï¼Œæ¢ç©¶äº† Nacos è‡ªåŠ¨è£…é…å™¨çš„å†…åœ¨æœºåˆ¶ï¼Œè¿™ä¸ä»…å±•ç¤ºäº† Nacos çš„é›†æˆè¿‡ç¨‹ï¼Œä¹Ÿæ­ç¤ºäº† Spring Cloud ç»„ä»¶æ™®éé‡‡ç”¨çš„è‡ªåŠ¨è£…é…ç­–ç•¥ã€‚</p><p>è‡ªåŠ¨è£…é…å™¨åœ¨ Spring ç”Ÿæ€ä¸­æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œè®¸å¤š Spring Cloud ç»„ä»¶éƒ½é‡‡ç”¨æ­¤ç­–ç•¥æ— ç¼é›†æˆè¿›é¡¹ç›®ã€‚è¿™ç§æ¨¡å¼ä¸ä»…æ˜¯å­¦ä¹ ç°æœ‰ç»„ä»¶çš„æ¢çº½ï¼Œä¹Ÿæ˜¯è®¾è®¡æ–°ç»„ä»¶æ—¶å€¼å¾—å€Ÿé‰´çš„å…¸èŒƒã€‚é€è¿‡è¿™äº›è‡ªåŠ¨è£…é…å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®è§‚ä¸ŠæŠŠæ¡ç»„ä»¶çš„ç»“æ„å’ŒåŠŸèƒ½ï¼Œå½¢æˆå…¨é¢çš„ç†è§£ã€‚</p><p>æ·±å…¥å­¦ä¹ ä¸€ä¸ªæ¡†æ¶ä¸ä»…è¦ä¼šç”¨å®ƒï¼Œæ›´è¦ç†è§£å…¶å·¥ä½œåŸç†ã€‚â€œçŸ¥å…¶ç„¶ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶â€ï¼Œæ˜¯æŠ€æœ¯ç²¾è¿›çš„æ­£ç¡®è·¯å¾„ï¼Œè€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæºç å§‹ç»ˆæ˜¯æœ€ä½³çš„æŒ‡å¯¼è€å¸ˆã€‚</p><blockquote><p>æ¢ç´¢ä¸å®è·µï¼š</p><p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™æµ‹è¯•ä½ å¯¹è‡ªåŠ¨è£…é…å™¨å’Œ Spring Cloud ç”Ÿæ€çš„ç†è§£äº†ã€‚å½“æœåŠ¡å…³é—­æ—¶ï¼ŒæœåŠ¡çš„ä¸‹çº¿æŒ‡ä»¤æ˜¯å¦‚ä½•è¢«è§¦å‘çš„å‘¢ï¼Ÿæˆ‘é‚€è¯·ä½ ä¸ä¾èµ–ç½‘ç»œæœç´¢ï¼Œè€Œæ˜¯é€šè¿‡è¿½è¸ªè‡ªåŠ¨è£…é…å™¨çš„çº¿ç´¢å»æ·±å…¥æºç ï¼ŒæŒ‘æˆ˜è‡ªå·±çš„æºç é˜…è¯»å’Œç†è§£èƒ½åŠ›ã€‚è¿™æ ·çš„å®è·µå°†åŠ æ·±ä½ å¯¹ Spring Cloud ç»„ä»¶å·¥ä½œæµç¨‹çš„æ´å¯Ÿï¼Œé”»ç‚¼ä½ è§£å†³é—®é¢˜çš„æœ¬é¢†ã€‚</p></blockquote><h2 id="_4-å®æ–½æœåŠ¡å‘ç°ä¸è¿œç¨‹è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_4-å®æ–½æœåŠ¡å‘ç°ä¸è¿œç¨‹è°ƒç”¨" aria-hidden="true">#</a> 4.å®æ–½æœåŠ¡å‘ç°ä¸è¿œç¨‹è°ƒç”¨</h2><p>ç»§ä¸Šä¸€èŠ‚å°† <code>coupon-template-serv</code> å’Œ <code>coupon-calculation-serv</code> æœåŠ¡æˆåŠŸæ³¨å†Œè‡³ Nacos Server åï¼Œæˆ‘ä»¬ç°åœ¨è½¬å‘å¦‚ä½•å®ç°æœåŠ¡é—´çš„ç›¸äº’è°ƒç”¨ã€‚è¿™äº›æœåŠ¡ç›®å‰ä½œä¸ºæœåŠ¡æä¾›è€…å­˜åœ¨ï¼Œç‹¬ç«‹æ— éœ€ç›¸äº’é€šä¿¡ã€‚ä½†ä¸ºäº†å®Œæˆä¸€ä¸ªå®Œæ•´çš„ä¸šåŠ¡æµç¨‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœåŠ¡æ¶ˆè´¹è€…æ¥è°ƒç”¨è¿™äº›æ³¨å†Œçš„æœåŠ¡ã€‚</p><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠ <code>coupon-customer-serv</code> æœåŠ¡è½¬åŒ–ä¸ºè¿™æ ·ä¸€ä¸ªæ¶ˆè´¹è€…ã€‚å®ƒçš„ä»»åŠ¡æ˜¯è°ƒç”¨ <code>coupon-template-serv</code> å’Œ <code>coupon-calculation-serv</code> æœåŠ¡ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ©ç”¨ Nacos çš„æœåŠ¡å‘ç°åŠŸèƒ½æ¥è·å–æœåŠ¡åˆ—è¡¨ï¼Œå¹¶å®ç°è¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚</p><p>æˆ‘ä»¬å°†è®¨è®ºå¦‚ä¸‹å†…å®¹ï¼š</p><ol><li><strong>æœåŠ¡å‘ç°çš„å®ç°</strong>ï¼šå¦‚ä½•é…ç½®å’Œä½¿ç”¨ Nacos çš„æœåŠ¡å‘ç°åŠŸèƒ½æ¥æ£€ç´¢æœåŠ¡åˆ—è¡¨ã€‚</li><li><strong>è¿œç¨‹è°ƒç”¨çš„æ‰§è¡Œ</strong>ï¼šå€ŸåŠ© Spring Webfluxï¼Œäº†è§£å¦‚ä½•å‘èµ·å¼‚æ­¥éé˜»å¡çš„è¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚</li><li><strong>æœåŠ¡æ²»ç†æ–¹æ¡ˆæ„å»º</strong>ï¼šå¦‚ä½•æ•´åˆä¸Šè¿°çŸ¥è¯†ç‚¹ï¼Œæ­å»ºä¸€å¥—é«˜æ•ˆçš„åŸºäº Nacos çš„æœåŠ¡æ²»ç†æ¶æ„ã€‚</li></ol><p>åœ¨æœ¬èŠ‚ç»“æŸæ—¶ï¼Œä¸ä»…èƒ½å¤ŸæŒæ¡æœåŠ¡æ¶ˆè´¹è€…çš„æ„å»ºæµç¨‹ï¼Œè¿˜èƒ½å¤Ÿæ·±å…¥ç†è§£æœåŠ¡æ²»ç†çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç¡®ä¿èƒ½å¤Ÿåœ¨ä»»ä½•éœ€è¦æœåŠ¡å‘ç°å’Œè¿œç¨‹è°ƒç”¨çš„åœºæ™¯ä¸‹ï¼Œè¿…é€Ÿè€Œæœ‰æ•ˆåœ°éƒ¨ç½²å’Œç®¡ç†æˆ‘ä»¬çš„å¾®æœåŠ¡ã€‚</p><h3 id="_4-1-é…ç½®-nacos-ä¾èµ–é¡¹" tabindex="-1"><a class="header-anchor" href="#_4-1-é…ç½®-nacos-ä¾èµ–é¡¹" aria-hidden="true">#</a> 4.1 é…ç½® Nacos ä¾èµ–é¡¹</h3><p>è¦å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡æ¶ˆè´¹è€… <code>coupon-customer-serv</code>ï¼Œç¬¬ä¸€æ­¥æ˜¯ç¡®ä¿é¡¹ç›®ä¸­åŒ…å«äº†å¿…è¦çš„ Nacos ä¾èµ–é¡¹ã€‚è¿™äº›ä¾èµ–é¡¹å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ Nacos æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ä»¥åŠå‘èµ·å“åº”å¼çš„ Web è¯·æ±‚ã€‚è¯·åœ¨ <code>coupon-customer-impl</code> å­æ¨¡å—çš„ <code>pom.xml</code> æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Nacos æœåŠ¡å‘ç°ç»„ä»¶ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- è´Ÿè½½å‡è¡¡ç»„ä»¶ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-loadbalancer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- webflux æœåŠ¡è°ƒç”¨ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-webflux<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>spring-cloud-starter-alibaba-nacos-discovery</code>ï¼šç”¨äºæœåŠ¡çš„æ³¨å†Œä¸å‘ç°ã€‚</li><li><code>spring-cloud-starter-loadbalancer</code>ï¼šSpring Cloud çš„è´Ÿè½½å‡è¡¡ç»„ä»¶ï¼Œæ›¿ä»£äº† Netflix Ribbonã€‚</li><li><code>spring-boot-starter-webflux</code>ï¼šSpring Boot çš„å“åº”å¼ç¼–ç¨‹æ¡†æ¶ï¼Œç”¨äºå®ç°å¼‚æ­¥çš„éé˜»å¡è¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚</li></ul><p>æ¥ç€ï¼Œç¡®ä¿é¡¹ç›®ç»“æ„æ¸…æ™°ä¸”æœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»åˆç†ã€‚å¯¹äº <code>coupon-customer-impl</code>ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li><p><strong>ç§»é™¤å®ç°å±‚ä¾èµ–</strong>ï¼šåˆ é™¤ <code>coupon-template-impl</code> å’Œ <code>coupon-calculation-impl</code> æ¨¡å—çš„ä¾èµ–é¡¹ã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-08-112645.png" style="zoom:33%;"></li><li><p><strong>å¢åŠ æ¥å£å±‚ä¾èµ–</strong>ï¼šæ·»åŠ  <code>coupon-template-api</code> å’Œ <code>coupon-calculation-api</code> æ¥å£å±‚çš„ä¾èµ–é¡¹ã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-08-112849.png" style="zoom:33%;"></li></ol><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æ˜ç¡®äº†æœåŠ¡ä¹‹é—´çš„è¾¹ç•Œï¼š<code>coupon-customer-serv</code> ä½œä¸ºç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œä¸ä¼šç›´æ¥åŒ…å«å…¶ä»–æœåŠ¡çš„å®ç°ä»£ç ï¼Œè€Œæ˜¯é€šè¿‡å®šä¹‰çš„æ¥å£ä¸å®ƒä»¬äº¤äº’ã€‚è¿™ç§æ¨¡å¼ä¸ä»…æœ‰åŠ©äºæœåŠ¡çš„ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œï¼Œä¹Ÿä¾¿äºæˆ‘ä»¬ä½¿ç”¨ Nacos å®ç°æœåŠ¡çš„å‘ç°å’Œè´Ÿè½½å‡è¡¡ã€‚</p><p>ä¸ºäº†è®© <code>coupon-customer-impl</code> æœåŠ¡èƒ½å¤Ÿå‘ç°å’Œè°ƒç”¨å…¶ä»–å¾®æœåŠ¡ï¼Œä½ è¿˜éœ€è¦è¿›è¡Œä»¥ä¸‹é…ç½®å’Œä»£ç è°ƒæ•´ï¼š</p><ol><li><p><strong>æ›´æ–° <code>application.properties</code> é…ç½®</strong>ï¼šå°† <code>coupon-template-impl</code> æœåŠ¡çš„ <code>spring.cloud.nacos</code> é…ç½®é¡¹å¤åˆ¶åˆ° <code>coupon-customer-impl</code> çš„ <code>application.properties</code> æ–‡ä»¶ä¸­ã€‚ç¡®ä¿æ›´æ”¹æœåŠ¡åç§°å‚æ•° <code>spring.cloud.nacos.discovery.service</code> ä¸º <code>coupon-customer-impl</code>ï¼Œä»¥åæ˜ æœåŠ¡æ¶ˆè´¹è€…çš„èº«ä»½ã€‚</p></li><li><p><strong>è§£å†³ç¼–è¯‘é”™è¯¯</strong>ï¼šåˆ é™¤å¯¹ <code>coupon-template-impl</code> å’Œ <code>coupon-calculation-impl</code> æœåŠ¡çš„æœ¬åœ°ä¾èµ–é¡¹åï¼Œ<code>CouponCustomerServiceImpl</code> ä¸­çš„ä»£ç éœ€è¦è°ƒæ•´ã€‚æ›¿æ¢åŸæœ‰çš„ <code>@Autowire</code> æˆ– <code>@Resource</code> æ³¨è§£æ–¹å¼ï¼Œè¯¥æ–¹å¼åŸç”¨äºæ³¨å…¥æœ¬åœ°æœåŠ¡å®ç°ï¼Œç°åœ¨å†æŸ¥çœ‹ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ã€‚</p><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-08-113441.png" style="zoom:50%;"></li></ol><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®ç°è¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚å¼•å…¥ WebClient å·¥å…·ï¼Œæ›¿ä»£æœ¬åœ°æœåŠ¡æ³¨å…¥çš„æ–¹å¼ï¼Œå®ç°å¯¹ <code>coupon-template-serv</code> å’Œ <code>coupon-calculation-serv</code> çš„è¿œç¨‹è°ƒç”¨ã€‚è¿™æ¶‰åŠåˆ°å°†ç°æœ‰çš„æœ¬åœ°æ–¹æ³•è°ƒç”¨è½¬æ¢ä¸ºåˆ›å»ºè¿œç¨‹è¯·æ±‚çš„é€»è¾‘ï¼Œæ¶‰åŠä¸€å®šçš„é‡æ„å·¥ä½œã€‚</p><p>é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œä½ å°†èƒ½å¤Ÿå°† <code>coupon-customer-impl</code> æœåŠ¡ä»ä¸€ä¸ªå•ä½“åº”ç”¨è½¬å˜ä¸ºä¸€ä¸ªçœŸæ­£çš„å¾®æœåŠ¡æ¶ˆè´¹è€…ï¼Œèƒ½å¤Ÿé€šè¿‡ Nacos æœåŠ¡å‘ç°æœºåˆ¶å‘ç°å¹¶è°ƒç”¨å…¶ä»–å¾®æœåŠ¡ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç€æ‰‹å®æ–½è¿™äº›å˜æ›´ï¼Œå¹¶ç¡®ä¿æœåŠ¡æ¶ˆè´¹è€…èƒ½å¤Ÿæ­£ç¡®åœ°ä¸å…¶ä»–å¾®æœåŠ¡è¿›è¡Œäº¤äº’ã€‚</p><h3 id="_4-2-é…ç½®-webclient-å®ç°è¿œç¨‹è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_4-2-é…ç½®-webclient-å®ç°è¿œç¨‹è°ƒç”¨" aria-hidden="true">#</a> 4.2 é…ç½® WebClient å®ç°è¿œç¨‹è°ƒç”¨</h3><p>WebClient æ˜¯åœ¨ Spring 5 ä¸­å¼•å…¥çš„ï¼Œç”¨äºå‘èµ·å“åº”å¼çš„éé˜»å¡å¼ HTTP è¯·æ±‚ã€‚è¦åœ¨ <code>coupon-customer-impl</code> ä¸­ä½¿ç”¨ WebClientï¼Œä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p><ol><li><strong>åˆ›å»ºé…ç½®ç±»</strong>ï¼šåœ¨ <code>coupon-customer-impl</code> å­æ¨¡å—ä¸­åˆ›å»º <code>WebfluxConfiguration</code> é…ç½®ç±»ã€‚é€šè¿‡ <code>@Configuration</code> æ³¨è§£ï¼Œè¿™ä¸ªç±»ä¼šè¢« Spring å®¹å™¨è¯†åˆ«ä¸ºé…ç½®ç±»ã€‚</li><li><strong>å£°æ˜ WebClient.Builder Bean</strong>ï¼šä½¿ç”¨ <code>@Bean</code> æ³¨è§£å®šä¹‰ä¸€ä¸ª <code>WebClient.Builder</code> çš„å®ä¾‹ã€‚åŠ ä¸Š <code>@LoadBalanced</code> æ³¨è§£ä»¥å¯ç”¨è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Webflux é…ç½®ç±»
 *
 * <span class="token keyword">@author</span> javgo.cn
 * <span class="token keyword">@date</span> 2023/11/8
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebfluxConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span> <span class="token comment">// å¼€å¯è´Ÿè½½å‡è¡¡</span>
    <span class="token keyword">public</span> <span class="token class-name">WebClient<span class="token punctuation">.</span>Builder</span> <span class="token function">registerWebClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">WebClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„æ³¨è§£è§£é‡Šå¦‚ä¸‹ï¼š</p><ul><li><code>@Configuration</code>ï¼šæŒ‡ç¤º Spring è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒå†…éƒ¨å£°æ˜çš„ Beans ä¼šè¢«è‡ªåŠ¨æ‰«æå¹¶åŠ è½½ã€‚</li><li><code>@Bean</code>ï¼šè¡¨æ˜æ–¹æ³• <code>webClientBuilder</code> ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åº”æ³¨å†Œä¸ºå®¹å™¨ä¸­çš„ Beanã€‚</li><li><code>@LoadBalanced</code>ï¼šå¼€å¯ WebClient çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼Œç¡®ä¿è¯·æ±‚è¢«å‡åŒ€åœ°åˆ†é…åˆ°æœåŠ¡å®ä¾‹ä¸Šã€‚</li></ul><p>æœ‰äº† WebClient çš„é…ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»ä½•éœ€è¦çš„åœ°æ–¹æ³¨å…¥ <code>WebClient.Builder</code>ï¼Œç„¶åæ„å»ºå‡º <code>WebClient</code> å®ä¾‹æ¥å‘èµ·è¿œç¨‹è°ƒç”¨ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é‡æ„ <code>CouponCustomerServiceImpl</code> ç±»ï¼Œæ›¿æ¢ç°æœ‰çš„æœ¬åœ°æœåŠ¡è°ƒç”¨ä¸ºé€šè¿‡ WebClient å‘èµ·çš„è¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚</p><h3 id="_4-3-å®ç°-webclient-çš„è¿œç¨‹æœåŠ¡è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_4-3-å®ç°-webclient-çš„è¿œç¨‹æœåŠ¡è°ƒç”¨" aria-hidden="true">#</a> 4.3 å®ç° WebClient çš„è¿œç¨‹æœåŠ¡è°ƒç”¨</h3><p>åˆ©ç”¨ <code>WebClient</code> è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨æ¶‰åŠåˆ°çš„å…³é”®æ­¥éª¤å¦‚ä¸‹ï¼šâ¬‡ï¸</p><p><strong>æ³¨å…¥ WebClient.Builder</strong>ï¼šåœ¨ <code>CouponCustomerServiceImpl</code> ç±»ä¸­æ³¨å…¥ <code>WebfluxConfiguration</code> ä¸­å£°æ˜çš„ <code>WebClient.Builder</code> å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Resource</span>
<span class="token keyword">private</span> <span class="token class-name">WebClient<span class="token punctuation">.</span>Builder</span> webClientBuilder<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è°ƒç”¨è¿œç¨‹æœåŠ¡æ¥å£</strong>ï¼šä½¿ç”¨ <code>WebClient.Builder</code> æ„å»º <code>WebClient</code> å®ä¾‹ï¼Œå¹¶æ›¿æ¢åŸæœ‰çš„æœ¬åœ°æœåŠ¡è°ƒç”¨ã€‚</p><p>ä¸‹é¢æ˜¯æ”¹é€ ä¹‹å‰çš„ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// åŠ è½½ä¼˜æƒ åˆ¸æ¨¡æ¿ä¿¡æ¯</span>
<span class="token class-name">CouponTemplateInfo</span> templateInfo <span class="token operator">=</span> templateService<span class="token punctuation">.</span><span class="token function">loadTemplateInfo</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getCouponTemplateId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿œç¨‹æ¥å£è°ƒç”¨çš„ä»£ç æ”¹é€ å¯ä»¥é€šè¿‡ WebClient æä¾›çš„ â€œé“¾å¼ç¼–ç¨‹â€ è½»æ¾å®ç°ï¼Œä¸‹é¢æ˜¯ä»£ç çš„å®Œæ•´å®ç°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// åŠ è½½ä¼˜æƒ åˆ¸æ¨¡æ¿ä¿¡æ¯</span>
<span class="token class-name">CouponTemplateInfo</span> templateInfo <span class="token operator">=</span> webClientBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åˆ›å»º WebClient å®ä¾‹</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å®š HTTP æ–¹æ³•ä¸º GET</span>
        <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://coupon-template-serv/template/getTemplate?id=&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getCouponTemplateId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®è¯·æ±‚ URI</span>
        <span class="token punctuation">.</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æå–å“åº”å†…å®¹</span>
        <span class="token punctuation">.</span><span class="token function">bodyToMono</span><span class="token punctuation">(</span><span class="token class-name">CouponTemplateInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// å¼‚æ­¥åœ°å°†å“åº”ä½“è½¬æ¢ä¸º CouponTemplateInfo å¯¹è±¡</span>
        <span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é˜»å¡ç›´åˆ°æ“ä½œå®Œæˆï¼Œè¿”å›ç»“æœ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå…³é”®æ–¹æ³•çš„ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li><code>.get()</code>: æŒ‡å®š HTTP æ–¹æ³•ä¸º GETã€‚</li><li><code>.uri(...)</code>: è®¾ç½®è¯·æ±‚çš„ URIï¼Œä½¿ç”¨æœåŠ¡åç§°ï¼ˆcoupon-template-servï¼‰ä»£æ›¿å…·ä½“çš„æœåŠ¡åœ°å€ã€‚</li><li><code>.retrieve().bodyToMono(...)</code>: æå–å¹¶è½¬æ¢å“åº”ä½“ä¸ºæŒ‡å®šçš„å¯¹è±¡ç±»å‹ã€‚</li><li><code>.block()</code>: ä»¥é˜»å¡æ–¹å¼ç­‰å¾…å“åº”ã€‚</li></ul><p>Nacos æœåŠ¡å‘ç°æœºåˆ¶ä¼šä¸ºæˆ‘ä»¬æ‰¾åˆ° <code>coupon-template-serv</code> çš„å¯ç”¨å®ä¾‹ï¼Œè€Œ WebClient åˆ™è´Ÿè´£è´Ÿè½½å‡è¡¡ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å®ä¾‹å‘èµ·è°ƒç”¨ã€‚å¼€å‘è€…ä¸éœ€è¦å…³å¿ƒæœåŠ¡çš„å…·ä½“ä½ç½®ï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯é€æ˜ä¸”æ— éœ€æ„ŸçŸ¥çš„ã€‚</p><p>åœ¨ä½¿ç”¨ WebClient è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸å…³æ³¨çš„æ˜¯å“åº”ä½“ï¼ˆResponse Bodyï¼‰ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦è®¿é—® HTTP å“åº”ä¸­çš„å…¶ä»–ä¿¡æ¯ï¼Œå¦‚çŠ¶æ€ç ï¼ˆStatus Codeï¼‰å’Œå“åº”å¤´ï¼ˆHeadersï¼‰ã€‚</p><p>WebClient æä¾›äº†çµæ´»çš„æ–¹æ³•æ¥æ•è·è¿™äº›ä¿¡æ¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResponseEntity</span><span class="token punctuation">&lt;</span><span class="token class-name">CouponTemplateInfo</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> responseEntityMono <span class="token operator">=</span> webClientBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å®šä½¿ç”¨ GET æ–¹æ³•</span>
    <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://coupon-template-serv/template/getTemplate?id=&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getCouponTemplateId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®è¯·æ±‚ URI</span>
    <span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_JSON</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å®šæœŸæœ›æ¥å—çš„æ•°æ®ç±»å‹ä¸º JSON</span>
    <span class="token punctuation">.</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æå–å“åº”å†…å®¹</span>
    <span class="token punctuation">.</span><span class="token function">toEntity</span><span class="token punctuation">(</span><span class="token class-name">CouponTemplateInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–åŒ…å«å®Œæ•´å“åº”ä¿¡æ¯çš„ ResponseEntity å¯¹è±¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œï¼Œ<code>.toEntity(...)</code> æ–¹æ³•å…è®¸æˆ‘ä»¬è·å–ä¸€ä¸ª <code>ResponseEntity</code> å¯¹è±¡ï¼Œå®ƒä¸ä»…åŒ…å«å“åº”ä½“ï¼Œè¿˜å°è£…äº†å®Œæ•´çš„å“åº”è¯¦æƒ…ã€‚</p><p>æ­¤å¤–ï¼ŒWebClient çš„é“¾å¼è°ƒç”¨é£æ ¼æ˜¯ä¸€ç§æµè¡Œçš„ Builder æ¨¡å¼å®ç°ï¼Œå®ƒç®€åŒ–äº†å¤æ‚å¯¹è±¡çš„æ„é€ è¿‡ç¨‹ã€‚è¿™ç§æ¨¡å¼åœ¨ä¼—å¤šå¼€æºé¡¹ç›®ä¸­å¹¿æ³›ä½¿ç”¨ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­é€šè¿‡ Lombok çš„ <code>@Builder</code> æ³¨è§£æ¥å®ç°ç±»ä¼¼çš„æ„å»ºå™¨æ¨¡å¼ã€‚</p><p>åœ¨æˆåŠŸé‡æ„ <code>requestCoupon</code> æ–¹æ³•åï¼Œä½ å·²ç»å…·å¤‡äº†å°†å…¶ä»–æ–¹æ³•ä¸­çš„æœ¬åœ°è°ƒç”¨è½¬æ¢ä¸º WebClient è¿œç¨‹è°ƒç”¨çš„èƒ½åŠ›ã€‚æ¥ä¸‹æ¥ï¼Œä»¥åŒæ ·çš„æ–¹æ³•ç»§ç»­æ›¿æ¢ <code>findCoupon</code> å’Œ <code>placeOrder</code> ä¸­çš„è°ƒç”¨ã€‚è¿™äº›æ›¿æ¢å°†è¿›ä¸€æ­¥å·©å›ºä½ å¯¹äºè¿œç¨‹æœåŠ¡è°ƒç”¨çš„ç†è§£å’Œå®è·µã€‚</p><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡é—´è°ƒç”¨å¯èƒ½éœ€è¦å¤„ç†å„ç§æ•°æ®ç»“æ„ã€‚<code>findCoupon</code> æ–¹æ³•å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>WebClient</code> è¿›è¡Œå¤æ‚ç±»å‹å“åº”çš„è¿œç¨‹è°ƒç”¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">CouponTemplateInfo</span><span class="token punctuation">&gt;</span></span> templateInfoMap <span class="token operator">=</span> webClientBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å®šä¹‰ GET æ–¹æ³•</span>
    <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://coupon-template-serv/template/getBatch?ids=&quot;</span> <span class="token operator">+</span> templateIds<span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®è¯·æ±‚ URI</span>
    <span class="token punctuation">.</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æå–å“åº”å†…å®¹</span>
    <span class="token punctuation">.</span><span class="token function">bodyToMono</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ParameterizedTypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">CouponTemplateInfo</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å®šæ³›å‹å“åº”ç±»å‹</span>
    <span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é˜»å¡ç›´åˆ°æ“ä½œå®Œæˆï¼Œè¿”å›ç»“æœ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>ParameterizedTypeReference</code> è¢«ç”¨æ¥å¤„ç†æ³›å‹çš„å“åº”ä½“ï¼Œè¿™æ˜¯å› ä¸º Java æ³›å‹åœ¨è¿è¡Œæ—¶æœ‰ç±»å‹æ“¦é™¤ï¼Œå¯¼è‡´æ— æ³•ç›´æ¥ååºåˆ—åŒ–åˆ°ç‰¹å®šçš„æ³›å‹ç±»å‹ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ª <code>ParameterizedTypeReference</code> çš„åŒ¿åå†…éƒ¨ç±»ï¼Œæˆ‘ä»¬æä¾›äº†æ³›å‹ç±»å‹ä¿¡æ¯ï¼Œä½¿ WebClient èƒ½å¤Ÿæ­£ç¡®åœ°å°†å“åº”ä½“æ˜ å°„åˆ°ä¸€ä¸ª <code>Map&lt;Long, CouponTemplateInfo&gt;</code> ç±»å‹çš„å¯¹è±¡ã€‚</p><p>è¿™ç§æ–¹å¼å¯¹äºå¤„ç†å¤æ‚æˆ–éæ ‡å‡†çš„ JSON å“åº”éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯å½“å“åº”ä½“çš„ç±»å‹ä¸æ˜¯ä¸€ä¸ªç®€å•ç±»è€Œæ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹æ—¶ã€‚é€šè¿‡æŒæ¡ WebClient å’Œæ³›å‹å¤„ç†ï¼Œä½ å°†å°±èƒ½å¤Ÿçµæ´»åœ°è°ƒç”¨ä»»ä½•è¿”å›å¤æ‚æ•°æ®ç»“æ„çš„æœåŠ¡ã€‚</p><p>åœ¨ <code>coupon-customer-impl</code> æœåŠ¡ä¸­ï¼Œ<code>placeOrder</code> æ–¹æ³•è´Ÿè´£è°ƒç”¨ <code>coupon-calculation-serv</code> æœåŠ¡ä»¥è®¡ç®—è®¢å•ä»·æ ¼ã€‚ä»¥ä¸‹æ˜¯å°†æœ¬åœ°è°ƒç”¨æ”¹é€ ä¸ºè¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ShoppingCart</span> checkoutInfo <span class="token operator">=</span> webClientBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ„å»º WebClient å®ä¾‹</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å®š HTTP æ–¹æ³•ä¸º POST</span>
    <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://coupon-calculation-serv/calculator/checkout&quot;</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®è¯·æ±‚ URI</span>
    <span class="token punctuation">.</span><span class="token function">bodyValue</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span> <span class="token comment">// æä¾›è¯·æ±‚ä½“å†…å®¹</span>
    <span class="token punctuation">.</span><span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æå–å“åº”å†…å®¹</span>
    <span class="token punctuation">.</span><span class="token function">bodyToMono</span><span class="token punctuation">(</span><span class="token class-name">ShoppingCart</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// å¼‚æ­¥åœ°å°†å“åº”ä½“è½¬æ¢ä¸º ShoppingCart å¯¹è±¡</span>
    <span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é˜»å¡ç›´åˆ°æ“ä½œå®Œæˆï¼Œè¿”å›ç»“æœ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸åŒäºä¹‹å‰çš„ GET è¯·æ±‚ï¼Œè¿™é‡Œçš„ POST è¯·æ±‚ä½¿ç”¨äº† <code>.post()</code> æ–¹æ³•ï¼Œå¹¶é€šè¿‡ <code>.bodyValue(order)</code> ä¼ é€’äº†è¯·æ±‚ä½“æ•°æ®ã€‚è¿™æ˜¯å› ä¸º POST è¯·æ±‚é€šå¸¸ç”¨äºå‘é€æ•°æ®ç»™æœåŠ¡å™¨ï¼Œè€Œ GET è¯·æ±‚ä¸»è¦ç”¨äºä»æœåŠ¡å™¨æ£€ç´¢æ•°æ®ã€‚</p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æ‰€æœ‰æœåŠ¡æ–¹æ³•ä»æœ¬åœ°è°ƒç”¨åˆ°è¿œç¨‹è°ƒç”¨çš„æ”¹é€ ã€‚éšç€è¿™äº›æœåŠ¡çš„é¡ºåˆ©å¯åŠ¨å’Œåœ¨ Nacos ä¸­çš„æ³¨å†Œï¼Œä½ çš„å¾®æœåŠ¡æ²»ç†åŸºç¡€è®¾æ–½å·²ç»æ­å»ºå®Œæˆã€‚ä½ åº”è¯¥èƒ½å¤Ÿåœ¨ Nacos æ§åˆ¶å°ä¸­çœ‹åˆ° <code>coupon-template-serv</code>ã€<code>coupon-calculation-serv</code> å’Œ <code>coupon-customer-serv</code> ä¸‰ä¸ªæœåŠ¡çš„æ³¨å†Œä¿¡æ¯ï¼Œæ— è®ºæ˜¯å•æœºè¿˜æ˜¯é›†ç¾¤æ¨¡å¼ã€‚å¦‚æœä½ æ˜¯ä»¥é›†ç¾¤æ¨¡å¼å¯åŠ¨äº†å¤šå° Nacos æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå³ä¾¿ä½ åœ¨å®æˆ˜é¡¹ç›®ä¸­åªé…ç½®äº†ä¸€ä¸ª Nacos URLï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨è™šæ‹Ÿ IP æ­å»ºå•ç‹¬çš„é›†ç¾¤åœ°å€ï¼Œæ³¨å†Œä¿¡æ¯ä¹Ÿä¼šä¼ æ’­åˆ° Nacos é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-10-09-052119.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æŒæ¡äº†å¦‚ä½•ä½¿ç”¨ Nacos è¿›è¡ŒæœåŠ¡æ²»ç†åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ·±å…¥å…¶åº•å±‚å®ç°ã€‚äº†è§£å®¢æˆ·ç«¯å¦‚ä½•ä» Nacos Server æ‹‰å–æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œå°†ä½¿ä½ å¯¹æœåŠ¡å‘ç°æœ‰æ›´æ·±å±‚æ¬¡çš„è®¤è¯†ã€‚è¿™ä¸ä»…å¢å¼ºäº†ä½ çš„åŠ¨æ‰‹å®è·µèƒ½åŠ›ï¼Œä¹Ÿä¸ºä½ è§£é”æ›´é«˜çº§çš„å¾®æœåŠ¡æ¶æ„è®¾è®¡æä¾›äº†å®è´µçš„çŸ¥è¯†å‚¨å¤‡ã€‚</p><h3 id="_4-4-æ¢ç´¢-nacos-å®¢æˆ·ç«¯æœåŠ¡å‘ç°å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#_4-4-æ¢ç´¢-nacos-å®¢æˆ·ç«¯æœåŠ¡å‘ç°å®ç°åŸç†" aria-hidden="true">#</a> 4.4 æ¢ç´¢ Nacos å®¢æˆ·ç«¯æœåŠ¡å‘ç°å®ç°åŸç†</h3><p>Nacos å®¢æˆ·ç«¯åŒæ­¥æœåŠ¡æ³¨å†Œä¿¡æ¯çš„æœºåˆ¶åŸºäº<strong>å‘¨æœŸæ€§çš„ä¸»åŠ¨è½®è¯¢</strong>â€”â€”è¿™æ˜¯ä¸€ç§å…¸å‹çš„<strong>å®¢æˆ·ç«¯æ‹‰å–ï¼ˆPullï¼‰æ¨¡å¼</strong>ã€‚å®¢æˆ·ç«¯å®šæ—¶å‘ Nacos æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œæ‹‰å–æœ€æ–°çš„æœåŠ¡åˆ—è¡¨ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯ï¼ˆåœ°å€åˆ—è¡¨ã€group åˆ†ç»„ã€cluster åç§°ç­‰ï¼‰æ›´æ–°åˆ°æœ¬åœ°ç¼“å­˜ä¸­ã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒNacos Client ä¼šå¼€å¯ä¸€ä¸ªæœ¬åœ°çš„å®šæ—¶ä»»åŠ¡ï¼Œæ¯é—´éš”ä¸€æ®µæ—¶é—´ï¼Œå°±å°è¯•ä» Nacos Server æŸ¥è¯¢æœåŠ¡æ³¨å†Œè¡¨ï¼Œå¹¶å°†æœ€æ–°çš„æ³¨å†Œä¿¡æ¯æ›´æ–°åˆ°æœ¬åœ°ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦ç”± <code>UpdateTask</code> ç±»å®ç°ï¼ˆå®ç°äº† <code>Runnable</code> æ¥å£ï¼‰ï¼Œè¯¥ç±»æ˜¯ <code>HostReactor</code> çš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå®ƒè´Ÿè´£å‘¨æœŸæ€§åœ°æŸ¥è¯¢æœåŠ¡ä¿¡æ¯å¹¶æ›´æ–°æœ¬åœ°çŠ¶æ€ã€‚è´Ÿè´£æ‹‰å–æœåŠ¡çš„ä»»åŠ¡æ˜¯ UpdateTask ç±»ï¼Œå®ƒå®ç°äº† Runnable æ¥å£ã€‚Nacos ä»¥å¼€å¯çº¿ç¨‹çš„æ–¹å¼è°ƒç”¨ <code>UpdateTask</code> ç±»ä¸­çš„ <code>run()</code> æ–¹æ³•ï¼Œè§¦å‘æœ¬åœ°çš„æœåŠ¡å‘ç°æŸ¥è¯¢è¯·æ±‚ã€‚</p><figure><img src="https://javgo-images.oss-cn-beijing.aliyuncs.com/2023-11-08-122025.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»¥ä¸‹æ˜¯ <code>UpdateTask</code> ç±»çš„ç®€åŒ–é€»è¾‘ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateTask</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

     <span class="token comment">// ...çœç•¥ä»£ç ...</span>
  
    <span class="token comment">// ç”±çº¿ç¨‹æ± å‘¨æœŸæ€§æ‰§è¡Œçš„ run() æ–¹æ³•ï¼Œç”¨äºæ‹‰å–æœåŠ¡ä¿¡æ¯</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é»˜è®¤çš„ä¸‹æ¬¡æ‰§è¡Œå»¶è¿Ÿæ—¶é—´</span>
        <span class="token keyword">long</span> delayTime <span class="token operator">=</span> <span class="token constant">DEFAULT_DELAY</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
             <span class="token comment">// å°è¯•ä»æœ¬åœ°ç¼“å­˜çš„ serviceInfoMap ä¸­è·å–æœåŠ¡ä¿¡æ¯ï¼ŒåŒ…å«æœåŠ¡å™¨åœ°å€åˆ—è¡¨ç­‰</span>
            <span class="token class-name">ServiceInfo</span> serviceObj <span class="token operator">=</span> serviceInfoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">ServiceInfo</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span>serviceName<span class="token punctuation">,</span> clusters<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

             <span class="token comment">// å¦‚æœæœ¬åœ°ç¼“å­˜ä¸ºç©ºï¼Œåˆ™è¯´æ˜æ˜¯é¦–æ¬¡æŸ¥è¯¢æˆ–ä¿¡æ¯å·²è¢«æ¸…é™¤ï¼Œéœ€ä» Nacos æœåŠ¡å™¨æ‹‰å–æœ€æ–°ä¿¡æ¯</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>serviceObj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">updateService</span><span class="token punctuation">(</span>serviceName<span class="token punctuation">,</span> clusters<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

             <span class="token comment">// å¦‚æœæœåŠ¡ä¿¡æ¯çš„æœ€åæ›´æ–°æ—¶é—´æˆ³å°äºç­‰äºä¸Šæ¬¡è®°å½•çš„æ›´æ–°æ—¶é—´ï¼Œåˆ™éœ€è¦è¿›è¡Œæ›´æ–°</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>serviceObj<span class="token punctuation">.</span><span class="token function">getLastRefTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> lastRefTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å®¢æˆ·ç«¯æ‹‰å–ï¼ˆPullï¼‰Nacos æœåŠ¡å™¨æœ€æ–°ä¿¡æ¯</span>
                <span class="token function">updateService</span><span class="token punctuation">(</span>serviceName<span class="token punctuation">,</span> clusters<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// é‡æ–°ä»ç¼“å­˜è·å–æ›´æ–°åçš„æœåŠ¡ä¿¡æ¯</span>
                serviceObj <span class="token operator">=</span> serviceInfoMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">ServiceInfo</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span>serviceName<span class="token punctuation">,</span> clusters<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                 <span class="token comment">// å¦‚æœæœåŠ¡ä¿¡æ¯çš„æœ€åæ›´æ–°æ—¶é—´æˆ³è¾ƒæ–°ï¼Œåˆ™è¡¨ç¤º Nacos æœåŠ¡é€šè¿‡ä¸»åŠ¨ push æœºåˆ¶å·²è¢«æ›´æ–°ï¼Œåªéœ€åˆ·æ–°æœ¬åœ°ç¼“å­˜</span>
                <span class="token function">refreshOnly</span><span class="token punctuation">(</span>serviceName<span class="token punctuation">,</span> clusters<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

             <span class="token comment">// æ›´æ–°è®°å½•çš„æœ€åä¸€æ¬¡å¼•ç”¨æ—¶é—´</span>
            lastRefTime <span class="token operator">=</span> serviceObj<span class="token punctuation">.</span><span class="token function">getLastRefTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// æ£€æŸ¥å½“å‰æœåŠ¡æ˜¯å¦è¿˜æœ‰è®¢é˜…è€…ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™åœæ­¢æ›´æ–°ä»»åŠ¡</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>notifier<span class="token punctuation">.</span><span class="token function">isSubscribed</span><span class="token punctuation">(</span>serviceName<span class="token punctuation">,</span> clusters<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>futureMap
                    <span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token class-name">ServiceInfo</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span>serviceName<span class="token punctuation">,</span> clusters<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// abort the update task</span>
                <span class="token constant">NAMING_LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;update task is stopped, service:&quot;</span> <span class="token operator">+</span> serviceName <span class="token operator">+</span> <span class="token string">&quot;, clusters:&quot;</span> <span class="token operator">+</span> clusters<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          
            <span class="token comment">// æ£€æŸ¥æœåŠ¡ä¿¡æ¯ä¸­æ˜¯å¦è¿˜æœ‰å­˜æ´»çš„ä¸»æœºåˆ—è¡¨ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™å¢åŠ å¤±è´¥è®¡æ•°å™¨ï¼ˆ+1ï¼‰</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>serviceObj<span class="token punctuation">.</span><span class="token function">getHosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">incFailCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
             
            <span class="token comment">// è®¾ç½®ä¸‹ä¸€æ¬¡æ‰§è¡Œä»»åŠ¡çš„å»¶è¿Ÿæ—¶é—´ï¼Œé€šå¸¸å–å†³äºæœåŠ¡ä¿¡æ¯ä¸­æŒ‡å®šçš„ç¼“å­˜å‘¨æœŸ</span>
            delayTime <span class="token operator">=</span> serviceObj<span class="token punctuation">.</span><span class="token function">getCacheMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// é‡ç½®å¤±è´¥è®¡æ•°å™¨ï¼ˆ0ï¼‰</span>
            <span class="token function">resetFailCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// åœ¨æ•è·å¼‚å¸¸æ—¶å¢åŠ å¤±è´¥è®¡æ•°å™¨ï¼ˆ+1ï¼‰ï¼Œå¹¶è®°å½•è­¦å‘Šæ—¥å¿—</span>
            <span class="token function">incFailCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">NAMING_LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;[NA] failed to update serviceName: &quot;</span> <span class="token operator">+</span> serviceName<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
             <span class="token comment">// è®¡åˆ’ä¸‹ä¸€æ¬¡æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ï¼Œè¿™é‡Œä½¿ç”¨äº†æŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œå¤±è´¥æ¬¡æ•°è¶Šå¤šï¼Œé—´éš”æ—¶é—´è¶Šé•¿</span>
            executor<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>delayTime <span class="token operator">&lt;&lt;</span> failCount<span class="token punctuation">,</span> <span class="token constant">DEFAULT_DELAY</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>UpdateTask</code> çš„æºç ä¸­ï¼Œé€šè¿‡è°ƒç”¨ <code>updateService(serviceName, clusters)</code> æ–¹æ³•å®ç°äº†æœåŠ¡æŸ¥è¯¢å’Œæœ¬åœ°æ³¨å†Œè¡¨æ›´æ–°ã€‚åœ¨æ¯æ¬¡æ‰§è¡Œç»“æŸæ—¶ï¼Œ<code>UpdateTask</code> ä¼šè®¡åˆ’è‡ªå·±çš„ä¸‹ä¸€æ¬¡æ‰§è¡Œï¼Œä¿è¯æœåŠ¡æ³¨å†Œä¿¡æ¯çš„æŒç»­æ›´æ–°ã€‚å®ƒæ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´åŒæ­¥çŠ¶æ€çš„å…³é”®ç¯èŠ‚ã€‚å…·ä½“æ¥è¯´å°±æ˜¯åœ¨ç»“å°¾å¤„å®ƒé€šè¿‡ <code>finally</code> ä»£ç å—è®¾ç½®äº†ä¸‹ä¸€æ¬¡ <code>executor</code> æŸ¥è¯¢çš„æ—¶é—´ï¼Œå‘¨è€Œå¤å§‹å¾ªç¯å¾€å¤ã€‚</p><blockquote><p>ä¸ºäº†è¿›ä¸€æ­¥ç†è§£è¿™ä¸ªæœºåˆ¶ï¼Œä½ å¯ä»¥æ¢ç´¢ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li><code>UpdateTask</code> æ˜¯å¦‚ä½•è¢«åˆå§‹åŒ–å’Œè°ƒåº¦çš„ï¼Ÿ</li><li>å®ƒæ˜¯ç”±å“ªä¸ªç±»è´Ÿè´£é¦–æ¬¡è§¦å‘ï¼Ÿ</li></ol></blockquote><h2 id="_5-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_5-æ€»ç»“" aria-hidden="true">#</a> 5.æ€»ç»“</h2><p>æˆ‘ä»¬å·²ç»æˆåŠŸå®Œæˆäº†åŸºäº Nacos çš„æœåŠ¡æ²»ç†é“¾è·¯æ­å»ºã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p><ul><li><strong>æœåŠ¡æ³¨å†Œ</strong>ï¼šæœåŠ¡æä¾›è€…å¦‚ä½•åœ¨ Nacos ä¸­æ³¨å†Œè‡ªå·±ï¼Œä»¥ä¾¿è¢«å‘ç°ã€‚</li><li><strong>æœåŠ¡å‘ç°</strong>ï¼šæœåŠ¡æ¶ˆè´¹è€…å¦‚ä½•åˆ©ç”¨ Nacos å‘ç°æ³¨å†Œçš„æœåŠ¡ã€‚</li><li><strong>è¿œç¨‹è°ƒç”¨</strong>ï¼šå¦‚ä½•ä½¿ç”¨ WebClient åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸­å‘èµ·å¯¹æœåŠ¡æä¾›è€…çš„è¿œç¨‹è°ƒç”¨ã€‚</li></ul><p>è¿™äº›æ­¥éª¤æ„æˆäº†å¾®æœåŠ¡æ¶æ„ä¸­æœåŠ¡æ²»ç†çš„æ ¸å¿ƒé“¾è·¯ï¼Œç¡®ä¿æœåŠ¡é—´å¯ä»¥ç›¸äº’å‘ç°å¹¶é€šä¿¡ã€‚</p><blockquote><p>æ€è€ƒ ğŸ¤”ï¼š</p><p>å½“æœåŠ¡èŠ‚ç‚¹é‡åˆ°é—®é¢˜ï¼Œæ¯”å¦‚ç½‘ç»œä¸ç¨³å®šæˆ–èµ„æºé™åˆ¶ï¼Œå®ƒä»¬å¯èƒ½æ— æ³•æ­£å¸¸å“åº”è¯·æ±‚ã€‚è¿™æ—¶å€™ï¼ŒNacos å¦‚ä½•æ£€æµ‹å¹¶å¤„ç†è¿™äº›æ•…éšœèŠ‚ç‚¹å‘¢ï¼Ÿ</p><p>è¿™ä¸ªé—®é¢˜å…³ç³»åˆ°æœåŠ¡æ²»ç†ä¸­çš„ä¸€ä¸ªå…³é”®ç¯èŠ‚â€”â€”æ•…éšœæ£€æµ‹å’ŒæœåŠ¡ä¸‹çº¿ã€‚Nacos æä¾›äº†å‡ ç§æœºåˆ¶æ¥å®ç°è¿™ä¸€åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¥åº·æ£€æŸ¥ã€å¿ƒè·³æœºåˆ¶å’ŒæœåŠ¡ä¿æŠ¤è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå¥åº·æ£€æŸ¥å¯ä»¥å¸®åŠ© Nacos ç›‘æ§æœåŠ¡å®ä¾‹çš„çŠ¶æ€ï¼Œè€Œå¿ƒè·³æœºåˆ¶å¯ä»¥ç¡®å®šä¸€ä¸ªæœåŠ¡æ˜¯å¦ä»ç„¶å­˜æ´»ã€‚</p><ul><li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šå‘¨æœŸæ€§æ£€æµ‹æœåŠ¡å®ä¾‹çš„å¥åº·çŠ¶æ€ã€‚</li><li><strong>å¿ƒè·³æœºåˆ¶</strong>ï¼šæœåŠ¡å®ä¾‹å®šæ—¶å‘æ³¨å†Œä¸­å¿ƒå‘é€å¿ƒè·³ï¼Œè¯æ˜è‡ªå·±çš„å¯ç”¨æ€§ã€‚</li><li><strong>æœåŠ¡ä¿æŠ¤è§„åˆ™</strong>ï¼šåœ¨æ£€æµ‹åˆ°å¼‚å¸¸æ—¶ï¼Œè‡ªåŠ¨éš”ç¦»æ•…éšœæœåŠ¡èŠ‚ç‚¹ã€‚</li></ul><p>é¼“åŠ±ä½ æ¢ç´¢ Nacos çš„æ•…éšœå¤„ç†æ–‡æ¡£ï¼Œç†è§£è¿™äº›æœºåˆ¶æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¿™å°†åŠ æ·±ä½ å¯¹å¾®æœåŠ¡ç¨³å®šæ€§å’Œå¯é æ€§ä¿éšœæªæ–½çš„ç†è§£ã€‚</p></blockquote></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/javgocn/javgocn/edit/main/src/md/Spring/SpringCloud/05-cloud-æœåŠ¡æ²»ç†.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: liyao@jikugroup.com">liyao</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="04-cloud-å®æˆ˜é¡¹ç›®æ­å»º" class="vp-link nav-link prev nav-link prev" href="/md/Spring/SpringCloud/04-cloud-%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->04-cloud-å®æˆ˜é¡¹ç›®æ­å»º</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-009ef08a.js" defer></script>
  </body>
</html>
